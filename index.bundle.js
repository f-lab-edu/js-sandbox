(()=>{"use strict";var e="/js-sandbox/";const t=new class{db;constructor(e,t,n){this.dbName=e,this.dbVersion=t,this.stores=n}async openDB(){return new Promise(((e,t)=>{const n=window.indexedDB.open(this.dbName,this.dbVersion);n.onsuccess=()=>{this.db=n.result,e()},n.onerror=e=>{t(e)},n.onupgradeneeded=()=>{this.db=n.result,this.stores.forEach((e=>{this.db.objectStoreNames.contains(e)&&this.db.deleteObjectStore(e),this.db.createObjectStore(e,{keyPath:"id",autoIncrement:!0})}))}}))}async getData(e,t){return new Promise(((n,i)=>{const s=this.db.transaction(e,"readonly").objectStore(e).get(t);s.onsuccess=()=>{n(s.result)},s.onerror=e=>{i(e)}}))}async getAllData(e){return new Promise(((t,n)=>{const i=this.db.transaction(e,"readonly").objectStore(e).getAll();i.onsuccess=()=>{t(i.result)},i.onerror=e=>{n(e)}}))}async upsertData(e,t){return new Promise(((n,i)=>{const s=this.db.transaction(e,"readwrite").objectStore(e).put(t);s.onsuccess=()=>{n(s.result)},s.onerror=e=>{i(e)}}))}async deleteData(e,t){return new Promise(((n,i)=>{const s=this.db.transaction(e,"readwrite").objectStore(e).delete(t);s.onsuccess=()=>{n(s.result)},s.onerror=e=>{i(e)}}))}}("sandboxDB",2,["notepad"]),n=(e,...t)=>String.raw(e,...t),i=e+"2a583f97b153f7da7d41.png",s=[{path:"/",html:n`<my-home></my-home>`,label:"Home",iconSrc:null},{path:"/tetris",html:n`<my-tetris></my-tetris>`,label:"Tetris",iconSrc:e+"71c0bea6462001116fcf.png"},{path:"/flappybird",html:n`<my-flappybird></my-flappybird>`,label:"Flappy&nbsp;Bird",iconSrc:e+"39b884119b49599495ed.png"},{path:"/notepad",html:n`<my-notepad></my-notepad>`,label:"Note&nbsp;Pad",iconSrc:i}],a=s.reduce(((e,t)=>{const{path:n,label:i,iconSrc:s}=t;return"/"===t.path?e:[...e,{path:n,label:i,iconSrc:s}]}),[]),l=async()=>[...(await t.getAllData("notepad")).reduce(((e,t)=>{const{id:n,title:s}=t;return[...e,{path:`/notepad/${n}`,label:s,iconSrc:i}]}),[])],o=s,c=new class{constructor(e){this.routes=e}render(){const e=this.routes.find((e=>e.path===window.location.pathname.replace("/js-sandbox","")));e?document.querySelector("#page").innerHTML=e.html:this.replaceTo("/")}navigateTo(e){window.history.pushState(null,null,e),this.render()}replaceTo(e){window.history.replaceState(null,null,e),this.render()}back(){window.history.back(),this.render()}}(o);class r extends HTMLElement{connectedCallback(){this.render()}render(){this.innerHTML=this.injectHTML()}injectHTML(){return""}}class d extends r{async connectedCallback(){this.icons=[...a,...await l()],super.connectedCallback(),window.addEventListener("popstate",(()=>c.render())),this.addEventListener("iconChange",(e=>{this.icons=[...this.icons,e.detail],this.render()}))}injectHTML(){return n`
      <div id="page"></div>
      <my-icons icons=${JSON.stringify(this.icons)} tabindex="-1"></my-icons>
      <my-footer></my-footer>
    `}}const h=e+"59cb65e4f8f2627d6c2c.png",p=e+"bc8d31a2338dd0b3f68a.png";class b extends r{connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.handleClick.bind(this))}injectHTML(){return n`
      <img alt="window_logo" src=${h} class="window_icon" />
      <div class="input_box">
        <img alt="search" src=${p} class="window_icon" /><input type="text" placeholder="찾기" />
      </div>
      ${a.map((e=>n` <my-icon data-path="${e.path}" data-iconSrc="${e.iconSrc}"></my-icon> `)).join("")}
    `}handleClick(e){if(!e.target.closest("my-icon"))return;const t=e.target.closest("my-icon");c.navigateTo(t.dataset.path)}}class u extends r{}class y extends r{injectHTML(){return n`
      <h1>Tetris</h1>
      <p>You are viewing the Tetris component!</p>
    `}}class m extends r{injectHTML(){return n`
      <h1>Flappy Bird</h1>
      <p>You are viewing the Flappy Bird component!</p>
      <p>You are viewing the Flappy Bird component!</p>
      <p>You are viewing the Flappy Bird component!</p>
      <p>You are viewing the Flappy Bird component!</p>
      <p>You are viewing the Flappy Bird component!</p>
      <p>You are viewing the Flappy Bird component!</p>
    `}}class k extends r{constructor(){super(),this.icons=JSON.parse(this.getAttribute("icons"))}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.handleClick.bind(this)),this.addEventListener("dblclick",this.handleDoubleClick.bind(this)),this.addEventListener("keydown",this.handleKeyDown.bind(this))}injectHTML(){return n`
      ${this.icons.map((e=>n`
            <my-icon data-path=${e.path} data-label=${e.label} data-iconSrc=${e.iconSrc}></my-icon>
          `)).join("")}
    `}handleClick(e){if(!e.target.closest("my-icon"))return;const t=e.target.closest("my-icon");t.toggleAttribute("checked"),this.querySelectorAll("my-icon").forEach((e=>{e!==t&&e.removeAttribute("checked")}))}handleDoubleClick(e){if(!e.target.closest("my-icon"))return;const t=e.target.closest("my-icon");c.navigateTo(t.dataset.path)}handleKeyDown(e){const t=this.querySelectorAll("my-icon[checked]");if("Enter"===e.key){if(t.length>1)return;if(!t)return;c.navigateTo(t[0].dataset.path)}}}class v extends r{injectHTML(){const{label:e,iconsrc:t}=this.dataset;return n`
      <img alt="${e}_icon" src=${t} />
      ${e?`<span class="icon_name">${e}</span>`:""}
    `}}class f extends r{connectedCallback(){super.connectedCallback(),this.addEventListener("save",this.handleSave),this.addEventListener("localSave",this.handleLocalSave)}disconnectedCallback(){this.removeEventListener("save",this.handleSave),this.removeEventListener("localSave",this.handleLocalSave)}injectHTML(){return n`
      <my-notepad-header></my-notepad-header>
      <textarea></textarea>
    `}handleLocalSave(){const e=this.getNotePadData();if("fail"!==e)try{const t=new Blob([e.content],{type:"text/plain"}),n=document.createElement("a");n.href=URL.createObjectURL(t),n.download=`${e.title}.txt`,n.click()}catch(e){alert("저장에 실패했습니다."),console.error(e)}finally{this.querySelector("textarea").value=""}}async handleSave(e){e.stopPropagation();const n=this.getNotePadData();if("fail"!==n)try{const e=await t.upsertData("notepad",{title:n.title,content:n.content});e&&alert("저장되었습니다."),this.dispatchEvent(new CustomEvent("iconChange",{bubbles:!0,detail:{path:`/notepad/${e}`,label:n.title,iconSrc:i}}))}catch(e){alert("저장에 실패했습니다."),console.error(e)}finally{this.querySelector("textarea").value=""}}getNotePadData(){const e=this.querySelector("textarea").value;if(!e)return alert("내용이 없습니다."),"fail";let t=prompt("저장할 파일명을 입력하세요","제목없음");for(;null==t||""===t;){if(null===t)return"fail";t=prompt("파일명은 필수입니다.","제목없음")}return{title:t,content:e}}}const w=[{id:"file",title:"파일",key:"F",slots:[{id:1,text:"새로&nbsp;만들기(N)",key:["Ctrl","N"],disable:!0},{id:2,text:"내 컴퓨터에 저장(W)",key:["Ctrl","Shift","N"],onClick:function(){this.dispatchEvent(new CustomEvent("localSave",{bubbles:!0}))}},{id:3,text:"저장(S)",key:["Ctrl","S"],onClick:function(){this.dispatchEvent(new CustomEvent("save",{bubbles:!0}))}},{id:4,text:"삭제(D)",key:["Ctrl","Shift","S"],disable:!0},{id:5,text:"페이지&nbsp;설정(U)...",key:[],disable:!0},{id:6,text:"인쇄(P)...",key:["Ctrl","P"],disable:!0},{id:7,text:"끝내기(X)",key:[],disable:!0}]},{id:"edit",title:"편집",key:"E",slots:[{id:8,text:"실행&nbsp;취소(U)",key:["Ctrl","Z"],disable:!0},{id:9,text:"잘라내기(T)",key:["Ctrl","X"],disable:!0},{id:10,text:"복사(C)",key:["Ctrl","C"],disable:!0},{id:11,text:"붙여넣기(P)",key:["Ctrl","V"],disable:!0},{id:12,text:"삭제(D)",key:["Del"],disable:!0},{id:13,text:"Bing으로&nbsp;검색(S)...",key:["Ctrl","E"],disable:!0},{id:14,text:"찾기(F)...",key:["Ctrl","F"],disable:!0},{id:15,text:"다음&nbsp;찾기(N)",key:["F3"],disable:!0},{id:16,text:"이전&nbsp;찾기(V)",key:["Shift","F3"],disable:!0},{id:17,text:"바꾸기(R)...",key:["Ctrl","H"],disable:!0},{id:18,text:"이동(G)...",key:["Ctrl","G"],disable:!0},{id:19,text:"모두&nbsp;선택(A)",key:["Ctrl","A"],disable:!0},{id:20,text:"시간/날짜(D)",key:["F5"],disable:!0}]},{id:"format",title:"서식",key:"O",slots:[{id:21,text:"자동&nbsp;줄&nbsp;바꿈(W)",key:[],disable:!0},{id:22,text:"글꼴(F)...",key:[],disable:!0}]},{id:"view",title:"보기",key:"V",slots:[{id:23,text:"확대하기(Z)",key:["Ctrl","+"],disable:!0},{id:24,text:"축소하기(X)",key:["Ctrl","-"],disable:!0},{id:25,text:"상태&nbsp;표시줄(S)",key:[],disable:!0}]},{id:"help",title:"도움말",key:"H",slots:[{id:26,text:"도움말&nbsp;보기(H)",key:[],disable:!0},{id:27,text:"피드백&nbsp;보내기(F)",key:[],disable:!0},{id:28,text:"메모장&nbsp;정보(A)",key:[],disable:!0}]}];class g extends r{slots=w.reduce(((e,t)=>[...e,...t.slots]),[]);connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.handleClick),this.querySelectorAll(".sub").forEach((e=>{const t=this.slots.find((t=>t.id===Number(e.dataset.id))).onClick;t&&e.addEventListener("click",t)}))}disconnectedCallback(){this.removeEventListener("click",this.handleClick),this.querySelectorAll(".sub").forEach((e=>{const t=this.slots.find((t=>t.id===Number(e.dataset.id))).onClick;t&&e.removeEventListener("click",t)}))}injectHTML(){return n`
      <header>
        <span><img alt="notepad_icon" src=${i} />제목없음 - Windows 메모장</span>
        <div class="view_buttons">
          <button class="view_button" id="mini">🗕</button>
          <button class="view_button" id="full">🗖</button>
          <button class="view_button" id="close">Ⅹ</button>
        </div>
      </header>
      <div class="edit_buttons">
        ${w.map((e=>n`
              <button class="edit_button">
                ${e.title}(<u>${e.key}</u>)
                <div class="popup">
                  ${e.slots.map((e=>n`
                        <div class="sub" data-id="${e.id}" data-disable="${!!e.disable}">
                          <div>${e.text}</div>
                          ${e.key.length>0?`<div>${e.key.join(" + ")}</div>`:""}
                        </div>
                      `)).join("")}
                </div>
              </button>
            `)).join("")}
      </div>
    `}handleClick(e){switch(e.target.className){case"view_button":(function(e){switch(e.id){case"full":this.parentElement.classList.toggle("fullscreen");break;case"mini":case"close":c.back()}}).call(this,e.target);break;case"edit_button":(function(e){e.querySelector(".popup").classList.toggle("show"),this.querySelectorAll(".popup").forEach((t=>{t!==e.querySelector(".popup")&&t.classList.remove("show")}))}).call(this,e.target)}}}(async()=>{await t.openDB(),customElements.define("my-app",d),customElements.define("my-footer",b),customElements.define("my-home",u),customElements.define("my-tetris",y),customElements.define("my-flappybird",m),customElements.define("my-icons",k),customElements.define("my-icon",v),customElements.define("my-notepad",f),customElements.define("my-notepad-header",g)})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bmRib3gvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vamF2YXNjcmlwdC1zYW5kYm94L3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL2phdmFzY3JpcHQtc2FuZGJveC8uL3NyYy9jb3JlL0luZGV4ZWREQi5qcyIsIndlYnBhY2s6Ly9qYXZhc2NyaXB0LXNhbmRib3gvLi9zcmMvdXRpbHMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vamF2YXNjcmlwdC1zYW5kYm94Ly4vc3JjL3V0aWxzL3JvdXRlcy5qcyIsIndlYnBhY2s6Ly9qYXZhc2NyaXB0LXNhbmRib3gvLi9zcmMvY29yZS9Sb3V0ZXIuanMiLCJ3ZWJwYWNrOi8vamF2YXNjcmlwdC1zYW5kYm94Ly4vc3JjL2NvcmUvV2ViQ29tcG9uZW50LmpzIiwid2VicGFjazovL2phdmFzY3JpcHQtc2FuZGJveC8uL3NyYy9BcHAuanMiLCJ3ZWJwYWNrOi8vamF2YXNjcmlwdC1zYW5kYm94Ly4vc3JjL3ZpZXcvQ29tbW9uL0Zvb3Rlci5qcyIsIndlYnBhY2s6Ly9qYXZhc2NyaXB0LXNhbmRib3gvLi9zcmMvdmlldy9Ib21lL2luZGV4LmpzIiwid2VicGFjazovL2phdmFzY3JpcHQtc2FuZGJveC8uL3NyYy92aWV3L1RldHJpcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9qYXZhc2NyaXB0LXNhbmRib3gvLi9zcmMvdmlldy9GbGFwcHlCaXJkL2luZGV4LmpzIiwid2VicGFjazovL2phdmFzY3JpcHQtc2FuZGJveC8uL3NyYy92aWV3L0NvbW1vbi9JY29ucy5qcyIsIndlYnBhY2s6Ly9qYXZhc2NyaXB0LXNhbmRib3gvLi9zcmMvdmlldy9Db21tb24vSWNvbi5qcyIsIndlYnBhY2s6Ly9qYXZhc2NyaXB0LXNhbmRib3gvLi9zcmMvdmlldy9Ob3RlUGFkL2luZGV4LmpzIiwid2VicGFjazovL2phdmFzY3JpcHQtc2FuZGJveC8uL3NyYy92aWV3L05vdGVQYWQvY29uc3QvYnV0dG9ucy5qcyIsIndlYnBhY2s6Ly9qYXZhc2NyaXB0LXNhbmRib3gvLi9zcmMvdmlldy9Ob3RlUGFkL2NvbXBvbmVudHMvTm90ZVBhZEhlYWRlci5qcyIsIndlYnBhY2s6Ly9qYXZhc2NyaXB0LXNhbmRib3gvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIl9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiL2pzLXNhbmRib3gvXCI7IiwiY2xhc3MgSW5kZXhlZERCIHtcbiAgZGI7XG5cbiAgLyoqXG4gICAqIOyDneyEseyekFxuICAgKiBAcGFyYW0ge3N0cmluZ30gZGJOYW1lXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkYlZlcnNpb25cbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gc3RvcmVzXG4gICAqL1xuICBjb25zdHJ1Y3RvcihkYk5hbWUsIGRiVmVyc2lvbiwgc3RvcmVzKSB7XG4gICAgdGhpcy5kYk5hbWUgPSBkYk5hbWU7XG4gICAgdGhpcy5kYlZlcnNpb24gPSBkYlZlcnNpb247XG4gICAgdGhpcy5zdG9yZXMgPSBzdG9yZXM7XG4gIH1cblxuICAvKipcbiAgICogREIg7Jik7ZSIIOuplOyEnOuTnFxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTx2b2lkPn1cbiAgICovXG4gIGFzeW5jIG9wZW5EQigpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3QgcmVxdWVzdCA9IHdpbmRvdy5pbmRleGVkREIub3Blbih0aGlzLmRiTmFtZSwgdGhpcy5kYlZlcnNpb24pO1xuXG4gICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5kYiA9IHJlcXVlc3QucmVzdWx0O1xuICAgICAgICByZXNvbHZlKCk7XG4gICAgICB9O1xuXG4gICAgICByZXF1ZXN0Lm9uZXJyb3IgPSAoZSkgPT4ge1xuICAgICAgICByZWplY3QoZSk7XG4gICAgICB9O1xuXG4gICAgICByZXF1ZXN0Lm9udXBncmFkZW5lZWRlZCA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5kYiA9IHJlcXVlc3QucmVzdWx0O1xuXG4gICAgICAgIHRoaXMuc3RvcmVzLmZvckVhY2goKHN0b3JlKSA9PiB7XG4gICAgICAgICAgaWYgKHRoaXMuZGIub2JqZWN0U3RvcmVOYW1lcy5jb250YWlucyhzdG9yZSkpIHtcbiAgICAgICAgICAgIHRoaXMuZGIuZGVsZXRlT2JqZWN0U3RvcmUoc3RvcmUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLmRiLmNyZWF0ZU9iamVjdFN0b3JlKHN0b3JlLCB7IGtleVBhdGg6ICdpZCcsIGF1dG9JbmNyZW1lbnQ6IHRydWUgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiDrjbDsnbTthLAg7KGw7ZqMIOuplOyEnOuTnFxuICAgKiBAcGFyYW0ge3N0cmluZ30gc3RvcmVOYW1lXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpZFxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxvYmplY3Q+fVxuICAgKi9cbiAgYXN5bmMgZ2V0RGF0YShzdG9yZU5hbWUsIGlkKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLmRiLnRyYW5zYWN0aW9uKHN0b3JlTmFtZSwgJ3JlYWRvbmx5Jykub2JqZWN0U3RvcmUoc3RvcmVOYW1lKS5nZXQoaWQpO1xuXG4gICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9ICgpID0+IHtcbiAgICAgICAgcmVzb2x2ZShyZXF1ZXN0LnJlc3VsdCk7XG4gICAgICB9O1xuXG4gICAgICByZXF1ZXN0Lm9uZXJyb3IgPSAoZSkgPT4ge1xuICAgICAgICByZWplY3QoZSk7XG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIOuNsOydtO2EsCDsoITssrQg7KGw7ZqMIOuplOyEnOuTnFxuICAgKiBAcGFyYW0ge3N0cmluZ30gc3RvcmVOYW1lXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPG9iamVjdFtdPn1cbiAgICovXG4gIGFzeW5jIGdldEFsbERhdGEoc3RvcmVOYW1lKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLmRiLnRyYW5zYWN0aW9uKHN0b3JlTmFtZSwgJ3JlYWRvbmx5Jykub2JqZWN0U3RvcmUoc3RvcmVOYW1lKS5nZXRBbGwoKTtcblxuICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSAoKSA9PiB7XG4gICAgICAgIHJlc29sdmUocmVxdWVzdC5yZXN1bHQpO1xuICAgICAgfTtcblxuICAgICAgcmVxdWVzdC5vbmVycm9yID0gKGUpID0+IHtcbiAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiDrjbDsnbTthLAg7LaU6rCAIOuplOyEnOuTnFxuICAgKiBAcGFyYW0ge3N0cmluZ30gc3RvcmVOYW1lXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBkYXRhXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPG9iamVjdD59XG4gICAqL1xuICBhc3luYyB1cHNlcnREYXRhKHN0b3JlTmFtZSwgZGF0YSkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5kYi50cmFuc2FjdGlvbihzdG9yZU5hbWUsICdyZWFkd3JpdGUnKS5vYmplY3RTdG9yZShzdG9yZU5hbWUpLnB1dChkYXRhKTtcblxuICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSAoKSA9PiB7XG4gICAgICAgIHJlc29sdmUocmVxdWVzdC5yZXN1bHQpO1xuICAgICAgfTtcblxuICAgICAgcmVxdWVzdC5vbmVycm9yID0gKGUpID0+IHtcbiAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiDrjbDsnbTthLAg7IKt7KCcIOuplOyEnOuTnFxuICAgKiBAcGFyYW0ge3N0cmluZ30gc3RvcmVOYW1lXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpZFxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxvYmplY3Q+fVxuICAgKi9cbiAgYXN5bmMgZGVsZXRlRGF0YShzdG9yZU5hbWUsIGlkKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLmRiLnRyYW5zYWN0aW9uKHN0b3JlTmFtZSwgJ3JlYWR3cml0ZScpLm9iamVjdFN0b3JlKHN0b3JlTmFtZSkuZGVsZXRlKGlkKTtcblxuICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSAoKSA9PiB7XG4gICAgICAgIHJlc29sdmUocmVxdWVzdC5yZXN1bHQpO1xuICAgICAgfTtcblxuICAgICAgcmVxdWVzdC5vbmVycm9yID0gKGUpID0+IHtcbiAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfVxufVxuXG5jb25zdCBzYW5kYm94REIgPSBuZXcgSW5kZXhlZERCKCdzYW5kYm94REInLCAyLCBbJ25vdGVwYWQnXSk7XG5cbmV4cG9ydCBkZWZhdWx0IHNhbmRib3hEQjtcbiIsImNvbnN0IHJlbmRlclJhdyA9IChzdHJpbmcsIC4uLnZhbHVlcykgPT4ge1xyXG4gIHJldHVybiBTdHJpbmcucmF3KHN0cmluZywgLi4udmFsdWVzKTtcclxufTtcclxuXHJcbmV4cG9ydCB7IHJlbmRlclJhdyBhcyBodG1sLCByZW5kZXJSYXcgYXMgY3NzIH07XHJcbiIsImltcG9ydCB7IGh0bWwgfSBmcm9tICcuL3V0aWxzJztcbmltcG9ydCB0ZXRyaXMgZnJvbSAnLi4vLi4vcHVibGljL3RldHJpcy5wbmcnO1xuaW1wb3J0IGZsYXBweUJpcmQgZnJvbSAnLi4vLi4vcHVibGljL2ZsYXBweUJpcmQucG5nJztcbmltcG9ydCBub3RlcGFkIGZyb20gJy4uLy4uL3B1YmxpYy9ub3RlcGFkLnBuZyc7XG5pbXBvcnQgc2FuZGJveERCIGZyb20gJy4uL2NvcmUvSW5kZXhlZERCJztcblxuY29uc3Qgcm91dGVzID0gW1xuICB7XG4gICAgcGF0aDogJy8nLFxuICAgIGh0bWw6IGh0bWxgPG15LWhvbWU+PC9teS1ob21lPmAsXG4gICAgbGFiZWw6ICdIb21lJyxcbiAgICBpY29uU3JjOiBudWxsLFxuICB9LFxuICB7XG4gICAgcGF0aDogJy90ZXRyaXMnLFxuICAgIGh0bWw6IGh0bWxgPG15LXRldHJpcz48L215LXRldHJpcz5gLFxuICAgIGxhYmVsOiAnVGV0cmlzJyxcbiAgICBpY29uU3JjOiB0ZXRyaXMsXG4gIH0sXG4gIHtcbiAgICBwYXRoOiAnL2ZsYXBweWJpcmQnLFxuICAgIGh0bWw6IGh0bWxgPG15LWZsYXBweWJpcmQ+PC9teS1mbGFwcHliaXJkPmAsXG4gICAgbGFiZWw6ICdGbGFwcHkmbmJzcDtCaXJkJyxcbiAgICBpY29uU3JjOiBmbGFwcHlCaXJkLFxuICB9LFxuICB7XG4gICAgcGF0aDogJy9ub3RlcGFkJyxcbiAgICBodG1sOiBodG1sYDxteS1ub3RlcGFkPjwvbXktbm90ZXBhZD5gLFxuICAgIGxhYmVsOiAnTm90ZSZuYnNwO1BhZCcsXG4gICAgaWNvblNyYzogbm90ZXBhZCxcbiAgfSxcbl07XG5cbmNvbnN0IG1haW5JY29ucyA9IHJvdXRlcy5yZWR1Y2UoKHByZXYsIHJvdXRlcikgPT4ge1xuICBjb25zdCB7IHBhdGgsIGxhYmVsLCBpY29uU3JjIH0gPSByb3V0ZXI7XG4gIGlmIChyb3V0ZXIucGF0aCA9PT0gJy8nKSByZXR1cm4gcHJldjtcbiAgcmV0dXJuIFsuLi5wcmV2LCB7IHBhdGgsIGxhYmVsLCBpY29uU3JjIH1dO1xufSwgW10pO1xuXG5jb25zdCBnZXRMb2NhbEljb25zID0gYXN5bmMgKCkgPT4ge1xuICBjb25zdCBub3RlcGFkRGF0YSA9IGF3YWl0IHNhbmRib3hEQi5nZXRBbGxEYXRhKCdub3RlcGFkJyk7XG4gIGNvbnN0IG5vdGVwYWRJY29ucyA9IG5vdGVwYWREYXRhLnJlZHVjZSgocHJldiwgaWNvbikgPT4ge1xuICAgIGNvbnN0IHsgaWQsIHRpdGxlIH0gPSBpY29uO1xuICAgIHJldHVybiBbLi4ucHJldiwgeyBwYXRoOiBgL25vdGVwYWQvJHtpZH1gLCBsYWJlbDogdGl0bGUsIGljb25TcmM6IG5vdGVwYWQgfV07XG4gIH0sIFtdKTtcblxuICByZXR1cm4gWy4uLm5vdGVwYWRJY29uc107XG59O1xuXG5leHBvcnQgZGVmYXVsdCByb3V0ZXM7XG5leHBvcnQgeyBtYWluSWNvbnMsIGdldExvY2FsSWNvbnMgfTtcbiIsImltcG9ydCByb3V0ZXMgZnJvbSAnLi4vdXRpbHMvcm91dGVzJztcclxuXHJcbmNvbnN0IEJBU0VfVVJMID0gJy9qcy1zYW5kYm94JztcclxuXHJcbmNsYXNzIFJvdXRlciB7XHJcbiAgY29uc3RydWN0b3Iocm91dGUpIHtcclxuICAgIHRoaXMucm91dGVzID0gcm91dGU7XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICBjb25zdCByb3V0ZSA9IHRoaXMucm91dGVzLmZpbmQoKHZhbHVlKSA9PiB2YWx1ZS5wYXRoID09PSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUucmVwbGFjZShCQVNFX1VSTCwgJycpKTtcclxuXHJcbiAgICBpZiAoIXJvdXRlKSB7XHJcbiAgICAgIHRoaXMucmVwbGFjZVRvKCcvJyk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcGFnZScpLmlubmVySFRNTCA9IHJvdXRlLmh0bWw7XHJcbiAgfVxyXG5cclxuICBuYXZpZ2F0ZVRvKHVybCkge1xyXG4gICAgd2luZG93Lmhpc3RvcnkucHVzaFN0YXRlKG51bGwsIG51bGwsIHVybCk7XHJcbiAgICB0aGlzLnJlbmRlcigpO1xyXG4gIH1cclxuXHJcbiAgcmVwbGFjZVRvKHVybCkge1xyXG4gICAgd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKG51bGwsIG51bGwsIHVybCk7XHJcbiAgICB0aGlzLnJlbmRlcigpO1xyXG4gIH1cclxuXHJcbiAgYmFjaygpIHtcclxuICAgIHdpbmRvdy5oaXN0b3J5LmJhY2soKTtcclxuICAgIHRoaXMucmVuZGVyKCk7XHJcbiAgfVxyXG59XHJcblxyXG5jb25zdCByb3V0ZXIgPSBuZXcgUm91dGVyKHJvdXRlcyk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCByb3V0ZXI7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFdlYkNvbXBvbmVudCBleHRlbmRzIEhUTUxFbGVtZW50IHtcclxuICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcclxuICAgIHRoaXMucmVuZGVyKCk7XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICB0aGlzLmlubmVySFRNTCA9IHRoaXMuaW5qZWN0SFRNTCgpO1xyXG4gIH1cclxuXHJcbiAgaW5qZWN0SFRNTCgpIHtcclxuICAgIHJldHVybiBgYDtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHJvdXRlciBmcm9tICcuL2NvcmUvUm91dGVyJztcbmltcG9ydCB7IGh0bWwgfSBmcm9tICcuL3V0aWxzL3V0aWxzJztcbmltcG9ydCBXZWJDb21wb25lbnQgZnJvbSAnLi9jb3JlL1dlYkNvbXBvbmVudCc7XG5pbXBvcnQgeyBnZXRMb2NhbEljb25zLCBtYWluSWNvbnMgfSBmcm9tICcuL3V0aWxzL3JvdXRlcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwcCBleHRlbmRzIFdlYkNvbXBvbmVudCB7XG4gIGFzeW5jIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHRoaXMuaWNvbnMgPSBbLi4ubWFpbkljb25zLCAuLi4oYXdhaXQgZ2V0TG9jYWxJY29ucygpKV07XG4gICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncG9wc3RhdGUnLCAoKSA9PiByb3V0ZXIucmVuZGVyKCkpO1xuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcignaWNvbkNoYW5nZScsIChlKSA9PiB7XG4gICAgICB0aGlzLmljb25zID0gWy4uLnRoaXMuaWNvbnMsIGUuZGV0YWlsXTtcbiAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgfSk7XG4gIH1cblxuICBpbmplY3RIVE1MKCkge1xuICAgIHJldHVybiBodG1sYFxuICAgICAgPGRpdiBpZD1cInBhZ2VcIj48L2Rpdj5cbiAgICAgIDxteS1pY29ucyBpY29ucz0ke0pTT04uc3RyaW5naWZ5KHRoaXMuaWNvbnMpfSB0YWJpbmRleD1cIi0xXCI+PC9teS1pY29ucz5cbiAgICAgIDxteS1mb290ZXI+PC9teS1mb290ZXI+XG4gICAgYDtcbiAgfVxufVxuIiwiaW1wb3J0IFdlYkNvbXBvbmVudCBmcm9tICcuLi8uLi9jb3JlL1dlYkNvbXBvbmVudCc7XHJcbmltcG9ydCB7IGh0bWwgfSBmcm9tICcuLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IG1haW5JY29ucyB9IGZyb20gJy4uLy4uL3V0aWxzL3JvdXRlcyc7XHJcbmltcG9ydCByb3V0ZXIgZnJvbSAnLi4vLi4vY29yZS9Sb3V0ZXInO1xyXG5pbXBvcnQgd2luZG93TG9nbyBmcm9tICcuLi8uLi8uLi9wdWJsaWMvd2luZG93TG9nby5wbmcnO1xyXG5pbXBvcnQgc2VhcmNoSWNvbiBmcm9tICcuLi8uLi8uLi9wdWJsaWMvc2VhcmNoSWNvbi5wbmcnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9vdGVyIGV4dGVuZHMgV2ViQ29tcG9uZW50IHtcclxuICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcclxuICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XHJcbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5oYW5kbGVDbGljay5iaW5kKHRoaXMpKTtcclxuICB9XHJcblxyXG4gIGluamVjdEhUTUwoKSB7XHJcbiAgICByZXR1cm4gaHRtbGBcclxuICAgICAgPGltZyBhbHQ9XCJ3aW5kb3dfbG9nb1wiIHNyYz0ke3dpbmRvd0xvZ299IGNsYXNzPVwid2luZG93X2ljb25cIiAvPlxyXG4gICAgICA8ZGl2IGNsYXNzPVwiaW5wdXRfYm94XCI+XHJcbiAgICAgICAgPGltZyBhbHQ9XCJzZWFyY2hcIiBzcmM9JHtzZWFyY2hJY29ufSBjbGFzcz1cIndpbmRvd19pY29uXCIgLz48aW5wdXQgdHlwZT1cInRleHRcIiBwbGFjZWhvbGRlcj1cIuywvuq4sFwiIC8+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICAke21haW5JY29uc1xyXG4gICAgICAgIC5tYXAoKGljb24pID0+IHtcclxuICAgICAgICAgIHJldHVybiBodG1sYCA8bXktaWNvbiBkYXRhLXBhdGg9XCIke2ljb24ucGF0aH1cIiBkYXRhLWljb25TcmM9XCIke2ljb24uaWNvblNyY31cIj48L215LWljb24+IGA7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuam9pbignJyl9XHJcbiAgICBgO1xyXG4gIH1cclxuXHJcbiAgaGFuZGxlQ2xpY2soZSkge1xyXG4gICAgaWYgKCFlLnRhcmdldC5jbG9zZXN0KCdteS1pY29uJykpIHJldHVybjtcclxuXHJcbiAgICBjb25zdCBpY29uID0gZS50YXJnZXQuY2xvc2VzdCgnbXktaWNvbicpO1xyXG4gICAgcm91dGVyLm5hdmlnYXRlVG8oaWNvbi5kYXRhc2V0LnBhdGgpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgV2ViQ29tcG9uZW50IGZyb20gJy4uLy4uL2NvcmUvV2ViQ29tcG9uZW50JztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEhvbWUgZXh0ZW5kcyBXZWJDb21wb25lbnQge31cclxuIiwiaW1wb3J0IFdlYkNvbXBvbmVudCBmcm9tICcuLi8uLi9jb3JlL1dlYkNvbXBvbmVudCc7XHJcbmltcG9ydCB7IGh0bWwgfSBmcm9tICcuLi8uLi91dGlscy91dGlscyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUZXRyaXMgZXh0ZW5kcyBXZWJDb21wb25lbnQge1xyXG4gIGluamVjdEhUTUwoKSB7XHJcbiAgICByZXR1cm4gaHRtbGBcclxuICAgICAgPGgxPlRldHJpczwvaDE+XHJcbiAgICAgIDxwPllvdSBhcmUgdmlld2luZyB0aGUgVGV0cmlzIGNvbXBvbmVudCE8L3A+XHJcbiAgICBgO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgV2ViQ29tcG9uZW50IGZyb20gJy4uLy4uL2NvcmUvV2ViQ29tcG9uZW50JztcclxuaW1wb3J0IHsgaHRtbCB9IGZyb20gJy4uLy4uL3V0aWxzL3V0aWxzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZsYXBweUJpcmQgZXh0ZW5kcyBXZWJDb21wb25lbnQge1xyXG4gIGluamVjdEhUTUwoKSB7XHJcbiAgICByZXR1cm4gaHRtbGBcclxuICAgICAgPGgxPkZsYXBweSBCaXJkPC9oMT5cclxuICAgICAgPHA+WW91IGFyZSB2aWV3aW5nIHRoZSBGbGFwcHkgQmlyZCBjb21wb25lbnQhPC9wPlxyXG4gICAgICA8cD5Zb3UgYXJlIHZpZXdpbmcgdGhlIEZsYXBweSBCaXJkIGNvbXBvbmVudCE8L3A+XHJcbiAgICAgIDxwPllvdSBhcmUgdmlld2luZyB0aGUgRmxhcHB5IEJpcmQgY29tcG9uZW50ITwvcD5cclxuICAgICAgPHA+WW91IGFyZSB2aWV3aW5nIHRoZSBGbGFwcHkgQmlyZCBjb21wb25lbnQhPC9wPlxyXG4gICAgICA8cD5Zb3UgYXJlIHZpZXdpbmcgdGhlIEZsYXBweSBCaXJkIGNvbXBvbmVudCE8L3A+XHJcbiAgICAgIDxwPllvdSBhcmUgdmlld2luZyB0aGUgRmxhcHB5IEJpcmQgY29tcG9uZW50ITwvcD5cclxuICAgIGA7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IGh0bWwgfSBmcm9tICcuLi8uLi91dGlscy91dGlscyc7XG5pbXBvcnQgcm91dGVyIGZyb20gJy4uLy4uL2NvcmUvUm91dGVyJztcbmltcG9ydCBXZWJDb21wb25lbnQgZnJvbSAnLi4vLi4vY29yZS9XZWJDb21wb25lbnQnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJY29ucyBleHRlbmRzIFdlYkNvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5pY29ucyA9IEpTT04ucGFyc2UodGhpcy5nZXRBdHRyaWJ1dGUoJ2ljb25zJykpO1xuICB9XG5cbiAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5oYW5kbGVDbGljay5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ2RibGNsaWNrJywgdGhpcy5oYW5kbGVEb3VibGVDbGljay5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLmhhbmRsZUtleURvd24uYmluZCh0aGlzKSk7XG4gIH1cblxuICBpbmplY3RIVE1MKCkge1xuICAgIHJldHVybiBodG1sYFxuICAgICAgJHt0aGlzLmljb25zXG4gICAgICAgIC5tYXAoKGljb24pID0+IHtcbiAgICAgICAgICByZXR1cm4gaHRtbGBcbiAgICAgICAgICAgIDxteS1pY29uIGRhdGEtcGF0aD0ke2ljb24ucGF0aH0gZGF0YS1sYWJlbD0ke2ljb24ubGFiZWx9IGRhdGEtaWNvblNyYz0ke2ljb24uaWNvblNyY30+PC9teS1pY29uPlxuICAgICAgICAgIGA7XG4gICAgICAgIH0pXG4gICAgICAgIC5qb2luKCcnKX1cbiAgICBgO1xuICB9XG5cbiAgaGFuZGxlQ2xpY2soZSkge1xuICAgIGlmICghZS50YXJnZXQuY2xvc2VzdCgnbXktaWNvbicpKSByZXR1cm47XG5cbiAgICBjb25zdCBpY29uID0gZS50YXJnZXQuY2xvc2VzdCgnbXktaWNvbicpO1xuICAgIGljb24udG9nZ2xlQXR0cmlidXRlKCdjaGVja2VkJyk7XG4gICAgdGhpcy5xdWVyeVNlbGVjdG9yQWxsKCdteS1pY29uJykuZm9yRWFjaCgobm9kZSkgPT4ge1xuICAgICAgaWYgKG5vZGUgIT09IGljb24pIHtcbiAgICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUoJ2NoZWNrZWQnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGhhbmRsZURvdWJsZUNsaWNrKGUpIHtcbiAgICBpZiAoIWUudGFyZ2V0LmNsb3Nlc3QoJ215LWljb24nKSkgcmV0dXJuO1xuXG4gICAgY29uc3QgaWNvbiA9IGUudGFyZ2V0LmNsb3Nlc3QoJ215LWljb24nKTtcbiAgICByb3V0ZXIubmF2aWdhdGVUbyhpY29uLmRhdGFzZXQucGF0aCk7XG4gIH1cblxuICBoYW5kbGVLZXlEb3duKGUpIHtcbiAgICBjb25zdCBjaGVja2VkRWwgPSB0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoJ215LWljb25bY2hlY2tlZF0nKTtcblxuICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJykge1xuICAgICAgaWYgKGNoZWNrZWRFbC5sZW5ndGggPiAxKSByZXR1cm47XG4gICAgICBpZiAoIWNoZWNrZWRFbCkgcmV0dXJuO1xuICAgICAgcm91dGVyLm5hdmlnYXRlVG8oY2hlY2tlZEVsWzBdLmRhdGFzZXQucGF0aCk7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgeyBodG1sIH0gZnJvbSAnLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgV2ViQ29tcG9uZW50IGZyb20gJy4uLy4uL2NvcmUvV2ViQ29tcG9uZW50JztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEljb24gZXh0ZW5kcyBXZWJDb21wb25lbnQge1xyXG4gIGluamVjdEhUTUwoKSB7XHJcbiAgICBjb25zdCB7IGxhYmVsLCBpY29uc3JjIH0gPSB0aGlzLmRhdGFzZXQ7XHJcbiAgICByZXR1cm4gaHRtbGBcclxuICAgICAgPGltZyBhbHQ9XCIke2xhYmVsfV9pY29uXCIgc3JjPSR7aWNvbnNyY30gLz5cclxuICAgICAgJHtsYWJlbCA/IGA8c3BhbiBjbGFzcz1cImljb25fbmFtZVwiPiR7bGFiZWx9PC9zcGFuPmAgOiAnJ31cclxuICAgIGA7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBXZWJDb21wb25lbnQgZnJvbSAnLi4vLi4vY29yZS9XZWJDb21wb25lbnQnO1xuaW1wb3J0IHsgaHRtbCB9IGZyb20gJy4uLy4uL3V0aWxzL3V0aWxzJztcbmltcG9ydCAnLi9zdHlsZXMuc2Nzcyc7XG5pbXBvcnQgc2FuZGJveERCIGZyb20gJy4uLy4uL2NvcmUvSW5kZXhlZERCJztcbmltcG9ydCBOb3RlUGFkSWNvbiBmcm9tICcuLi8uLi8uLi9wdWJsaWMvbm90ZXBhZC5wbmcnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBOb3RlUGFkIGV4dGVuZHMgV2ViQ29tcG9uZW50IHtcbiAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ3NhdmUnLCB0aGlzLmhhbmRsZVNhdmUpO1xuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcignbG9jYWxTYXZlJywgdGhpcy5oYW5kbGVMb2NhbFNhdmUpO1xuICB9XG5cbiAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCdzYXZlJywgdGhpcy5oYW5kbGVTYXZlKTtcbiAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2xvY2FsU2F2ZScsIHRoaXMuaGFuZGxlTG9jYWxTYXZlKTtcbiAgfVxuXG4gIGluamVjdEhUTUwoKSB7XG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8bXktbm90ZXBhZC1oZWFkZXI+PC9teS1ub3RlcGFkLWhlYWRlcj5cbiAgICAgIDx0ZXh0YXJlYT48L3RleHRhcmVhPlxuICAgIGA7XG4gIH1cblxuICBoYW5kbGVMb2NhbFNhdmUoKSB7XG4gICAgY29uc3Qgbm90ZVBhZERhdGEgPSB0aGlzLmdldE5vdGVQYWREYXRhKCk7XG4gICAgaWYgKG5vdGVQYWREYXRhID09PSAnZmFpbCcpIHJldHVybjtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW25vdGVQYWREYXRhLmNvbnRlbnRdLCB7IHR5cGU6ICd0ZXh0L3BsYWluJyB9KTtcbiAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgICBsaW5rLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuICAgICAgbGluay5kb3dubG9hZCA9IGAke25vdGVQYWREYXRhLnRpdGxlfS50eHRgO1xuICAgICAgbGluay5jbGljaygpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgYWxlcnQoJ+yggOyepeyXkCDsi6TtjKjtlojsirXri4jri6QuJyk7XG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRoaXMucXVlcnlTZWxlY3RvcigndGV4dGFyZWEnKS52YWx1ZSA9ICcnO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGhhbmRsZVNhdmUoZSkge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgY29uc3Qgbm90ZVBhZERhdGEgPSB0aGlzLmdldE5vdGVQYWREYXRhKCk7XG4gICAgaWYgKG5vdGVQYWREYXRhID09PSAnZmFpbCcpIHJldHVybjtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzYW5kYm94REIudXBzZXJ0RGF0YSgnbm90ZXBhZCcsIHtcbiAgICAgICAgdGl0bGU6IG5vdGVQYWREYXRhLnRpdGxlLFxuICAgICAgICBjb250ZW50OiBub3RlUGFkRGF0YS5jb250ZW50LFxuICAgICAgfSk7XG4gICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgIGFsZXJ0KCfsoIDsnqXrkJjsl4jsirXri4jri6QuJyk7XG4gICAgICB9XG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoXG4gICAgICAgIG5ldyBDdXN0b21FdmVudCgnaWNvbkNoYW5nZScsIHtcbiAgICAgICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgICAgIGRldGFpbDoge1xuICAgICAgICAgICAgcGF0aDogYC9ub3RlcGFkLyR7cmVzdWx0fWAsXG4gICAgICAgICAgICBsYWJlbDogbm90ZVBhZERhdGEudGl0bGUsXG4gICAgICAgICAgICBpY29uU3JjOiBOb3RlUGFkSWNvbixcbiAgICAgICAgICB9LFxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGFsZXJ0KCfsoIDsnqXsl5Ag7Iuk7Yyo7ZaI7Iq164uI64ukLicpO1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICB0aGlzLnF1ZXJ5U2VsZWN0b3IoJ3RleHRhcmVhJykudmFsdWUgPSAnJztcbiAgICB9XG4gIH1cblxuICBnZXROb3RlUGFkRGF0YSgpIHtcbiAgICBjb25zdCBjb250ZW50ID0gdGhpcy5xdWVyeVNlbGVjdG9yKCd0ZXh0YXJlYScpLnZhbHVlO1xuICAgIGlmICghY29udGVudCkge1xuICAgICAgYWxlcnQoJ+uCtOyaqeydtCDsl4bsirXri4jri6QuJyk7XG4gICAgICByZXR1cm4gJ2ZhaWwnO1xuICAgIH1cbiAgICBsZXQgdGl0bGUgPSBwcm9tcHQoJ+yggOyepe2VoCDtjIzsnbzrqoXsnYQg7J6F66Cl7ZWY7IS47JqUJywgJ+ygnOuqqeyXhuydjCcpO1xuICAgIHdoaWxlICh0aXRsZSA9PT0gbnVsbCB8fCB0aXRsZSA9PT0gdW5kZWZpbmVkIHx8IHRpdGxlID09PSAnJykge1xuICAgICAgaWYgKHRpdGxlID09PSBudWxsKSByZXR1cm4gJ2ZhaWwnO1xuICAgICAgdGl0bGUgPSBwcm9tcHQoJ+2MjOydvOuqheydgCDtlYTsiJjsnoXri4jri6QuJywgJ+ygnOuqqeyXhuydjCcpO1xuICAgIH1cblxuICAgIHJldHVybiB7IHRpdGxlLCBjb250ZW50IH07XG4gIH1cbn1cbiIsImNvbnN0IGJ1dHRvbnMgPSBbXHJcbiAge1xyXG4gICAgaWQ6ICdmaWxlJyxcclxuICAgIHRpdGxlOiAn7YyM7J28JyxcclxuICAgIGtleTogJ0YnLFxyXG4gICAgc2xvdHM6IFtcclxuICAgICAgeyBpZDogMSwgdGV4dDogJ+yDiOuhnCZuYnNwO+unjOuTpOq4sChOKScsIGtleTogWydDdHJsJywgJ04nXSwgZGlzYWJsZTogdHJ1ZSB9LFxyXG4gICAgICB7IGlkOiAyLCB0ZXh0OiAn64K0IOy7tO2TqO2EsOyXkCDsoIDsnqUoVyknLCBrZXk6IFsnQ3RybCcsICdTaGlmdCcsICdOJ10sIG9uQ2xpY2s6IGhhbmRsZUxvY2FsU2F2ZUNsaWNrIH0sXHJcbiAgICAgIHsgaWQ6IDMsIHRleHQ6ICfsoIDsnqUoUyknLCBrZXk6IFsnQ3RybCcsICdTJ10sIG9uQ2xpY2s6IGhhbmRsZVNhdmVDbGljayB9LFxyXG4gICAgICB7IGlkOiA0LCB0ZXh0OiAn7IKt7KCcKEQpJywga2V5OiBbJ0N0cmwnLCAnU2hpZnQnLCAnUyddLCBkaXNhYmxlOiB0cnVlIH0sXHJcbiAgICAgIHsgaWQ6IDUsIHRleHQ6ICftjpjsnbTsp4AmbmJzcDvshKTsoJUoVSkuLi4nLCBrZXk6IFtdLCBkaXNhYmxlOiB0cnVlIH0sXHJcbiAgICAgIHsgaWQ6IDYsIHRleHQ6ICfsnbjsh4QoUCkuLi4nLCBrZXk6IFsnQ3RybCcsICdQJ10sIGRpc2FibGU6IHRydWUgfSxcclxuICAgICAgeyBpZDogNywgdGV4dDogJ+uBneuCtOq4sChYKScsIGtleTogW10sIGRpc2FibGU6IHRydWUgfSxcclxuICAgIF0sXHJcbiAgfSxcclxuICB7XHJcbiAgICBpZDogJ2VkaXQnLFxyXG4gICAgdGl0bGU6ICftjrjsp5EnLFxyXG4gICAga2V5OiAnRScsXHJcbiAgICBzbG90czogW1xyXG4gICAgICB7IGlkOiA4LCB0ZXh0OiAn7Iuk7ZaJJm5ic3A77Leo7IaMKFUpJywga2V5OiBbJ0N0cmwnLCAnWiddLCBkaXNhYmxlOiB0cnVlIH0sXHJcbiAgICAgIHsgaWQ6IDksIHRleHQ6ICfsnpjrnbzrgrTquLAoVCknLCBrZXk6IFsnQ3RybCcsICdYJ10sIGRpc2FibGU6IHRydWUgfSxcclxuICAgICAgeyBpZDogMTAsIHRleHQ6ICfrs7XsgqwoQyknLCBrZXk6IFsnQ3RybCcsICdDJ10sIGRpc2FibGU6IHRydWUgfSxcclxuICAgICAgeyBpZDogMTEsIHRleHQ6ICfrtpnsl6zrhKPquLAoUCknLCBrZXk6IFsnQ3RybCcsICdWJ10sIGRpc2FibGU6IHRydWUgfSxcclxuICAgICAgeyBpZDogMTIsIHRleHQ6ICfsgq3soJwoRCknLCBrZXk6IFsnRGVsJ10sIGRpc2FibGU6IHRydWUgfSxcclxuICAgICAgeyBpZDogMTMsIHRleHQ6ICdCaW5n7Jy866GcJm5ic3A76rKA7IOJKFMpLi4uJywga2V5OiBbJ0N0cmwnLCAnRSddLCBkaXNhYmxlOiB0cnVlIH0sXHJcbiAgICAgIHsgaWQ6IDE0LCB0ZXh0OiAn7LC+6riwKEYpLi4uJywga2V5OiBbJ0N0cmwnLCAnRiddLCBkaXNhYmxlOiB0cnVlIH0sXHJcbiAgICAgIHsgaWQ6IDE1LCB0ZXh0OiAn64uk7J2MJm5ic3A77LC+6riwKE4pJywga2V5OiBbJ0YzJ10sIGRpc2FibGU6IHRydWUgfSxcclxuICAgICAgeyBpZDogMTYsIHRleHQ6ICfsnbTsoIQmbmJzcDvssL7quLAoViknLCBrZXk6IFsnU2hpZnQnLCAnRjMnXSwgZGlzYWJsZTogdHJ1ZSB9LFxyXG4gICAgICB7IGlkOiAxNywgdGV4dDogJ+uwlOq+uOq4sChSKS4uLicsIGtleTogWydDdHJsJywgJ0gnXSwgZGlzYWJsZTogdHJ1ZSB9LFxyXG4gICAgICB7IGlkOiAxOCwgdGV4dDogJ+ydtOuPmShHKS4uLicsIGtleTogWydDdHJsJywgJ0cnXSwgZGlzYWJsZTogdHJ1ZSB9LFxyXG4gICAgICB7IGlkOiAxOSwgdGV4dDogJ+uqqOuRkCZuYnNwO+yEoO2DnShBKScsIGtleTogWydDdHJsJywgJ0EnXSwgZGlzYWJsZTogdHJ1ZSB9LFxyXG4gICAgICB7IGlkOiAyMCwgdGV4dDogJ+yLnOqwhC/rgqDsp5woRCknLCBrZXk6IFsnRjUnXSwgZGlzYWJsZTogdHJ1ZSB9LFxyXG4gICAgXSxcclxuICB9LFxyXG4gIHtcclxuICAgIGlkOiAnZm9ybWF0JyxcclxuICAgIHRpdGxlOiAn7ISc7IudJyxcclxuICAgIGtleTogJ08nLFxyXG4gICAgc2xvdHM6IFtcclxuICAgICAgeyBpZDogMjEsIHRleHQ6ICfsnpDrj5kmbmJzcDvspIQmbmJzcDvrsJTqv4goVyknLCBrZXk6IFtdLCBkaXNhYmxlOiB0cnVlIH0sXHJcbiAgICAgIHsgaWQ6IDIyLCB0ZXh0OiAn6riA6ry0KEYpLi4uJywga2V5OiBbXSwgZGlzYWJsZTogdHJ1ZSB9LFxyXG4gICAgXSxcclxuICB9LFxyXG4gIHtcclxuICAgIGlkOiAndmlldycsXHJcbiAgICB0aXRsZTogJ+uztOq4sCcsXHJcbiAgICBrZXk6ICdWJyxcclxuICAgIHNsb3RzOiBbXHJcbiAgICAgIHsgaWQ6IDIzLCB0ZXh0OiAn7ZmV64yA7ZWY6riwKFopJywga2V5OiBbJ0N0cmwnLCAnKyddLCBkaXNhYmxlOiB0cnVlIH0sXHJcbiAgICAgIHsgaWQ6IDI0LCB0ZXh0OiAn7LaV7IaM7ZWY6riwKFgpJywga2V5OiBbJ0N0cmwnLCAnLSddLCBkaXNhYmxlOiB0cnVlIH0sXHJcbiAgICAgIHsgaWQ6IDI1LCB0ZXh0OiAn7IOB7YOcJm5ic3A77ZGc7Iuc7KSEKFMpJywga2V5OiBbXSwgZGlzYWJsZTogdHJ1ZSB9LFxyXG4gICAgXSxcclxuICB9LFxyXG4gIHtcclxuICAgIGlkOiAnaGVscCcsXHJcbiAgICB0aXRsZTogJ+uPhOybgOunkCcsXHJcbiAgICBrZXk6ICdIJyxcclxuICAgIHNsb3RzOiBbXHJcbiAgICAgIHsgaWQ6IDI2LCB0ZXh0OiAn64+E7JuA66eQJm5ic3A767O06riwKEgpJywga2V5OiBbXSwgZGlzYWJsZTogdHJ1ZSB9LFxyXG4gICAgICB7IGlkOiAyNywgdGV4dDogJ+2UvOuTnOuwsSZuYnNwO+uztOuCtOq4sChGKScsIGtleTogW10sIGRpc2FibGU6IHRydWUgfSxcclxuICAgICAgeyBpZDogMjgsIHRleHQ6ICfrqZTrqqjsnqUmbmJzcDvsoJXrs7QoQSknLCBrZXk6IFtdLCBkaXNhYmxlOiB0cnVlIH0sXHJcbiAgICBdLFxyXG4gIH0sXHJcbl07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBidXR0b25zO1xyXG5cclxuZnVuY3Rpb24gaGFuZGxlU2F2ZUNsaWNrKCkge1xyXG4gIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ3NhdmUnLCB7IGJ1YmJsZXM6IHRydWUgfSkpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVMb2NhbFNhdmVDbGljaygpIHtcclxuICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdsb2NhbFNhdmUnLCB7IGJ1YmJsZXM6IHRydWUgfSkpO1xyXG59XHJcbiIsImltcG9ydCB7IGh0bWwgfSBmcm9tICcuLi8uLi8uLi91dGlscy91dGlscyc7XG5pbXBvcnQgV2ViQ29tcG9uZW50IGZyb20gJy4uLy4uLy4uL2NvcmUvV2ViQ29tcG9uZW50JztcbmltcG9ydCBidXR0b25zIGZyb20gJy4uL2NvbnN0L2J1dHRvbnMnO1xuaW1wb3J0IE5vdGVQYWRJY29uIGZyb20gJy4uLy4uLy4uLy4uL3B1YmxpYy9ub3RlcGFkLnBuZyc7XG5pbXBvcnQgcm91dGVyIGZyb20gJy4uLy4uLy4uL2NvcmUvUm91dGVyJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTm90ZVBhZEhlYWRlciBleHRlbmRzIFdlYkNvbXBvbmVudCB7XG4gIHNsb3RzID0gYnV0dG9ucy5yZWR1Y2UoKGFjYywgY3VyKSA9PiB7XG4gICAgcmV0dXJuIFsuLi5hY2MsIC4uLmN1ci5zbG90c107XG4gIH0sIFtdKTtcblxuICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmhhbmRsZUNsaWNrKTtcbiAgICB0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zdWInKS5mb3JFYWNoKChzdWIpID0+IHtcbiAgICAgIGNvbnN0IGV2ZW50SGFuZGxlciA9IHRoaXMuc2xvdHMuZmluZCgoc2xvdCkgPT4gc2xvdC5pZCA9PT0gTnVtYmVyKHN1Yi5kYXRhc2V0LmlkKSkub25DbGljaztcbiAgICAgIGlmICghZXZlbnRIYW5kbGVyKSByZXR1cm47XG4gICAgICBzdWIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudEhhbmRsZXIpO1xuICAgIH0pO1xuICB9XG5cbiAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGFuZGxlQ2xpY2spO1xuICAgIHRoaXMucXVlcnlTZWxlY3RvckFsbCgnLnN1YicpLmZvckVhY2goKHN1YikgPT4ge1xuICAgICAgY29uc3QgZXZlbnRIYW5kbGVyID0gdGhpcy5zbG90cy5maW5kKChzbG90KSA9PiBzbG90LmlkID09PSBOdW1iZXIoc3ViLmRhdGFzZXQuaWQpKS5vbkNsaWNrO1xuICAgICAgaWYgKCFldmVudEhhbmRsZXIpIHJldHVybjtcbiAgICAgIHN1Yi5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50SGFuZGxlcik7XG4gICAgfSk7XG4gIH1cblxuICBpbmplY3RIVE1MKCkge1xuICAgIHJldHVybiBodG1sYFxuICAgICAgPGhlYWRlcj5cbiAgICAgICAgPHNwYW4+PGltZyBhbHQ9XCJub3RlcGFkX2ljb25cIiBzcmM9JHtOb3RlUGFkSWNvbn0gLz7soJzrqqnsl4bsnYwgLSBXaW5kb3dzIOuplOuqqOyepTwvc3Bhbj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInZpZXdfYnV0dG9uc1wiPlxuICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJ2aWV3X2J1dHRvblwiIGlkPVwibWluaVwiPvCfl5U8L2J1dHRvbj5cbiAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwidmlld19idXR0b25cIiBpZD1cImZ1bGxcIj7wn5eWPC9idXR0b24+XG4gICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInZpZXdfYnV0dG9uXCIgaWQ9XCJjbG9zZVwiPuKFqTwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvaGVhZGVyPlxuICAgICAgPGRpdiBjbGFzcz1cImVkaXRfYnV0dG9uc1wiPlxuICAgICAgICAke2J1dHRvbnNcbiAgICAgICAgICAubWFwKFxuICAgICAgICAgICAgKGJ1dHRvbikgPT4gaHRtbGBcbiAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImVkaXRfYnV0dG9uXCI+XG4gICAgICAgICAgICAgICAgJHtidXR0b24udGl0bGV9KDx1PiR7YnV0dG9uLmtleX08L3U+KVxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwb3B1cFwiPlxuICAgICAgICAgICAgICAgICAgJHtidXR0b24uc2xvdHNcbiAgICAgICAgICAgICAgICAgICAgLm1hcChcbiAgICAgICAgICAgICAgICAgICAgICAoc2xvdCkgPT4gaHRtbGBcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzdWJcIiBkYXRhLWlkPVwiJHtzbG90LmlkfVwiIGRhdGEtZGlzYWJsZT1cIiR7ISFzbG90LmRpc2FibGV9XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+JHtzbG90LnRleHR9PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICR7c2xvdC5rZXkubGVuZ3RoID4gMCA/IGA8ZGl2PiR7c2xvdC5rZXkuam9pbignICsgJyl9PC9kaXY+YCA6ICcnfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIC5qb2luKCcnKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICBgXG4gICAgICAgICAgKVxuICAgICAgICAgIC5qb2luKCcnKX1cbiAgICAgIDwvZGl2PlxuICAgIGA7XG4gIH1cblxuICBoYW5kbGVDbGljayhlKSB7XG4gICAgc3dpdGNoIChlLnRhcmdldC5jbGFzc05hbWUpIHtcbiAgICAgIGNhc2UgJ3ZpZXdfYnV0dG9uJzpcbiAgICAgICAgY2xpY2tWaWV3QnV0dG9uLmNhbGwodGhpcywgZS50YXJnZXQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2VkaXRfYnV0dG9uJzpcbiAgICAgICAgc2hvd1BvcHVwLmNhbGwodGhpcywgZS50YXJnZXQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsaWNrVmlld0J1dHRvbih2VGFyZ2V0KSB7XG4gICAgICBzd2l0Y2ggKHZUYXJnZXQuaWQpIHtcbiAgICAgICAgY2FzZSAnZnVsbCc6XG4gICAgICAgICAgdGhpcy5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoJ2Z1bGxzY3JlZW4nKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnbWluaSc6XG4gICAgICAgIGNhc2UgJ2Nsb3NlJzpcbiAgICAgICAgICByb3V0ZXIuYmFjaygpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNob3dQb3B1cChlVGFyZ2V0KSB7XG4gICAgICBlVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cCcpLmNsYXNzTGlzdC50b2dnbGUoJ3Nob3cnKTtcbiAgICAgIHRoaXMucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwJykuZm9yRWFjaCgobm9kZSkgPT4ge1xuICAgICAgICBpZiAobm9kZSAhPT0gZVRhcmdldC5xdWVyeVNlbGVjdG9yKCcucG9wdXAnKSkge1xuICAgICAgICAgIG5vZGUuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCAnLi9zdHlsZS5zY3NzJztcbmltcG9ydCBzYW5kYm94REIgZnJvbSAnLi9jb3JlL0luZGV4ZWREQic7XG5pbXBvcnQgQXBwIGZyb20gJy4vQXBwJztcbmltcG9ydCBGb290ZXIgZnJvbSAnLi92aWV3L0NvbW1vbi9Gb290ZXInO1xuaW1wb3J0IEhvbWUgZnJvbSAnLi92aWV3L0hvbWUnO1xuaW1wb3J0IFRldHJpcyBmcm9tICcuL3ZpZXcvVGV0cmlzJztcbmltcG9ydCBGbGFwcHlCaXJkIGZyb20gJy4vdmlldy9GbGFwcHlCaXJkJztcbmltcG9ydCBJY29ucyBmcm9tICcuL3ZpZXcvQ29tbW9uL0ljb25zJztcbmltcG9ydCBJY29uIGZyb20gJy4vdmlldy9Db21tb24vSWNvbic7XG5pbXBvcnQgTm90ZVBhZCBmcm9tICcuL3ZpZXcvTm90ZVBhZCc7XG5pbXBvcnQgTm90ZVBhZEhlYWRlciBmcm9tICcuL3ZpZXcvTm90ZVBhZC9jb21wb25lbnRzL05vdGVQYWRIZWFkZXInO1xuXG4oYXN5bmMgKCkgPT4ge1xuICBhd2FpdCBzYW5kYm94REIub3BlbkRCKCk7XG5cbiAgY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdteS1hcHAnLCBBcHApO1xuICBjdXN0b21FbGVtZW50cy5kZWZpbmUoJ215LWZvb3RlcicsIEZvb3Rlcik7XG4gIGN1c3RvbUVsZW1lbnRzLmRlZmluZSgnbXktaG9tZScsIEhvbWUpO1xuICBjdXN0b21FbGVtZW50cy5kZWZpbmUoJ215LXRldHJpcycsIFRldHJpcyk7XG4gIGN1c3RvbUVsZW1lbnRzLmRlZmluZSgnbXktZmxhcHB5YmlyZCcsIEZsYXBweUJpcmQpO1xuICBjdXN0b21FbGVtZW50cy5kZWZpbmUoJ215LWljb25zJywgSWNvbnMpO1xuICBjdXN0b21FbGVtZW50cy5kZWZpbmUoJ215LWljb24nLCBJY29uKTtcbiAgY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdteS1ub3RlcGFkJywgTm90ZVBhZCk7XG4gIGN1c3RvbUVsZW1lbnRzLmRlZmluZSgnbXktbm90ZXBhZC1oZWFkZXInLCBOb3RlUGFkSGVhZGVyKTtcbn0pKCk7XG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImRiIiwiY29uc3RydWN0b3IiLCJkYk5hbWUiLCJkYlZlcnNpb24iLCJzdG9yZXMiLCJ0aGlzIiwiYXN5bmMiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInJlcXVlc3QiLCJ3aW5kb3ciLCJpbmRleGVkREIiLCJvcGVuIiwib25zdWNjZXNzIiwicmVzdWx0Iiwib25lcnJvciIsImUiLCJvbnVwZ3JhZGVuZWVkZWQiLCJmb3JFYWNoIiwic3RvcmUiLCJvYmplY3RTdG9yZU5hbWVzIiwiY29udGFpbnMiLCJkZWxldGVPYmplY3RTdG9yZSIsImNyZWF0ZU9iamVjdFN0b3JlIiwia2V5UGF0aCIsImF1dG9JbmNyZW1lbnQiLCJzdG9yZU5hbWUiLCJpZCIsInRyYW5zYWN0aW9uIiwib2JqZWN0U3RvcmUiLCJnZXQiLCJnZXRBbGwiLCJkYXRhIiwicHV0IiwiZGVsZXRlIiwicmVuZGVyUmF3Iiwic3RyaW5nIiwidmFsdWVzIiwiU3RyaW5nIiwicmF3Iiwicm91dGVzIiwicGF0aCIsImh0bWwiLCJsYWJlbCIsImljb25TcmMiLCJtYWluSWNvbnMiLCJyZWR1Y2UiLCJwcmV2Iiwicm91dGVyIiwiZ2V0TG9jYWxJY29ucyIsImljb24iLCJ0aXRsZSIsInJvdXRlIiwicmVuZGVyIiwiZmluZCIsInZhbHVlIiwibG9jYXRpb24iLCJwYXRobmFtZSIsInJlcGxhY2UiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJpbm5lckhUTUwiLCJyZXBsYWNlVG8iLCJuYXZpZ2F0ZVRvIiwidXJsIiwiaGlzdG9yeSIsInB1c2hTdGF0ZSIsInJlcGxhY2VTdGF0ZSIsImJhY2siLCJXZWJDb21wb25lbnQiLCJIVE1MRWxlbWVudCIsImNvbm5lY3RlZENhbGxiYWNrIiwiaW5qZWN0SFRNTCIsIkFwcCIsImljb25zIiwic3VwZXIiLCJhZGRFdmVudExpc3RlbmVyIiwiZGV0YWlsIiwiSlNPTiIsInN0cmluZ2lmeSIsIkZvb3RlciIsImhhbmRsZUNsaWNrIiwiYmluZCIsImpvaW4iLCJ0YXJnZXQiLCJjbG9zZXN0IiwiZGF0YXNldCIsIkhvbWUiLCJUZXRyaXMiLCJGbGFwcHlCaXJkIiwiSWNvbnMiLCJwYXJzZSIsImdldEF0dHJpYnV0ZSIsImhhbmRsZURvdWJsZUNsaWNrIiwiaGFuZGxlS2V5RG93biIsIm1hcCIsInRvZ2dsZUF0dHJpYnV0ZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJub2RlIiwicmVtb3ZlQXR0cmlidXRlIiwiY2hlY2tlZEVsIiwia2V5IiwibGVuZ3RoIiwiSWNvbiIsImljb25zcmMiLCJOb3RlUGFkIiwiaGFuZGxlU2F2ZSIsImhhbmRsZUxvY2FsU2F2ZSIsImRpc2Nvbm5lY3RlZENhbGxiYWNrIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIm5vdGVQYWREYXRhIiwiZ2V0Tm90ZVBhZERhdGEiLCJibG9iIiwiQmxvYiIsImNvbnRlbnQiLCJ0eXBlIiwibGluayIsImNyZWF0ZUVsZW1lbnQiLCJocmVmIiwiVVJMIiwiY3JlYXRlT2JqZWN0VVJMIiwiZG93bmxvYWQiLCJjbGljayIsImVyciIsImFsZXJ0IiwiY29uc29sZSIsImVycm9yIiwic3RvcFByb3BhZ2F0aW9uIiwiZGlzcGF0Y2hFdmVudCIsIkN1c3RvbUV2ZW50IiwiYnViYmxlcyIsInByb21wdCIsInNsb3RzIiwidGV4dCIsImRpc2FibGUiLCJvbkNsaWNrIiwiTm90ZVBhZEhlYWRlciIsImFjYyIsImN1ciIsInN1YiIsImV2ZW50SGFuZGxlciIsInNsb3QiLCJOdW1iZXIiLCJidXR0b24iLCJjbGFzc05hbWUiLCJ2VGFyZ2V0IiwicGFyZW50RWxlbWVudCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImNhbGwiLCJlVGFyZ2V0IiwicmVtb3ZlIiwiY3VzdG9tRWxlbWVudHMiLCJkZWZpbmUiXSwic291cmNlUm9vdCI6IiJ9