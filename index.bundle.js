(()=>{"use strict";var e="/js-sandbox/";const t=new class{db;constructor(e,t,i){this.dbName=e,this.dbVersion=t,this.stores=i}async openDB(){return new Promise(((e,t)=>{const i=window.indexedDB.open(this.dbName,this.dbVersion);i.onsuccess=()=>{this.db=i.result,e()},i.onerror=e=>{t(e)},i.onupgradeneeded=()=>{this.db=i.result,this.stores.forEach((e=>{this.db.objectStoreNames.contains(e)&&this.db.deleteObjectStore(e),this.db.createObjectStore(e,{keyPath:"id",autoIncrement:!0})}))}}))}async getData(e,t){return new Promise(((i,n)=>{const s=this.db.transaction(e,"readonly").objectStore(e).get(t);s.onsuccess=()=>{i(s.result)},s.onerror=e=>{n(e)}}))}async getAllData(e){return new Promise(((t,i)=>{const n=this.db.transaction(e,"readonly").objectStore(e).getAll();n.onsuccess=()=>{t(n.result)},n.onerror=e=>{i(e)}}))}async upsertData(e,t){return new Promise(((i,n)=>{const s=this.db.transaction(e,"readwrite").objectStore(e).put(t);s.onsuccess=()=>{i(s.result)},s.onerror=e=>{n(e)}}))}async deleteData(e,t){return new Promise(((i,n)=>{const s=this.db.transaction(e,"readwrite").objectStore(e).delete(t);s.onsuccess=()=>{i(s.result)},s.onerror=e=>{n(e)}}))}}("sandboxDB",2,["notepad"]),i=(e,...t)=>String.raw(e,...t),n=e+"2a583f97b153f7da7d41.png",s=[{path:"/",html:i`<my-home></my-home>`,label:"Home",iconSrc:null},{path:"/tetris",html:i`<my-tetris></my-tetris>`,label:"Tetris",iconSrc:e+"71c0bea6462001116fcf.png"},{path:"/flappybird",html:i`<my-flappybird></my-flappybird>`,label:"Flappy&nbsp;Bird",iconSrc:e+"39b884119b49599495ed.png"},{path:"/notepad",html:i`<my-notepad></my-notepad>`,label:"Note&nbsp;Pad",iconSrc:n}],a=s.reduce(((e,t)=>{const{path:i,label:n,iconSrc:s}=t;return"/"===t.path?e:[...e,{path:i,label:n,iconSrc:s}]}),[]),l=async()=>[...(await t.getAllData("notepad")).reduce(((e,t)=>{const{id:i,title:s}=t;return[...e,{path:`/notepad/${i}`,label:s,iconSrc:n}]}),[])],o=s,c=new class{constructor(e){this.routes=e}render(){const e=this.routes.find((e=>e.path===window.location.pathname.replace("/js-sandbox","")));e?document.querySelector("#page").innerHTML=e.html:this.replaceTo("/")}navigateTo(e){window.history.pushState(null,null,e),this.render()}replaceTo(e){window.history.replaceState(null,null,e),this.render()}back(){window.history.back(),this.render()}}(o);class r extends HTMLElement{connectedCallback(){this.render()}render(){this.innerHTML=this.injectHTML()}injectHTML(){return""}}class d extends r{async connectedCallback(){this.icons=[...a,...await l()],super.connectedCallback(),window.addEventListener("popstate",(()=>c.render())),this.addEventListener("iconChange",(e=>{this.icons=[...this.icons,e.detail],this.render()}))}injectHTML(){return i`
      <div id="page"></div>
      <my-icons icons=${JSON.stringify(this.icons)} tabindex="-1"></my-icons>
      <my-footer></my-footer>
    `}}const h=e+"59cb65e4f8f2627d6c2c.png",p=e+"bc8d31a2338dd0b3f68a.png";class u extends r{connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.handleClick.bind(this))}injectHTML(){return i`
      <img alt="window_logo" src=${h} class="window_icon" />
      <div class="input_box">
        <img alt="search" src=${p} class="window_icon" /><input type="text" placeholder="Ï∞æÍ∏∞" />
      </div>
      ${a.map((e=>i` <my-icon data-path="${e.path}" data-iconSrc="${e.iconSrc}"></my-icon> `)).join("")}
    `}handleClick(e){if(!e.target.closest("my-icon"))return;const t=e.target.closest("my-icon");c.navigateTo(t.dataset.path)}}class b extends r{}class y extends r{injectHTML(){return i`
      <h1>Tetris</h1>
      <p>You are viewing the Tetris component!</p>
    `}}class m extends r{injectHTML(){return i`
      <h1>Flappy Bird</h1>
      <p>You are viewing the Flappy Bird component!</p>
      <p>You are viewing the Flappy Bird component!</p>
      <p>You are viewing the Flappy Bird component!</p>
      <p>You are viewing the Flappy Bird component!</p>
      <p>You are viewing the Flappy Bird component!</p>
      <p>You are viewing the Flappy Bird component!</p>
    `}}class k extends r{constructor(){super(),this.icons=JSON.parse(this.getAttribute("icons"))}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.handleClick.bind(this)),this.addEventListener("dblclick",this.handleDoubleClick.bind(this)),this.addEventListener("keydown",this.handleKeyDown.bind(this))}injectHTML(){return i`
      ${this.icons.map((e=>i`
            <my-icon data-path=${e.path} data-label=${e.label} data-iconSrc=${e.iconSrc}></my-icon>
          `)).join("")}
    `}handleClick(e){if(!e.target.closest("my-icon"))return;const t=e.target.closest("my-icon");t.toggleAttribute("checked"),this.querySelectorAll("my-icon").forEach((e=>{e!==t&&e.removeAttribute("checked")}))}handleDoubleClick(e){if(!e.target.closest("my-icon"))return;const t=e.target.closest("my-icon");c.navigateTo(t.dataset.path)}handleKeyDown(e){const t=this.querySelectorAll("my-icon[checked]");if("Enter"===e.key){if(t.length>1)return;if(!t)return;c.navigateTo(t[0].dataset.path)}}}class v extends r{injectHTML(){const{label:e,iconsrc:t}=this.dataset;return i`
      <img alt="${e}_icon" src=${t} />
      ${e?`<span class="icon_name">${e}</span>`:""}
    `}}class f extends r{connectedCallback(){super.connectedCallback(),this.addEventListener("save",this.handleSave),this.addEventListener("localSave",this.handleLocalSave)}disconnectedCallback(){this.removeEventListener("save",this.handleSave),this.removeEventListener("localSave",this.handleLocalSave)}injectHTML(){return i`
      <my-notepad-header></my-notepad-header>
      <textarea></textarea>
    `}handleLocalSave(){const e=this.getNotePadData();if("fail"!==e)try{const t=new Blob([e.content],{type:"text/plain"}),i=document.createElement("a");i.href=URL.createObjectURL(t),i.download=`${e.title}.txt`,i.click()}catch(e){alert("Ï†ÄÏû•Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§."),console.error(e)}finally{this.querySelector("textarea").value=""}}async handleSave(e){e.stopPropagation();const i=this.getNotePadData();if("fail"!==i)try{const e=await t.upsertData("notepad",{title:i.title,content:i.content});e&&alert("Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§."),this.dispatchEvent(new CustomEvent("iconChange",{bubbles:!0,detail:{path:`/notepad/${e}`,label:i.title,iconSrc:n}}))}catch(e){alert("Ï†ÄÏû•Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§."),console.error(e)}finally{this.querySelector("textarea").value=""}}getNotePadData(){const e=this.querySelector("textarea").value;if(!e)return alert("ÎÇ¥Ïö©Ïù¥ ÏóÜÏäµÎãàÎã§."),"fail";let t=prompt("Ï†ÄÏû•Ìï† ÌååÏùºÎ™ÖÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî","Ï†úÎ™©ÏóÜÏùå");for(;null==t||""===t;){if(null===t)return"fail";t=prompt("ÌååÏùºÎ™ÖÏùÄ ÌïÑÏàòÏûÖÎãàÎã§.","Ï†úÎ™©ÏóÜÏùå")}return{title:t,content:e}}}const w=[{id:"file",title:"ÌååÏùº",key:"F",slots:[{id:1,text:"ÏÉàÎ°ú ÎßåÎì§Í∏∞(N)",key:["Ctrl","N"],disable:!0},{id:2,text:"ÎÇ¥ Ïª¥Ìì®ÌÑ∞Ïóê Ï†ÄÏû•(W)",key:["Ctrl","Shift","N"],onClick:function(){this.dispatchEvent(new CustomEvent("localSave",{bubbles:!0}))}},{id:3,text:"Ï†ÄÏû•(S)",key:["Ctrl","S"],onClick:function(){this.dispatchEvent(new CustomEvent("save",{bubbles:!0}))}},{id:4,text:"ÏÇ≠Ï†ú(D)",key:["Ctrl","Shift","S"],disable:!0},{id:5,text:"ÌéòÏù¥ÏßÄ ÏÑ§Ï†ï(U)...",key:[],disable:!0},{id:6,text:"Ïù∏ÏáÑ(P)...",key:["Ctrl","P"],disable:!0},{id:7,text:"ÎÅùÎÇ¥Í∏∞(X)",key:[],disable:!0}]},{id:"edit",title:"Ìé∏Ïßë",key:"E",slots:[{id:8,text:"Ïã§Ìñâ Ï∑®ÏÜå(U)",key:["Ctrl","Z"],disable:!0},{id:9,text:"ÏûòÎùºÎÇ¥Í∏∞(T)",key:["Ctrl","X"],disable:!0},{id:10,text:"Î≥µÏÇ¨(C)",key:["Ctrl","C"],disable:!0},{id:11,text:"Î∂ôÏó¨ÎÑ£Í∏∞(P)",key:["Ctrl","V"],disable:!0},{id:12,text:"ÏÇ≠Ï†ú(D)",key:["Del"],disable:!0},{id:13,text:"BingÏúºÎ°ú Í≤ÄÏÉâ(S)...",key:["Ctrl","E"],disable:!0},{id:14,text:"Ï∞æÍ∏∞(F)...",key:["Ctrl","F"],disable:!0},{id:15,text:"Îã§Ïùå Ï∞æÍ∏∞(N)",key:["F3"],disable:!0},{id:16,text:"Ïù¥Ï†Ñ Ï∞æÍ∏∞(V)",key:["Shift","F3"],disable:!0},{id:17,text:"Î∞îÍæ∏Í∏∞(R)...",key:["Ctrl","H"],disable:!0},{id:18,text:"Ïù¥Îèô(G)...",key:["Ctrl","G"],disable:!0},{id:19,text:"Î™®Îëê ÏÑ†ÌÉù(A)",key:["Ctrl","A"],disable:!0},{id:20,text:"ÏãúÍ∞Ñ/ÎÇ†Ïßú(D)",key:["F5"],disable:!0}]},{id:"format",title:"ÏÑúÏãù",key:"O",slots:[{id:21,text:"ÏûêÎèô Ï§Ñ Î∞îÍøà(W)",key:[],disable:!0},{id:22,text:"Í∏ÄÍº¥(F)...",key:[],disable:!0}]},{id:"view",title:"Î≥¥Í∏∞",key:"V",slots:[{id:23,text:"ÌôïÎåÄÌïòÍ∏∞(Z)",key:["Ctrl","+"],disable:!0},{id:24,text:"Ï∂ïÏÜåÌïòÍ∏∞(X)",key:["Ctrl","-"],disable:!0},{id:25,text:"ÏÉÅÌÉú ÌëúÏãúÏ§Ñ(S)",key:[],disable:!0}]},{id:"help",title:"ÎèÑÏõÄÎßê",key:"H",slots:[{id:26,text:"ÎèÑÏõÄÎßê Î≥¥Í∏∞(H)",key:[],disable:!0},{id:27,text:"ÌîºÎìúÎ∞± Î≥¥ÎÇ¥Í∏∞(F)",key:[],disable:!0},{id:28,text:"Î©îÎ™®Ïû• Ï†ïÎ≥¥(A)",key:[],disable:!0}]}],g=w.reduce(((e,t)=>[...e,...t.slots]),[]),x=w;class S extends r{connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.handleClick)}disconnectedCallback(){this.removeEventListener("click",this.handleClick)}injectHTML(){return i`
      <header>
        <span><img alt="notepad_icon" src=${n} />Ï†úÎ™©ÏóÜÏùå - Windows Î©îÎ™®Ïû•</span>
        <div class="view_buttons">
          <button class="view_button" id="mini">üóï</button>
          <button class="view_button" id="full">üóñ</button>
          <button class="view_button" id="close">‚Ö©</button>
        </div>
      </header>
      <div class="edit_buttons">
        ${x.map((e=>i`
              <button class="edit_button">
                ${e.title}(<u>${e.key}</u>)
                <div class="popup">
                  ${e.slots.map((e=>i`
                        <div class="sub" data-id="${e.id}" data-disable="${!!e.disable}">
                          <div>${e.text}</div>
                          ${e.key.length>0?`<div>${e.key.join(" + ")}</div>`:""}
                        </div>
                      `)).join("")}
                </div>
              </button>
            `)).join("")}
      </div>
    `}handleClick(e){const t=e.target.closest(".sub");if(t){const e=Number(t.dataset.id),{onClick:i}=g.find((t=>t.id===e))||{};i&&i.call(this)}else switch(e.target.className){case"view_button":(function(e){switch(e.id){case"full":this.parentElement.classList.toggle("fullscreen");break;case"mini":case"close":c.back()}}).call(this,e.target);break;case"edit_button":(function(e){e.querySelector(".popup").classList.toggle("show"),this.querySelectorAll(".popup").forEach((t=>{t!==e.querySelector(".popup")&&t.classList.remove("show")}))}).call(this,e.target)}}}(async()=>{await t.openDB(),customElements.define("my-app",d),customElements.define("my-footer",u),customElements.define("my-home",b),customElements.define("my-tetris",y),customElements.define("my-flappybird",m),customElements.define("my-icons",k),customElements.define("my-icon",v),customElements.define("my-notepad",f),customElements.define("my-notepad-header",S)})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEdBQVlILEVBQU0vRSxNQUFNdUYsR0FBU0EsRUFBS2xILEtBQU9vSCxLQUFXLENBQUMsRUFDN0RQLEdBQVNBLEVBQVFTLEtBQUs3SSxLQUU1QixNQUVBLE9BQVFZLEVBQUVvRSxPQUFPOEQsV0FDZixJQUFLLGVBVVAsU0FBeUJDLEdBQ3ZCLE9BQVFBLEVBQVF4SCxJQUNkLElBQUssT0FDSHZCLEtBQUtnSixjQUFjQyxVQUFVQyxPQUFPLGNBQ3BDLE1BQ0YsSUFBSyxPQUNMLElBQUssUUFDSCxTQUtOLEdBckJvQkwsS0FBSzdJLEtBQU1ZLEVBQUVvRSxRQUM3QixNQUNGLElBQUssZUFxQlAsU0FBbUJtRSxHQUNqQkEsRUFBUTNGLGNBQWMsVUFBVXlGLFVBQVVDLE9BQU8sUUFDakRsSixLQUFLNkYsaUJBQWlCLFVBQVUvRSxTQUFTZ0YsSUFDbkNBLElBQVNxRCxFQUFRM0YsY0FBYyxXQUNqQ3NDLEVBQUttRCxVQUFVRyxPQUFPLE9BQ3hCLEdBRUosR0EzQmNQLEtBQUs3SSxLQUFNWSxFQUFFb0UsUUE0QjdCLEVDbEZGLGlCQUNRLFdBRU5xRSxlQUFlQyxPQUFPLFNBQVVqRixHQUNoQ2dGLGVBQWVDLE9BQU8sWUFBYTFFLEdBQ25DeUUsZUFBZUMsT0FBTyxVQUFXbkUsR0FDakNrRSxlQUFlQyxPQUFPLFlBQWFsRSxHQUNuQ2lFLGVBQWVDLE9BQU8sZ0JBQWlCakUsR0FDdkNnRSxlQUFlQyxPQUFPLFdBQVloRSxHQUNsQytELGVBQWVDLE9BQU8sVUFBV25ELEdBQ2pDa0QsZUFBZUMsT0FBTyxhQUFjakQsR0FDcENnRCxlQUFlQyxPQUFPLG9CQUFxQmYsRUFDNUMsRUFaRCxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vamF2YXNjcmlwdC1zYW5kYm94L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2phdmFzY3JpcHQtc2FuZGJveC93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly9qYXZhc2NyaXB0LXNhbmRib3gvLi9zcmMvY29yZS9JbmRleGVkREIuanMiLCJ3ZWJwYWNrOi8vamF2YXNjcmlwdC1zYW5kYm94Ly4vc3JjL3V0aWxzL3V0aWxzLmpzIiwid2VicGFjazovL2phdmFzY3JpcHQtc2FuZGJveC8uL3NyYy91dGlscy9yb3V0ZXMuanMiLCJ3ZWJwYWNrOi8vamF2YXNjcmlwdC1zYW5kYm94Ly4vc3JjL2NvcmUvUm91dGVyLmpzIiwid2VicGFjazovL2phdmFzY3JpcHQtc2FuZGJveC8uL3NyYy9jb3JlL1dlYkNvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly9qYXZhc2NyaXB0LXNhbmRib3gvLi9zcmMvQXBwLmpzIiwid2VicGFjazovL2phdmFzY3JpcHQtc2FuZGJveC8uL3NyYy92aWV3L0NvbW1vbi9Gb290ZXIuanMiLCJ3ZWJwYWNrOi8vamF2YXNjcmlwdC1zYW5kYm94Ly4vc3JjL3ZpZXcvSG9tZS9pbmRleC5qcyIsIndlYnBhY2s6Ly9qYXZhc2NyaXB0LXNhbmRib3gvLi9zcmMvdmlldy9UZXRyaXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vamF2YXNjcmlwdC1zYW5kYm94Ly4vc3JjL3ZpZXcvRmxhcHB5QmlyZC9pbmRleC5qcyIsIndlYnBhY2s6Ly9qYXZhc2NyaXB0LXNhbmRib3gvLi9zcmMvdmlldy9Db21tb24vSWNvbnMuanMiLCJ3ZWJwYWNrOi8vamF2YXNjcmlwdC1zYW5kYm94Ly4vc3JjL3ZpZXcvQ29tbW9uL0ljb24uanMiLCJ3ZWJwYWNrOi8vamF2YXNjcmlwdC1zYW5kYm94Ly4vc3JjL3ZpZXcvTm90ZVBhZC9pbmRleC5qcyIsIndlYnBhY2s6Ly9qYXZhc2NyaXB0LXNhbmRib3gvLi9zcmMvdmlldy9Ob3RlUGFkL2NvbnN0L2J1dHRvbnMuanMiLCJ3ZWJwYWNrOi8vamF2YXNjcmlwdC1zYW5kYm94Ly4vc3JjL3ZpZXcvTm90ZVBhZC9jb21wb25lbnRzL05vdGVQYWRIZWFkZXIuanMiLCJ3ZWJwYWNrOi8vamF2YXNjcmlwdC1zYW5kYm94Ly4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIi9qcy1zYW5kYm94L1wiOyIsImNsYXNzIEluZGV4ZWREQiB7XG4gIGRiO1xuXG4gIC8qKlxuICAgKiDsg53shLHsnpBcbiAgICogQHBhcmFtIHtzdHJpbmd9IGRiTmFtZVxuICAgKiBAcGFyYW0ge251bWJlcn0gZGJWZXJzaW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHN0b3Jlc1xuICAgKi9cbiAgY29uc3RydWN0b3IoZGJOYW1lLCBkYlZlcnNpb24sIHN0b3Jlcykge1xuICAgIHRoaXMuZGJOYW1lID0gZGJOYW1lO1xuICAgIHRoaXMuZGJWZXJzaW9uID0gZGJWZXJzaW9uO1xuICAgIHRoaXMuc3RvcmVzID0gc3RvcmVzO1xuICB9XG5cbiAgLyoqXG4gICAqIERCIOyYpO2UiCDrqZTshJzrk5xcbiAgICogQHJldHVybnMge1Byb21pc2U8dm9pZD59XG4gICAqL1xuICBhc3luYyBvcGVuREIoKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSB3aW5kb3cuaW5kZXhlZERCLm9wZW4odGhpcy5kYk5hbWUsIHRoaXMuZGJWZXJzaW9uKTtcblxuICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSAoKSA9PiB7XG4gICAgICAgIHRoaXMuZGIgPSByZXF1ZXN0LnJlc3VsdDtcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfTtcblxuICAgICAgcmVxdWVzdC5vbmVycm9yID0gKGUpID0+IHtcbiAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgfTtcblxuICAgICAgcmVxdWVzdC5vbnVwZ3JhZGVuZWVkZWQgPSAoKSA9PiB7XG4gICAgICAgIHRoaXMuZGIgPSByZXF1ZXN0LnJlc3VsdDtcblxuICAgICAgICB0aGlzLnN0b3Jlcy5mb3JFYWNoKChzdG9yZSkgPT4ge1xuICAgICAgICAgIGlmICh0aGlzLmRiLm9iamVjdFN0b3JlTmFtZXMuY29udGFpbnMoc3RvcmUpKSB7XG4gICAgICAgICAgICB0aGlzLmRiLmRlbGV0ZU9iamVjdFN0b3JlKHN0b3JlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5kYi5jcmVhdGVPYmplY3RTdG9yZShzdG9yZSwgeyBrZXlQYXRoOiAnaWQnLCBhdXRvSW5jcmVtZW50OiB0cnVlIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICog642w7J207YSwIOyhsO2ajCDrqZTshJzrk5xcbiAgICogQHBhcmFtIHtzdHJpbmd9IHN0b3JlTmFtZVxuICAgKiBAcGFyYW0ge251bWJlcn0gaWRcbiAgICogQHJldHVybnMge1Byb21pc2U8b2JqZWN0Pn1cbiAgICovXG4gIGFzeW5jIGdldERhdGEoc3RvcmVOYW1lLCBpZCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5kYi50cmFuc2FjdGlvbihzdG9yZU5hbWUsICdyZWFkb25seScpLm9iamVjdFN0b3JlKHN0b3JlTmFtZSkuZ2V0KGlkKTtcblxuICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSAoKSA9PiB7XG4gICAgICAgIHJlc29sdmUocmVxdWVzdC5yZXN1bHQpO1xuICAgICAgfTtcblxuICAgICAgcmVxdWVzdC5vbmVycm9yID0gKGUpID0+IHtcbiAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiDrjbDsnbTthLAg7KCE7LK0IOyhsO2ajCDrqZTshJzrk5xcbiAgICogQHBhcmFtIHtzdHJpbmd9IHN0b3JlTmFtZVxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxvYmplY3RbXT59XG4gICAqL1xuICBhc3luYyBnZXRBbGxEYXRhKHN0b3JlTmFtZSkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5kYi50cmFuc2FjdGlvbihzdG9yZU5hbWUsICdyZWFkb25seScpLm9iamVjdFN0b3JlKHN0b3JlTmFtZSkuZ2V0QWxsKCk7XG5cbiAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gKCkgPT4ge1xuICAgICAgICByZXNvbHZlKHJlcXVlc3QucmVzdWx0KTtcbiAgICAgIH07XG5cbiAgICAgIHJlcXVlc3Qub25lcnJvciA9IChlKSA9PiB7XG4gICAgICAgIHJlamVjdChlKTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICog642w7J207YSwIOy2lOqwgCDrqZTshJzrk5xcbiAgICogQHBhcmFtIHtzdHJpbmd9IHN0b3JlTmFtZVxuICAgKiBAcGFyYW0ge29iamVjdH0gZGF0YVxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxvYmplY3Q+fVxuICAgKi9cbiAgYXN5bmMgdXBzZXJ0RGF0YShzdG9yZU5hbWUsIGRhdGEpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3QgcmVxdWVzdCA9IHRoaXMuZGIudHJhbnNhY3Rpb24oc3RvcmVOYW1lLCAncmVhZHdyaXRlJykub2JqZWN0U3RvcmUoc3RvcmVOYW1lKS5wdXQoZGF0YSk7XG5cbiAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gKCkgPT4ge1xuICAgICAgICByZXNvbHZlKHJlcXVlc3QucmVzdWx0KTtcbiAgICAgIH07XG5cbiAgICAgIHJlcXVlc3Qub25lcnJvciA9IChlKSA9PiB7XG4gICAgICAgIHJlamVjdChlKTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICog642w7J207YSwIOyCreygnCDrqZTshJzrk5xcbiAgICogQHBhcmFtIHtzdHJpbmd9IHN0b3JlTmFtZVxuICAgKiBAcGFyYW0ge251bWJlcn0gaWRcbiAgICogQHJldHVybnMge1Byb21pc2U8b2JqZWN0Pn1cbiAgICovXG4gIGFzeW5jIGRlbGV0ZURhdGEoc3RvcmVOYW1lLCBpZCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5kYi50cmFuc2FjdGlvbihzdG9yZU5hbWUsICdyZWFkd3JpdGUnKS5vYmplY3RTdG9yZShzdG9yZU5hbWUpLmRlbGV0ZShpZCk7XG5cbiAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gKCkgPT4ge1xuICAgICAgICByZXNvbHZlKHJlcXVlc3QucmVzdWx0KTtcbiAgICAgIH07XG5cbiAgICAgIHJlcXVlc3Qub25lcnJvciA9IChlKSA9PiB7XG4gICAgICAgIHJlamVjdChlKTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cbn1cblxuY29uc3Qgc2FuZGJveERCID0gbmV3IEluZGV4ZWREQignc2FuZGJveERCJywgMiwgWydub3RlcGFkJ10pO1xuXG5leHBvcnQgZGVmYXVsdCBzYW5kYm94REI7XG4iLCJjb25zdCByZW5kZXJSYXcgPSAoc3RyaW5nLCAuLi52YWx1ZXMpID0+IHtcclxuICByZXR1cm4gU3RyaW5nLnJhdyhzdHJpbmcsIC4uLnZhbHVlcyk7XHJcbn07XHJcblxyXG5leHBvcnQgeyByZW5kZXJSYXcgYXMgaHRtbCwgcmVuZGVyUmF3IGFzIGNzcyB9O1xyXG4iLCJpbXBvcnQgeyBodG1sIH0gZnJvbSAnLi91dGlscyc7XG5pbXBvcnQgdGV0cmlzIGZyb20gJy4uLy4uL3B1YmxpYy90ZXRyaXMucG5nJztcbmltcG9ydCBmbGFwcHlCaXJkIGZyb20gJy4uLy4uL3B1YmxpYy9mbGFwcHlCaXJkLnBuZyc7XG5pbXBvcnQgbm90ZXBhZCBmcm9tICcuLi8uLi9wdWJsaWMvbm90ZXBhZC5wbmcnO1xuaW1wb3J0IHNhbmRib3hEQiBmcm9tICcuLi9jb3JlL0luZGV4ZWREQic7XG5cbmNvbnN0IHJvdXRlcyA9IFtcbiAge1xuICAgIHBhdGg6ICcvJyxcbiAgICBodG1sOiBodG1sYDxteS1ob21lPjwvbXktaG9tZT5gLFxuICAgIGxhYmVsOiAnSG9tZScsXG4gICAgaWNvblNyYzogbnVsbCxcbiAgfSxcbiAge1xuICAgIHBhdGg6ICcvdGV0cmlzJyxcbiAgICBodG1sOiBodG1sYDxteS10ZXRyaXM+PC9teS10ZXRyaXM+YCxcbiAgICBsYWJlbDogJ1RldHJpcycsXG4gICAgaWNvblNyYzogdGV0cmlzLFxuICB9LFxuICB7XG4gICAgcGF0aDogJy9mbGFwcHliaXJkJyxcbiAgICBodG1sOiBodG1sYDxteS1mbGFwcHliaXJkPjwvbXktZmxhcHB5YmlyZD5gLFxuICAgIGxhYmVsOiAnRmxhcHB5Jm5ic3A7QmlyZCcsXG4gICAgaWNvblNyYzogZmxhcHB5QmlyZCxcbiAgfSxcbiAge1xuICAgIHBhdGg6ICcvbm90ZXBhZCcsXG4gICAgaHRtbDogaHRtbGA8bXktbm90ZXBhZD48L215LW5vdGVwYWQ+YCxcbiAgICBsYWJlbDogJ05vdGUmbmJzcDtQYWQnLFxuICAgIGljb25TcmM6IG5vdGVwYWQsXG4gIH0sXG5dO1xuXG5jb25zdCBtYWluSWNvbnMgPSByb3V0ZXMucmVkdWNlKChwcmV2LCByb3V0ZXIpID0+IHtcbiAgY29uc3QgeyBwYXRoLCBsYWJlbCwgaWNvblNyYyB9ID0gcm91dGVyO1xuICBpZiAocm91dGVyLnBhdGggPT09ICcvJykgcmV0dXJuIHByZXY7XG4gIHJldHVybiBbLi4ucHJldiwgeyBwYXRoLCBsYWJlbCwgaWNvblNyYyB9XTtcbn0sIFtdKTtcblxuY29uc3QgZ2V0TG9jYWxJY29ucyA9IGFzeW5jICgpID0+IHtcbiAgY29uc3Qgbm90ZXBhZERhdGEgPSBhd2FpdCBzYW5kYm94REIuZ2V0QWxsRGF0YSgnbm90ZXBhZCcpO1xuICBjb25zdCBub3RlcGFkSWNvbnMgPSBub3RlcGFkRGF0YS5yZWR1Y2UoKHByZXYsIGljb24pID0+IHtcbiAgICBjb25zdCB7IGlkLCB0aXRsZSB9ID0gaWNvbjtcbiAgICByZXR1cm4gWy4uLnByZXYsIHsgcGF0aDogYC9ub3RlcGFkLyR7aWR9YCwgbGFiZWw6IHRpdGxlLCBpY29uU3JjOiBub3RlcGFkIH1dO1xuICB9LCBbXSk7XG5cbiAgcmV0dXJuIFsuLi5ub3RlcGFkSWNvbnNdO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgcm91dGVzO1xuZXhwb3J0IHsgbWFpbkljb25zLCBnZXRMb2NhbEljb25zIH07XG4iLCJpbXBvcnQgcm91dGVzIGZyb20gJy4uL3V0aWxzL3JvdXRlcyc7XHJcblxyXG5jb25zdCBCQVNFX1VSTCA9ICcvanMtc2FuZGJveCc7XHJcblxyXG5jbGFzcyBSb3V0ZXIge1xyXG4gIGNvbnN0cnVjdG9yKHJvdXRlKSB7XHJcbiAgICB0aGlzLnJvdXRlcyA9IHJvdXRlO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgY29uc3Qgcm91dGUgPSB0aGlzLnJvdXRlcy5maW5kKCh2YWx1ZSkgPT4gdmFsdWUucGF0aCA9PT0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLnJlcGxhY2UoQkFTRV9VUkwsICcnKSk7XHJcblxyXG4gICAgaWYgKCFyb3V0ZSkge1xyXG4gICAgICB0aGlzLnJlcGxhY2VUbygnLycpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BhZ2UnKS5pbm5lckhUTUwgPSByb3V0ZS5odG1sO1xyXG4gIH1cclxuXHJcbiAgbmF2aWdhdGVUbyh1cmwpIHtcclxuICAgIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZShudWxsLCBudWxsLCB1cmwpO1xyXG4gICAgdGhpcy5yZW5kZXIoKTtcclxuICB9XHJcblxyXG4gIHJlcGxhY2VUbyh1cmwpIHtcclxuICAgIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZShudWxsLCBudWxsLCB1cmwpO1xyXG4gICAgdGhpcy5yZW5kZXIoKTtcclxuICB9XHJcblxyXG4gIGJhY2soKSB7XHJcbiAgICB3aW5kb3cuaGlzdG9yeS5iYWNrKCk7XHJcbiAgICB0aGlzLnJlbmRlcigpO1xyXG4gIH1cclxufVxyXG5cclxuY29uc3Qgcm91dGVyID0gbmV3IFJvdXRlcihyb3V0ZXMpO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgcm91dGVyO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBXZWJDb21wb25lbnQgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XHJcbiAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XHJcbiAgICB0aGlzLnJlbmRlcigpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgdGhpcy5pbm5lckhUTUwgPSB0aGlzLmluamVjdEhUTUwoKTtcclxuICB9XHJcblxyXG4gIGluamVjdEhUTUwoKSB7XHJcbiAgICByZXR1cm4gYGA7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCByb3V0ZXIgZnJvbSAnLi9jb3JlL1JvdXRlcic7XG5pbXBvcnQgeyBodG1sIH0gZnJvbSAnLi91dGlscy91dGlscyc7XG5pbXBvcnQgV2ViQ29tcG9uZW50IGZyb20gJy4vY29yZS9XZWJDb21wb25lbnQnO1xuaW1wb3J0IHsgZ2V0TG9jYWxJY29ucywgbWFpbkljb25zIH0gZnJvbSAnLi91dGlscy9yb3V0ZXMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBcHAgZXh0ZW5kcyBXZWJDb21wb25lbnQge1xuICBhc3luYyBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICB0aGlzLmljb25zID0gWy4uLm1haW5JY29ucywgLi4uKGF3YWl0IGdldExvY2FsSWNvbnMoKSldO1xuICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgKCkgPT4gcm91dGVyLnJlbmRlcigpKTtcbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ2ljb25DaGFuZ2UnLCAoZSkgPT4ge1xuICAgICAgdGhpcy5pY29ucyA9IFsuLi50aGlzLmljb25zLCBlLmRldGFpbF07XG4gICAgICB0aGlzLnJlbmRlcigpO1xuICAgIH0pO1xuICB9XG5cbiAgaW5qZWN0SFRNTCgpIHtcbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxkaXYgaWQ9XCJwYWdlXCI+PC9kaXY+XG4gICAgICA8bXktaWNvbnMgaWNvbnM9JHtKU09OLnN0cmluZ2lmeSh0aGlzLmljb25zKX0gdGFiaW5kZXg9XCItMVwiPjwvbXktaWNvbnM+XG4gICAgICA8bXktZm9vdGVyPjwvbXktZm9vdGVyPlxuICAgIGA7XG4gIH1cbn1cbiIsImltcG9ydCBXZWJDb21wb25lbnQgZnJvbSAnLi4vLi4vY29yZS9XZWJDb21wb25lbnQnO1xyXG5pbXBvcnQgeyBodG1sIH0gZnJvbSAnLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBtYWluSWNvbnMgfSBmcm9tICcuLi8uLi91dGlscy9yb3V0ZXMnO1xyXG5pbXBvcnQgcm91dGVyIGZyb20gJy4uLy4uL2NvcmUvUm91dGVyJztcclxuaW1wb3J0IHdpbmRvd0xvZ28gZnJvbSAnLi4vLi4vLi4vcHVibGljL3dpbmRvd0xvZ28ucG5nJztcclxuaW1wb3J0IHNlYXJjaEljb24gZnJvbSAnLi4vLi4vLi4vcHVibGljL3NlYXJjaEljb24ucG5nJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvb3RlciBleHRlbmRzIFdlYkNvbXBvbmVudCB7XHJcbiAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XHJcbiAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xyXG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGFuZGxlQ2xpY2suYmluZCh0aGlzKSk7XHJcbiAgfVxyXG5cclxuICBpbmplY3RIVE1MKCkge1xyXG4gICAgcmV0dXJuIGh0bWxgXHJcbiAgICAgIDxpbWcgYWx0PVwid2luZG93X2xvZ29cIiBzcmM9JHt3aW5kb3dMb2dvfSBjbGFzcz1cIndpbmRvd19pY29uXCIgLz5cclxuICAgICAgPGRpdiBjbGFzcz1cImlucHV0X2JveFwiPlxyXG4gICAgICAgIDxpbWcgYWx0PVwic2VhcmNoXCIgc3JjPSR7c2VhcmNoSWNvbn0gY2xhc3M9XCJ3aW5kb3dfaWNvblwiIC8+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgcGxhY2Vob2xkZXI9XCLssL7quLBcIiAvPlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgJHttYWluSWNvbnNcclxuICAgICAgICAubWFwKChpY29uKSA9PiB7XHJcbiAgICAgICAgICByZXR1cm4gaHRtbGAgPG15LWljb24gZGF0YS1wYXRoPVwiJHtpY29uLnBhdGh9XCIgZGF0YS1pY29uU3JjPVwiJHtpY29uLmljb25TcmN9XCI+PC9teS1pY29uPiBgO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmpvaW4oJycpfVxyXG4gICAgYDtcclxuICB9XHJcblxyXG4gIGhhbmRsZUNsaWNrKGUpIHtcclxuICAgIGlmICghZS50YXJnZXQuY2xvc2VzdCgnbXktaWNvbicpKSByZXR1cm47XHJcblxyXG4gICAgY29uc3QgaWNvbiA9IGUudGFyZ2V0LmNsb3Nlc3QoJ215LWljb24nKTtcclxuICAgIHJvdXRlci5uYXZpZ2F0ZVRvKGljb24uZGF0YXNldC5wYXRoKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFdlYkNvbXBvbmVudCBmcm9tICcuLi8uLi9jb3JlL1dlYkNvbXBvbmVudCc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIb21lIGV4dGVuZHMgV2ViQ29tcG9uZW50IHt9XHJcbiIsImltcG9ydCBXZWJDb21wb25lbnQgZnJvbSAnLi4vLi4vY29yZS9XZWJDb21wb25lbnQnO1xyXG5pbXBvcnQgeyBodG1sIH0gZnJvbSAnLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGV0cmlzIGV4dGVuZHMgV2ViQ29tcG9uZW50IHtcclxuICBpbmplY3RIVE1MKCkge1xyXG4gICAgcmV0dXJuIGh0bWxgXHJcbiAgICAgIDxoMT5UZXRyaXM8L2gxPlxyXG4gICAgICA8cD5Zb3UgYXJlIHZpZXdpbmcgdGhlIFRldHJpcyBjb21wb25lbnQhPC9wPlxyXG4gICAgYDtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFdlYkNvbXBvbmVudCBmcm9tICcuLi8uLi9jb3JlL1dlYkNvbXBvbmVudCc7XHJcbmltcG9ydCB7IGh0bWwgfSBmcm9tICcuLi8uLi91dGlscy91dGlscyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGbGFwcHlCaXJkIGV4dGVuZHMgV2ViQ29tcG9uZW50IHtcclxuICBpbmplY3RIVE1MKCkge1xyXG4gICAgcmV0dXJuIGh0bWxgXHJcbiAgICAgIDxoMT5GbGFwcHkgQmlyZDwvaDE+XHJcbiAgICAgIDxwPllvdSBhcmUgdmlld2luZyB0aGUgRmxhcHB5IEJpcmQgY29tcG9uZW50ITwvcD5cclxuICAgICAgPHA+WW91IGFyZSB2aWV3aW5nIHRoZSBGbGFwcHkgQmlyZCBjb21wb25lbnQhPC9wPlxyXG4gICAgICA8cD5Zb3UgYXJlIHZpZXdpbmcgdGhlIEZsYXBweSBCaXJkIGNvbXBvbmVudCE8L3A+XHJcbiAgICAgIDxwPllvdSBhcmUgdmlld2luZyB0aGUgRmxhcHB5IEJpcmQgY29tcG9uZW50ITwvcD5cclxuICAgICAgPHA+WW91IGFyZSB2aWV3aW5nIHRoZSBGbGFwcHkgQmlyZCBjb21wb25lbnQhPC9wPlxyXG4gICAgICA8cD5Zb3UgYXJlIHZpZXdpbmcgdGhlIEZsYXBweSBCaXJkIGNvbXBvbmVudCE8L3A+XHJcbiAgICBgO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBodG1sIH0gZnJvbSAnLi4vLi4vdXRpbHMvdXRpbHMnO1xuaW1wb3J0IHJvdXRlciBmcm9tICcuLi8uLi9jb3JlL1JvdXRlcic7XG5pbXBvcnQgV2ViQ29tcG9uZW50IGZyb20gJy4uLy4uL2NvcmUvV2ViQ29tcG9uZW50JztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSWNvbnMgZXh0ZW5kcyBXZWJDb21wb25lbnQge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuaWNvbnMgPSBKU09OLnBhcnNlKHRoaXMuZ2V0QXR0cmlidXRlKCdpY29ucycpKTtcbiAgfVxuXG4gIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGFuZGxlQ2xpY2suYmluZCh0aGlzKSk7XG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdkYmxjbGljaycsIHRoaXMuaGFuZGxlRG91YmxlQ2xpY2suYmluZCh0aGlzKSk7XG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5oYW5kbGVLZXlEb3duLmJpbmQodGhpcykpO1xuICB9XG5cbiAgaW5qZWN0SFRNTCgpIHtcbiAgICByZXR1cm4gaHRtbGBcbiAgICAgICR7dGhpcy5pY29uc1xuICAgICAgICAubWFwKChpY29uKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIGh0bWxgXG4gICAgICAgICAgICA8bXktaWNvbiBkYXRhLXBhdGg9JHtpY29uLnBhdGh9IGRhdGEtbGFiZWw9JHtpY29uLmxhYmVsfSBkYXRhLWljb25TcmM9JHtpY29uLmljb25TcmN9PjwvbXktaWNvbj5cbiAgICAgICAgICBgO1xuICAgICAgICB9KVxuICAgICAgICAuam9pbignJyl9XG4gICAgYDtcbiAgfVxuXG4gIGhhbmRsZUNsaWNrKGUpIHtcbiAgICBpZiAoIWUudGFyZ2V0LmNsb3Nlc3QoJ215LWljb24nKSkgcmV0dXJuO1xuXG4gICAgY29uc3QgaWNvbiA9IGUudGFyZ2V0LmNsb3Nlc3QoJ215LWljb24nKTtcbiAgICBpY29uLnRvZ2dsZUF0dHJpYnV0ZSgnY2hlY2tlZCcpO1xuICAgIHRoaXMucXVlcnlTZWxlY3RvckFsbCgnbXktaWNvbicpLmZvckVhY2goKG5vZGUpID0+IHtcbiAgICAgIGlmIChub2RlICE9PSBpY29uKSB7XG4gICAgICAgIG5vZGUucmVtb3ZlQXR0cmlidXRlKCdjaGVja2VkJyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBoYW5kbGVEb3VibGVDbGljayhlKSB7XG4gICAgaWYgKCFlLnRhcmdldC5jbG9zZXN0KCdteS1pY29uJykpIHJldHVybjtcblxuICAgIGNvbnN0IGljb24gPSBlLnRhcmdldC5jbG9zZXN0KCdteS1pY29uJyk7XG4gICAgcm91dGVyLm5hdmlnYXRlVG8oaWNvbi5kYXRhc2V0LnBhdGgpO1xuICB9XG5cbiAgaGFuZGxlS2V5RG93bihlKSB7XG4gICAgY29uc3QgY2hlY2tlZEVsID0gdGhpcy5xdWVyeVNlbGVjdG9yQWxsKCdteS1pY29uW2NoZWNrZWRdJyk7XG5cbiAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicpIHtcbiAgICAgIGlmIChjaGVja2VkRWwubGVuZ3RoID4gMSkgcmV0dXJuO1xuICAgICAgaWYgKCFjaGVja2VkRWwpIHJldHVybjtcbiAgICAgIHJvdXRlci5uYXZpZ2F0ZVRvKGNoZWNrZWRFbFswXS5kYXRhc2V0LnBhdGgpO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgaHRtbCB9IGZyb20gJy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IFdlYkNvbXBvbmVudCBmcm9tICcuLi8uLi9jb3JlL1dlYkNvbXBvbmVudCc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJY29uIGV4dGVuZHMgV2ViQ29tcG9uZW50IHtcclxuICBpbmplY3RIVE1MKCkge1xyXG4gICAgY29uc3QgeyBsYWJlbCwgaWNvbnNyYyB9ID0gdGhpcy5kYXRhc2V0O1xyXG4gICAgcmV0dXJuIGh0bWxgXHJcbiAgICAgIDxpbWcgYWx0PVwiJHtsYWJlbH1faWNvblwiIHNyYz0ke2ljb25zcmN9IC8+XHJcbiAgICAgICR7bGFiZWwgPyBgPHNwYW4gY2xhc3M9XCJpY29uX25hbWVcIj4ke2xhYmVsfTwvc3Bhbj5gIDogJyd9XHJcbiAgICBgO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgV2ViQ29tcG9uZW50IGZyb20gJy4uLy4uL2NvcmUvV2ViQ29tcG9uZW50JztcbmltcG9ydCB7IGh0bWwgfSBmcm9tICcuLi8uLi91dGlscy91dGlscyc7XG5pbXBvcnQgJy4vc3R5bGVzLnNjc3MnO1xuaW1wb3J0IHNhbmRib3hEQiBmcm9tICcuLi8uLi9jb3JlL0luZGV4ZWREQic7XG5pbXBvcnQgTm90ZVBhZEljb24gZnJvbSAnLi4vLi4vLi4vcHVibGljL25vdGVwYWQucG5nJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTm90ZVBhZCBleHRlbmRzIFdlYkNvbXBvbmVudCB7XG4gIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdzYXZlJywgdGhpcy5oYW5kbGVTYXZlKTtcbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ2xvY2FsU2F2ZScsIHRoaXMuaGFuZGxlTG9jYWxTYXZlKTtcbiAgfVxuXG4gIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2F2ZScsIHRoaXMuaGFuZGxlU2F2ZSk7XG4gICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCdsb2NhbFNhdmUnLCB0aGlzLmhhbmRsZUxvY2FsU2F2ZSk7XG4gIH1cblxuICBpbmplY3RIVE1MKCkge1xuICAgIHJldHVybiBodG1sYFxuICAgICAgPG15LW5vdGVwYWQtaGVhZGVyPjwvbXktbm90ZXBhZC1oZWFkZXI+XG4gICAgICA8dGV4dGFyZWE+PC90ZXh0YXJlYT5cbiAgICBgO1xuICB9XG5cbiAgaGFuZGxlTG9jYWxTYXZlKCkge1xuICAgIGNvbnN0IG5vdGVQYWREYXRhID0gdGhpcy5nZXROb3RlUGFkRGF0YSgpO1xuICAgIGlmIChub3RlUGFkRGF0YSA9PT0gJ2ZhaWwnKSByZXR1cm47XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtub3RlUGFkRGF0YS5jb250ZW50XSwgeyB0eXBlOiAndGV4dC9wbGFpbicgfSk7XG4gICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgICAgbGluay5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbiAgICAgIGxpbmsuZG93bmxvYWQgPSBgJHtub3RlUGFkRGF0YS50aXRsZX0udHh0YDtcbiAgICAgIGxpbmsuY2xpY2soKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGFsZXJ0KCfsoIDsnqXsl5Ag7Iuk7Yyo7ZaI7Iq164uI64ukLicpO1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICB0aGlzLnF1ZXJ5U2VsZWN0b3IoJ3RleHRhcmVhJykudmFsdWUgPSAnJztcbiAgICB9XG4gIH1cblxuICBhc3luYyBoYW5kbGVTYXZlKGUpIHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIGNvbnN0IG5vdGVQYWREYXRhID0gdGhpcy5nZXROb3RlUGFkRGF0YSgpO1xuICAgIGlmIChub3RlUGFkRGF0YSA9PT0gJ2ZhaWwnKSByZXR1cm47XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2FuZGJveERCLnVwc2VydERhdGEoJ25vdGVwYWQnLCB7XG4gICAgICAgIHRpdGxlOiBub3RlUGFkRGF0YS50aXRsZSxcbiAgICAgICAgY29udGVudDogbm90ZVBhZERhdGEuY29udGVudCxcbiAgICAgIH0pO1xuICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICBhbGVydCgn7KCA7J6l65CY7JeI7Iq164uI64ukLicpO1xuICAgICAgfVxuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KFxuICAgICAgICBuZXcgQ3VzdG9tRXZlbnQoJ2ljb25DaGFuZ2UnLCB7XG4gICAgICAgICAgYnViYmxlczogdHJ1ZSxcbiAgICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICAgIHBhdGg6IGAvbm90ZXBhZC8ke3Jlc3VsdH1gLFxuICAgICAgICAgICAgbGFiZWw6IG5vdGVQYWREYXRhLnRpdGxlLFxuICAgICAgICAgICAgaWNvblNyYzogTm90ZVBhZEljb24sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBhbGVydCgn7KCA7J6l7JeQIOyLpO2MqO2WiOyKteuLiOuLpC4nKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgdGhpcy5xdWVyeVNlbGVjdG9yKCd0ZXh0YXJlYScpLnZhbHVlID0gJyc7XG4gICAgfVxuICB9XG5cbiAgZ2V0Tm90ZVBhZERhdGEoKSB7XG4gICAgY29uc3QgY29udGVudCA9IHRoaXMucXVlcnlTZWxlY3RvcigndGV4dGFyZWEnKS52YWx1ZTtcbiAgICBpZiAoIWNvbnRlbnQpIHtcbiAgICAgIGFsZXJ0KCfrgrTsmqnsnbQg7JeG7Iq164uI64ukLicpO1xuICAgICAgcmV0dXJuICdmYWlsJztcbiAgICB9XG4gICAgbGV0IHRpdGxlID0gcHJvbXB0KCfsoIDsnqXtlaAg7YyM7J2866qF7J2EIOyeheugpe2VmOyEuOyalCcsICfsoJzrqqnsl4bsnYwnKTtcbiAgICB3aGlsZSAodGl0bGUgPT09IG51bGwgfHwgdGl0bGUgPT09IHVuZGVmaW5lZCB8fCB0aXRsZSA9PT0gJycpIHtcbiAgICAgIGlmICh0aXRsZSA9PT0gbnVsbCkgcmV0dXJuICdmYWlsJztcbiAgICAgIHRpdGxlID0gcHJvbXB0KCftjIzsnbzrqoXsnYAg7ZWE7IiY7J6F64uI64ukLicsICfsoJzrqqnsl4bsnYwnKTtcbiAgICB9XG5cbiAgICByZXR1cm4geyB0aXRsZSwgY29udGVudCB9O1xuICB9XG59XG4iLCJjb25zdCBidXR0b25zID0gW1xuICB7XG4gICAgaWQ6ICdmaWxlJyxcbiAgICB0aXRsZTogJ+2MjOydvCcsXG4gICAga2V5OiAnRicsXG4gICAgc2xvdHM6IFtcbiAgICAgIHsgaWQ6IDEsIHRleHQ6ICfsg4jroZwg66eM65Ok6riwKE4pJywga2V5OiBbJ0N0cmwnLCAnTiddLCBkaXNhYmxlOiB0cnVlIH0sXG4gICAgICB7IGlkOiAyLCB0ZXh0OiAn64K0IOy7tO2TqO2EsOyXkCDsoIDsnqUoVyknLCBrZXk6IFsnQ3RybCcsICdTaGlmdCcsICdOJ10sIG9uQ2xpY2s6IGhhbmRsZUxvY2FsU2F2ZUNsaWNrIH0sXG4gICAgICB7IGlkOiAzLCB0ZXh0OiAn7KCA7J6lKFMpJywga2V5OiBbJ0N0cmwnLCAnUyddLCBvbkNsaWNrOiBoYW5kbGVTYXZlQ2xpY2sgfSxcbiAgICAgIHsgaWQ6IDQsIHRleHQ6ICfsgq3soJwoRCknLCBrZXk6IFsnQ3RybCcsICdTaGlmdCcsICdTJ10sIGRpc2FibGU6IHRydWUgfSxcbiAgICAgIHsgaWQ6IDUsIHRleHQ6ICftjpjsnbTsp4Ag7ISk7KCVKFUpLi4uJywga2V5OiBbXSwgZGlzYWJsZTogdHJ1ZSB9LFxuICAgICAgeyBpZDogNiwgdGV4dDogJ+yduOyHhChQKS4uLicsIGtleTogWydDdHJsJywgJ1AnXSwgZGlzYWJsZTogdHJ1ZSB9LFxuICAgICAgeyBpZDogNywgdGV4dDogJ+uBneuCtOq4sChYKScsIGtleTogW10sIGRpc2FibGU6IHRydWUgfSxcbiAgICBdLFxuICB9LFxuICB7XG4gICAgaWQ6ICdlZGl0JyxcbiAgICB0aXRsZTogJ+2OuOynkScsXG4gICAga2V5OiAnRScsXG4gICAgc2xvdHM6IFtcbiAgICAgIHsgaWQ6IDgsIHRleHQ6ICfsi6Ttlokg7Leo7IaMKFUpJywga2V5OiBbJ0N0cmwnLCAnWiddLCBkaXNhYmxlOiB0cnVlIH0sXG4gICAgICB7IGlkOiA5LCB0ZXh0OiAn7J6Y652864K06riwKFQpJywga2V5OiBbJ0N0cmwnLCAnWCddLCBkaXNhYmxlOiB0cnVlIH0sXG4gICAgICB7IGlkOiAxMCwgdGV4dDogJ+uzteyCrChDKScsIGtleTogWydDdHJsJywgJ0MnXSwgZGlzYWJsZTogdHJ1ZSB9LFxuICAgICAgeyBpZDogMTEsIHRleHQ6ICfrtpnsl6zrhKPquLAoUCknLCBrZXk6IFsnQ3RybCcsICdWJ10sIGRpc2FibGU6IHRydWUgfSxcbiAgICAgIHsgaWQ6IDEyLCB0ZXh0OiAn7IKt7KCcKEQpJywga2V5OiBbJ0RlbCddLCBkaXNhYmxlOiB0cnVlIH0sXG4gICAgICB7IGlkOiAxMywgdGV4dDogJ0JpbmfsnLzroZwg6rKA7IOJKFMpLi4uJywga2V5OiBbJ0N0cmwnLCAnRSddLCBkaXNhYmxlOiB0cnVlIH0sXG4gICAgICB7IGlkOiAxNCwgdGV4dDogJ+ywvuq4sChGKS4uLicsIGtleTogWydDdHJsJywgJ0YnXSwgZGlzYWJsZTogdHJ1ZSB9LFxuICAgICAgeyBpZDogMTUsIHRleHQ6ICfri6TsnYwg7LC+6riwKE4pJywga2V5OiBbJ0YzJ10sIGRpc2FibGU6IHRydWUgfSxcbiAgICAgIHsgaWQ6IDE2LCB0ZXh0OiAn7J207KCEIOywvuq4sChWKScsIGtleTogWydTaGlmdCcsICdGMyddLCBkaXNhYmxlOiB0cnVlIH0sXG4gICAgICB7IGlkOiAxNywgdGV4dDogJ+uwlOq+uOq4sChSKS4uLicsIGtleTogWydDdHJsJywgJ0gnXSwgZGlzYWJsZTogdHJ1ZSB9LFxuICAgICAgeyBpZDogMTgsIHRleHQ6ICfsnbTrj5koRykuLi4nLCBrZXk6IFsnQ3RybCcsICdHJ10sIGRpc2FibGU6IHRydWUgfSxcbiAgICAgIHsgaWQ6IDE5LCB0ZXh0OiAn66qo65GQIOyEoO2DnShBKScsIGtleTogWydDdHJsJywgJ0EnXSwgZGlzYWJsZTogdHJ1ZSB9LFxuICAgICAgeyBpZDogMjAsIHRleHQ6ICfsi5zqsIQv64Kg7KecKEQpJywga2V5OiBbJ0Y1J10sIGRpc2FibGU6IHRydWUgfSxcbiAgICBdLFxuICB9LFxuICB7XG4gICAgaWQ6ICdmb3JtYXQnLFxuICAgIHRpdGxlOiAn7ISc7IudJyxcbiAgICBrZXk6ICdPJyxcbiAgICBzbG90czogW1xuICAgICAgeyBpZDogMjEsIHRleHQ6ICfsnpDrj5kg7KSEIOuwlOq/iChXKScsIGtleTogW10sIGRpc2FibGU6IHRydWUgfSxcbiAgICAgIHsgaWQ6IDIyLCB0ZXh0OiAn6riA6ry0KEYpLi4uJywga2V5OiBbXSwgZGlzYWJsZTogdHJ1ZSB9LFxuICAgIF0sXG4gIH0sXG4gIHtcbiAgICBpZDogJ3ZpZXcnLFxuICAgIHRpdGxlOiAn67O06riwJyxcbiAgICBrZXk6ICdWJyxcbiAgICBzbG90czogW1xuICAgICAgeyBpZDogMjMsIHRleHQ6ICftmZXrjIDtlZjquLAoWiknLCBrZXk6IFsnQ3RybCcsICcrJ10sIGRpc2FibGU6IHRydWUgfSxcbiAgICAgIHsgaWQ6IDI0LCB0ZXh0OiAn7LaV7IaM7ZWY6riwKFgpJywga2V5OiBbJ0N0cmwnLCAnLSddLCBkaXNhYmxlOiB0cnVlIH0sXG4gICAgICB7IGlkOiAyNSwgdGV4dDogJ+yDge2DnCDtkZzsi5zspIQoUyknLCBrZXk6IFtdLCBkaXNhYmxlOiB0cnVlIH0sXG4gICAgXSxcbiAgfSxcbiAge1xuICAgIGlkOiAnaGVscCcsXG4gICAgdGl0bGU6ICfrj4Tsm4Drp5AnLFxuICAgIGtleTogJ0gnLFxuICAgIHNsb3RzOiBbXG4gICAgICB7IGlkOiAyNiwgdGV4dDogJ+uPhOybgOunkCDrs7TquLAoSCknLCBrZXk6IFtdLCBkaXNhYmxlOiB0cnVlIH0sXG4gICAgICB7IGlkOiAyNywgdGV4dDogJ+2UvOuTnOuwsSDrs7TrgrTquLAoRiknLCBrZXk6IFtdLCBkaXNhYmxlOiB0cnVlIH0sXG4gICAgICB7IGlkOiAyOCwgdGV4dDogJ+uplOuqqOyepSDsoJXrs7QoQSknLCBrZXk6IFtdLCBkaXNhYmxlOiB0cnVlIH0sXG4gICAgXSxcbiAgfSxcbl07XG5cbmNvbnN0IHNsb3RzID0gYnV0dG9ucy5yZWR1Y2UoKGFjYywgY3VyKSA9PiB7XG4gIHJldHVybiBbLi4uYWNjLCAuLi5jdXIuc2xvdHNdO1xufSwgW10pO1xuXG5leHBvcnQgZGVmYXVsdCBidXR0b25zO1xuZXhwb3J0IHsgc2xvdHMgfTtcblxuZnVuY3Rpb24gaGFuZGxlU2F2ZUNsaWNrKCkge1xuICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdzYXZlJywgeyBidWJibGVzOiB0cnVlIH0pKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlTG9jYWxTYXZlQ2xpY2soKSB7XG4gIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ2xvY2FsU2F2ZScsIHsgYnViYmxlczogdHJ1ZSB9KSk7XG59XG4iLCJpbXBvcnQgeyBodG1sIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xuaW1wb3J0IFdlYkNvbXBvbmVudCBmcm9tICcuLi8uLi8uLi9jb3JlL1dlYkNvbXBvbmVudCc7XG5pbXBvcnQgYnV0dG9ucywgeyBzbG90cyB9IGZyb20gJy4uL2NvbnN0L2J1dHRvbnMnO1xuaW1wb3J0IE5vdGVQYWRJY29uIGZyb20gJy4uLy4uLy4uLy4uL3B1YmxpYy9ub3RlcGFkLnBuZyc7XG5pbXBvcnQgcm91dGVyIGZyb20gJy4uLy4uLy4uL2NvcmUvUm91dGVyJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTm90ZVBhZEhlYWRlciBleHRlbmRzIFdlYkNvbXBvbmVudCB7XG4gIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGFuZGxlQ2xpY2spO1xuICB9XG5cbiAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGFuZGxlQ2xpY2spO1xuICB9XG5cbiAgaW5qZWN0SFRNTCgpIHtcbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxoZWFkZXI+XG4gICAgICAgIDxzcGFuPjxpbWcgYWx0PVwibm90ZXBhZF9pY29uXCIgc3JjPSR7Tm90ZVBhZEljb259IC8+7KCc66qp7JeG7J2MIC0gV2luZG93cyDrqZTrqqjsnqU8L3NwYW4+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJ2aWV3X2J1dHRvbnNcIj5cbiAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwidmlld19idXR0b25cIiBpZD1cIm1pbmlcIj7wn5eVPC9idXR0b24+XG4gICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInZpZXdfYnV0dG9uXCIgaWQ9XCJmdWxsXCI+8J+XljwvYnV0dG9uPlxuICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJ2aWV3X2J1dHRvblwiIGlkPVwiY2xvc2VcIj7ihak8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2hlYWRlcj5cbiAgICAgIDxkaXYgY2xhc3M9XCJlZGl0X2J1dHRvbnNcIj5cbiAgICAgICAgJHtidXR0b25zXG4gICAgICAgICAgLm1hcChcbiAgICAgICAgICAgIChidXR0b24pID0+IGh0bWxgXG4gICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJlZGl0X2J1dHRvblwiPlxuICAgICAgICAgICAgICAgICR7YnV0dG9uLnRpdGxlfSg8dT4ke2J1dHRvbi5rZXl9PC91PilcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicG9wdXBcIj5cbiAgICAgICAgICAgICAgICAgICR7YnV0dG9uLnNsb3RzXG4gICAgICAgICAgICAgICAgICAgIC5tYXAoXG4gICAgICAgICAgICAgICAgICAgICAgKHNsb3QpID0+IGh0bWxgXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic3ViXCIgZGF0YS1pZD1cIiR7c2xvdC5pZH1cIiBkYXRhLWRpc2FibGU9XCIkeyEhc2xvdC5kaXNhYmxlfVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PiR7c2xvdC50ZXh0fTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAke3Nsb3Qua2V5Lmxlbmd0aCA+IDAgPyBgPGRpdj4ke3Nsb3Qua2V5LmpvaW4oJyArICcpfTwvZGl2PmAgOiAnJ31cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIGBcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAuam9pbignJyl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgYFxuICAgICAgICAgIClcbiAgICAgICAgICAuam9pbignJyl9XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICB9XG5cbiAgaGFuZGxlQ2xpY2soZSkge1xuICAgIGNvbnN0IHN1YiA9IGUudGFyZ2V0LmNsb3Nlc3QoJy5zdWInKTtcbiAgICBpZiAoc3ViKSB7XG4gICAgICBjb25zdCBzbG90SWQgPSBOdW1iZXIoc3ViLmRhdGFzZXQuaWQpO1xuICAgICAgY29uc3QgeyBvbkNsaWNrIH0gPSBzbG90cy5maW5kKChzbG90KSA9PiBzbG90LmlkID09PSBzbG90SWQpIHx8IHt9O1xuICAgICAgaWYgKG9uQ2xpY2spIG9uQ2xpY2suY2FsbCh0aGlzKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzd2l0Y2ggKGUudGFyZ2V0LmNsYXNzTmFtZSkge1xuICAgICAgY2FzZSAndmlld19idXR0b24nOlxuICAgICAgICBjbGlja1ZpZXdCdXR0b24uY2FsbCh0aGlzLCBlLnRhcmdldCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnZWRpdF9idXR0b24nOlxuICAgICAgICBzaG93UG9wdXAuY2FsbCh0aGlzLCBlLnRhcmdldCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xpY2tWaWV3QnV0dG9uKHZUYXJnZXQpIHtcbiAgICAgIHN3aXRjaCAodlRhcmdldC5pZCkge1xuICAgICAgICBjYXNlICdmdWxsJzpcbiAgICAgICAgICB0aGlzLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZSgnZnVsbHNjcmVlbicpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdtaW5pJzpcbiAgICAgICAgY2FzZSAnY2xvc2UnOlxuICAgICAgICAgIHJvdXRlci5iYWNrKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2hvd1BvcHVwKGVUYXJnZXQpIHtcbiAgICAgIGVUYXJnZXQucXVlcnlTZWxlY3RvcignLnBvcHVwJykuY2xhc3NMaXN0LnRvZ2dsZSgnc2hvdycpO1xuICAgICAgdGhpcy5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXAnKS5mb3JFYWNoKChub2RlKSA9PiB7XG4gICAgICAgIGlmIChub2RlICE9PSBlVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cCcpKSB7XG4gICAgICAgICAgbm9kZS5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0ICcuL3N0eWxlLnNjc3MnO1xuaW1wb3J0IHNhbmRib3hEQiBmcm9tICcuL2NvcmUvSW5kZXhlZERCJztcbmltcG9ydCBBcHAgZnJvbSAnLi9BcHAnO1xuaW1wb3J0IEZvb3RlciBmcm9tICcuL3ZpZXcvQ29tbW9uL0Zvb3Rlcic7XG5pbXBvcnQgSG9tZSBmcm9tICcuL3ZpZXcvSG9tZSc7XG5pbXBvcnQgVGV0cmlzIGZyb20gJy4vdmlldy9UZXRyaXMnO1xuaW1wb3J0IEZsYXBweUJpcmQgZnJvbSAnLi92aWV3L0ZsYXBweUJpcmQnO1xuaW1wb3J0IEljb25zIGZyb20gJy4vdmlldy9Db21tb24vSWNvbnMnO1xuaW1wb3J0IEljb24gZnJvbSAnLi92aWV3L0NvbW1vbi9JY29uJztcbmltcG9ydCBOb3RlUGFkIGZyb20gJy4vdmlldy9Ob3RlUGFkJztcbmltcG9ydCBOb3RlUGFkSGVhZGVyIGZyb20gJy4vdmlldy9Ob3RlUGFkL2NvbXBvbmVudHMvTm90ZVBhZEhlYWRlcic7XG5cbihhc3luYyAoKSA9PiB7XG4gIGF3YWl0IHNhbmRib3hEQi5vcGVuREIoKTtcblxuICBjdXN0b21FbGVtZW50cy5kZWZpbmUoJ215LWFwcCcsIEFwcCk7XG4gIGN1c3RvbUVsZW1lbnRzLmRlZmluZSgnbXktZm9vdGVyJywgRm9vdGVyKTtcbiAgY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdteS1ob21lJywgSG9tZSk7XG4gIGN1c3RvbUVsZW1lbnRzLmRlZmluZSgnbXktdGV0cmlzJywgVGV0cmlzKTtcbiAgY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdteS1mbGFwcHliaXJkJywgRmxhcHB5QmlyZCk7XG4gIGN1c3RvbUVsZW1lbnRzLmRlZmluZSgnbXktaWNvbnMnLCBJY29ucyk7XG4gIGN1c3RvbUVsZW1lbnRzLmRlZmluZSgnbXktaWNvbicsIEljb24pO1xuICBjdXN0b21FbGVtZW50cy5kZWZpbmUoJ215LW5vdGVwYWQnLCBOb3RlUGFkKTtcbiAgY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdteS1ub3RlcGFkLWhlYWRlcicsIE5vdGVQYWRIZWFkZXIpO1xufSkoKTtcbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZGIiLCJjb25zdHJ1Y3RvciIsImRiTmFtZSIsImRiVmVyc2lvbiIsInN0b3JlcyIsInRoaXMiLCJhc3luYyIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwicmVxdWVzdCIsIndpbmRvdyIsImluZGV4ZWREQiIsIm9wZW4iLCJvbnN1Y2Nlc3MiLCJyZXN1bHQiLCJvbmVycm9yIiwiZSIsIm9udXBncmFkZW5lZWRlZCIsImZvckVhY2giLCJzdG9yZSIsIm9iamVjdFN0b3JlTmFtZXMiLCJjb250YWlucyIsImRlbGV0ZU9iamVjdFN0b3JlIiwiY3JlYXRlT2JqZWN0U3RvcmUiLCJrZXlQYXRoIiwiYXV0b0luY3JlbWVudCIsInN0b3JlTmFtZSIsImlkIiwidHJhbnNhY3Rpb24iLCJvYmplY3RTdG9yZSIsImdldCIsImdldEFsbCIsImRhdGEiLCJwdXQiLCJkZWxldGUiLCJyZW5kZXJSYXciLCJzdHJpbmciLCJ2YWx1ZXMiLCJTdHJpbmciLCJyYXciLCJyb3V0ZXMiLCJwYXRoIiwiaHRtbCIsImxhYmVsIiwiaWNvblNyYyIsIm1haW5JY29ucyIsInJlZHVjZSIsInByZXYiLCJyb3V0ZXIiLCJnZXRMb2NhbEljb25zIiwiaWNvbiIsInRpdGxlIiwicm91dGUiLCJyZW5kZXIiLCJmaW5kIiwidmFsdWUiLCJsb2NhdGlvbiIsInBhdGhuYW1lIiwicmVwbGFjZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImlubmVySFRNTCIsInJlcGxhY2VUbyIsIm5hdmlnYXRlVG8iLCJ1cmwiLCJoaXN0b3J5IiwicHVzaFN0YXRlIiwicmVwbGFjZVN0YXRlIiwiYmFjayIsIldlYkNvbXBvbmVudCIsIkhUTUxFbGVtZW50IiwiY29ubmVjdGVkQ2FsbGJhY2siLCJpbmplY3RIVE1MIiwiQXBwIiwiaWNvbnMiLCJzdXBlciIsImFkZEV2ZW50TGlzdGVuZXIiLCJkZXRhaWwiLCJKU09OIiwic3RyaW5naWZ5IiwiRm9vdGVyIiwiaGFuZGxlQ2xpY2siLCJiaW5kIiwiam9pbiIsInRhcmdldCIsImNsb3Nlc3QiLCJkYXRhc2V0IiwiSG9tZSIsIlRldHJpcyIsIkZsYXBweUJpcmQiLCJJY29ucyIsInBhcnNlIiwiZ2V0QXR0cmlidXRlIiwiaGFuZGxlRG91YmxlQ2xpY2siLCJoYW5kbGVLZXlEb3duIiwibWFwIiwidG9nZ2xlQXR0cmlidXRlIiwicXVlcnlTZWxlY3RvckFsbCIsIm5vZGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJjaGVja2VkRWwiLCJrZXkiLCJsZW5ndGgiLCJJY29uIiwiaWNvbnNyYyIsIk5vdGVQYWQiLCJoYW5kbGVTYXZlIiwiaGFuZGxlTG9jYWxTYXZlIiwiZGlzY29ubmVjdGVkQ2FsbGJhY2siLCJyZW1vdmVFdmVudExpc3RlbmVyIiwibm90ZVBhZERhdGEiLCJnZXROb3RlUGFkRGF0YSIsImJsb2IiLCJCbG9iIiwiY29udGVudCIsInR5cGUiLCJsaW5rIiwiY3JlYXRlRWxlbWVudCIsImhyZWYiLCJVUkwiLCJjcmVhdGVPYmplY3RVUkwiLCJkb3dubG9hZCIsImNsaWNrIiwiZXJyIiwiYWxlcnQiLCJjb25zb2xlIiwiZXJyb3IiLCJzdG9wUHJvcGFnYXRpb24iLCJkaXNwYXRjaEV2ZW50IiwiQ3VzdG9tRXZlbnQiLCJidWJibGVzIiwicHJvbXB0IiwiYnV0dG9ucyIsInNsb3RzIiwidGV4dCIsImRpc2FibGUiLCJvbkNsaWNrIiwiYWNjIiwiY3VyIiwiTm90ZVBhZEhlYWRlciIsImJ1dHRvbiIsInNsb3QiLCJzdWIiLCJzbG90SWQiLCJOdW1iZXIiLCJjYWxsIiwiY2xhc3NOYW1lIiwidlRhcmdldCIsInBhcmVudEVsZW1lbnQiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJlVGFyZ2V0IiwicmVtb3ZlIiwiY3VzdG9tRWxlbWVudHMiLCJkZWZpbmUiXSwic291cmNlUm9vdCI6IiJ9