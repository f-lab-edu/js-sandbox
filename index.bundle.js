(()=>{"use strict";var e="/js-sandbox/";const t=new class{db;constructor(e,t,n){this.dbName=e,this.dbVersion=t,this.stores=n}async openDB(){return new Promise(((e,t)=>{const n=window.indexedDB.open(this.dbName,this.dbVersion);n.onsuccess=()=>{this.db=n.result,e()},n.onerror=e=>{t(e)},n.onupgradeneeded=()=>{this.db=n.result,this.stores.forEach((e=>{this.db.objectStoreNames.contains(e)||this.db.createObjectStore(e,{keyPath:"id"})}))}}))}async getData(e,t){return new Promise(((n,s)=>{const a=this.db.transaction(e,"readonly").objectStore(e).get(t);a.onsuccess=()=>{n(a.result)},a.onerror=e=>{s(e)}}))}async getAllData(e){return new Promise(((t,n)=>{const s=this.db.transaction(e,"readonly").objectStore(e).getAll();s.onsuccess=()=>{t(s.result)},s.onerror=e=>{n(e)}}))}async upsertData(e,t){return new Promise(((n,s)=>{const a=this.db.transaction(e,"readwrite").objectStore(e).put(t);a.onsuccess=()=>{n(a.result)},a.onerror=e=>{s(e)}}))}async deleteData(e,t){return new Promise(((n,s)=>{const a=this.db.transaction(e,"readwrite").objectStore(e).delete(t);a.onsuccess=()=>{n(a.result)},a.onerror=e=>{s(e)}}))}}("sandbox",1,["notes"]),n=(e,...t)=>String.raw(e,...t);class s extends HTMLElement{constructor(){super(),this.template=document.createElement("template"),this.getShadowStyle()&&this.getShadowHTML()?(this.attachShadow({mode:"open"}),this.template.innerHTML=n`
        <style>
          ${this.getShadowStyle()}
        </style>
        ${this.getShadowHTML()}
      `):this.template.innerHTML=this.getHTML()}connectedCallback(){this.render()}render(){this.shadowRoot?this.shadowRoot.append(this.template.content.cloneNode(!0)):this.append(this.template.content.cloneNode(!0))}getHTML(){return""}getShadowStyle(){return""}getShadowHTML(){return""}}const a=e+"2a583f97b153f7da7d41.png",i=[{path:"/",html:n`<my-home></my-home>`,label:"Home",iconSrc:null},{path:"/tetris",html:n`<my-tetris></my-tetris>`,label:"Tetris",iconSrc:e+"71c0bea6462001116fcf.png"},{path:"/flappybird",html:n`<my-flappybird></my-flappybird>`,label:"Flappy&nbsp;Bird",iconSrc:e+"39b884119b49599495ed.png"},{path:"/notepad",html:n`<my-notepad></my-notepad>`,label:"Note&nbsp;Pad",iconSrc:a}],o=i.reduce(((e,t)=>{const{path:n,label:s,iconSrc:a}=t;return"/"===t.path?e:[...e,{path:n,label:s,iconSrc:a}]}),[]),l=i,r=new class{constructor(e){this.routes=e}render(){const e=this.routes.find((e=>e.path===window.location.pathname.replace("/js-sandbox","")));e?document.querySelector("#page").innerHTML=e.html:this.replaceTo("/")}navigateTo(e){window.history.pushState(null,null,e),this.render()}replaceTo(e){window.history.replaceState(null,null,e),this.render()}back(){window.history.back(),this.render()}}(l),d=[{id:"file",title:"ÌååÏùº",key:"F",slots:[{text:"ÏÉàÎ°ú&nbsp;ÎßåÎì§Í∏∞(N)",key:["Ctrl","N"],disable:!0},{text:"ÏÉà&nbsp;Ï∞Ω(W)",key:["Ctrl","Shift","N"],disable:!0},{text:"Ï†ÄÏû•(S)",key:["Ctrl","S"]},{text:"ÏÇ≠Ï†ú(D)",key:["Ctrl","Shift","S"],disable:!0},{text:"ÌéòÏù¥ÏßÄ&nbsp;ÏÑ§Ï†ï(U)...",key:[],disable:!0},{text:"Ïù∏ÏáÑ(P)...",key:["Ctrl","P"],disable:!0},{text:"ÎÅùÎÇ¥Í∏∞(X)",key:[],disable:!0}]},{id:"edit",title:"Ìé∏Ïßë",key:"E",slots:[{text:"Ïã§Ìñâ&nbsp;Ï∑®ÏÜå(U)",key:["Ctrl","Z"],disable:!0},{text:"ÏûòÎùºÎÇ¥Í∏∞(T)",key:["Ctrl","X"],disable:!0},{text:"Î≥µÏÇ¨(C)",key:["Ctrl","C"],disable:!0},{text:"Î∂ôÏó¨ÎÑ£Í∏∞(P)",key:["Ctrl","V"],disable:!0},{text:"ÏÇ≠Ï†ú(D)",key:["Del"],disable:!0},{text:"BingÏúºÎ°ú&nbsp;Í≤ÄÏÉâ(S)...",key:["Ctrl","E"],disable:!0},{text:"Ï∞æÍ∏∞(F)...",key:["Ctrl","F"],disable:!0},{text:"Îã§Ïùå&nbsp;Ï∞æÍ∏∞(N)",key:["F3"],disable:!0},{text:"Ïù¥Ï†Ñ&nbsp;Ï∞æÍ∏∞(V)",key:["Shift","F3"],disable:!0},{text:"Î∞îÍæ∏Í∏∞(R)...",key:["Ctrl","H"],disable:!0},{text:"Ïù¥Îèô(G)...",key:["Ctrl","G"],disable:!0},{text:"Î™®Îëê&nbsp;ÏÑ†ÌÉù(A)",key:["Ctrl","A"],disable:!0},{text:"ÏãúÍ∞Ñ/ÎÇ†Ïßú(D)",key:["F5"],disable:!0}]},{id:"format",title:"ÏÑúÏãù",key:"O",slots:[{text:"ÏûêÎèô&nbsp;Ï§Ñ&nbsp;Î∞îÍøà(W)",key:[],disable:!0},{text:"Í∏ÄÍº¥(F)...",key:[],disable:!0}]},{id:"view",title:"Î≥¥Í∏∞",key:"V",slots:[{text:"ÌôïÎåÄÌïòÍ∏∞(Z)",key:["Ctrl","+"],disable:!0},{text:"Ï∂ïÏÜåÌïòÍ∏∞(X)",key:["Ctrl","-"],disable:!0},{text:"ÏÉÅÌÉú&nbsp;ÌëúÏãúÏ§Ñ(S)",key:[],disable:!0}]},{id:"help",title:"ÎèÑÏõÄÎßê",key:"H",slots:[{text:"ÎèÑÏõÄÎßê&nbsp;Î≥¥Í∏∞(H)",key:[],disable:!0},{text:"ÌîºÎìúÎ∞±&nbsp;Î≥¥ÎÇ¥Í∏∞(F)",key:[],disable:!0},{text:"Î©îÎ™®Ïû•&nbsp;Ï†ïÎ≥¥(A)",key:[],disable:!0}]}],c=e+"59cb65e4f8f2627d6c2c.png",p=e+"bc8d31a2338dd0b3f68a.png";t.openDB(),customElements.define("my-app",class extends s{constructor(){super(),r.render()}connectedCallback(){super.connectedCallback(),window.addEventListener("popstate",(()=>r.render()))}getHTML(){return n`
      <my-icons slot="icons" tabindex="-1"></my-icons>
      <my-footer slot="footer"></my-footer>
    `}}),customElements.define("my-footer",class extends s{connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.handleClick.bind(this))}getHTML(){return n`
      <img alt="window_logo" src=${c} class="window_icon" />
      <div class="input_box">
        <img alt="search" src=${p} class="window_icon" /><input type="text" placeholder="Ï∞æÍ∏∞" />
      </div>
      ${o.map((e=>n` <my-icon data-path="${e.path}" data-iconSrc="${e.iconSrc}"></my-icon> `)).join("")}
    `}handleClick(e){if(!e.target.closest("my-icon"))return;const t=e.target.closest("my-icon");r.navigateTo(t.dataset.path)}}),customElements.define("my-home",class extends s{}),customElements.define("my-tetris",class extends s{getHTML(){return n`
      <h1>Tetris</h1>
      <p>You are viewing the Tetris component!</p>
    `}}),customElements.define("my-flappybird",class extends s{getHTML(){return n`
      <h1>Flappy Bird</h1>
      <p>You are viewing the Flappy Bird component!</p>
      <p>You are viewing the Flappy Bird component!</p>
      <p>You are viewing the Flappy Bird component!</p>
      <p>You are viewing the Flappy Bird component!</p>
      <p>You are viewing the Flappy Bird component!</p>
      <p>You are viewing the Flappy Bird component!</p>
    `}}),customElements.define("my-icons",class extends s{connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.handleClick.bind(this)),this.addEventListener("dblclick",this.handleDoubleClick.bind(this)),this.addEventListener("keydown",this.handleKeyDown.bind(this))}getHTML(){return n`
      ${o.map((e=>n`
            <my-icon data-path=${e.path} data-label=${e.label} data-iconSrc=${e.iconSrc}></my-icon>
          `)).join("")}
    `}handleClick(e){if(!e.target.closest("my-icon"))return;const t=e.target.closest("my-icon");t.toggleAttribute("checked"),this.querySelectorAll("my-icon").forEach((e=>{e!==t&&e.removeAttribute("checked")}))}handleDoubleClick(e){if(!e.target.closest("my-icon"))return;const t=e.target.closest("my-icon");r.navigateTo(t.dataset.path)}handleKeyDown(e){const t=this.querySelectorAll("my-icon[checked]");if("Enter"===e.key){if(t.length>1)return;if(!t)return;r.navigateTo(t[0].dataset.path)}}}),customElements.define("my-icon",class extends s{getHTML(){const{label:e,iconsrc:t}=this.dataset;return n`
      <img alt="${e}_icon" src=${t} />
      ${e?`<span class="icon_name">${e}</span>`:""}
    `}}),customElements.define("my-notepad",class extends s{connectedCallback(){super.connectedCallback()}getHTML(){return n`
      <my-notepad-header></my-notepad-header>
      <my-notepad-body></my-notepad-body>
    `}}),customElements.define("my-notepad-header",class extends s{connectedCallback(){super.connectedCallback()}getHTML(){return n`
      <header>
        <span><img alt="notepad_icon" src=${a} />Ï†úÎ™©ÏóÜÏùå - Windows Î©îÎ™®Ïû•</span>
        <div class="view_buttons">
          <button id="mini">üóï</button>
          <button id="full">üóñ</button>
          <button id="close">‚Ö©</button>
        </div>
      </header>
      <div class="edit_buttons">
        ${d.map((e=>n`
                <my-notepad-button
                  id=${e.id}
                  data-title=${e.title}
                  data-key=${e.key}
                  data-slots=${JSON.stringify(e.slots)}
                ></my-notepad-button>
              `)).join("")}
      </div>
    `}}),customElements.define("my-notepad-body",class extends s{getHTML(){return n`<textarea></textarea>`}}),customElements.define("my-notepad-button",class extends s{getHTML(){const{title:e,key:t,slots:s}=this.dataset;return n`
      ${e}(<u>${t}</u>)
      <div class="popup">
        ${JSON.parse(s).map((e=>n`
              <div class="slot" data-disable=${!!e.disable}>
                <div>${e.text}</div>
                ${e.key.length>0?`<div>${e.key.join(" + ")}</div>`:""}
              </div>
            `)).join("")}
      </div>
    `}})})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxPQUFPLENBQUk7UUFDUGQsUUFBWUM7O1VBRVZ3QixLQUFLRSxNQUFNekIsR0FDVjBCLEtBQ0VDLEdBQVMsQ0FBSTtpREFDdUJBLEVBQUt6Qjt1QkFDL0J5QixFQUFLMUI7a0JBQ1YwQixFQUFLNUIsSUFBSXFCLE9BQVMsRUFBSSxRQUFRTyxFQUFLNUIsSUFBSVUsS0FBSyxlQUFpQjs7Z0JBSXBFQSxLQUFLOztLQUdkLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9qYXZhc2NyaXB0LXNhbmRib3gvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vamF2YXNjcmlwdC1zYW5kYm94L3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL2phdmFzY3JpcHQtc2FuZGJveC8uL3NyYy9jb3JlL0luZGV4ZWREQi5qcyIsIndlYnBhY2s6Ly9qYXZhc2NyaXB0LXNhbmRib3gvLi9zcmMvdXRpbHMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vamF2YXNjcmlwdC1zYW5kYm94Ly4vc3JjL2NvcmUvV2ViQ29tcG9uZW50LmpzIiwid2VicGFjazovL2phdmFzY3JpcHQtc2FuZGJveC8uL3NyYy91dGlscy9yb3V0ZXMuanMiLCJ3ZWJwYWNrOi8vamF2YXNjcmlwdC1zYW5kYm94Ly4vc3JjL2NvcmUvUm91dGVyLmpzIiwid2VicGFjazovL2phdmFzY3JpcHQtc2FuZGJveC8uL3NyYy92aWV3L05vdGVQYWQvY29uc3QvYnV0dG9ucy5qcyIsIndlYnBhY2s6Ly9qYXZhc2NyaXB0LXNhbmRib3gvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vamF2YXNjcmlwdC1zYW5kYm94Ly4vc3JjL0FwcC5qcyIsIndlYnBhY2s6Ly9qYXZhc2NyaXB0LXNhbmRib3gvLi9zcmMvdmlldy9Db21tb24vRm9vdGVyLmpzIiwid2VicGFjazovL2phdmFzY3JpcHQtc2FuZGJveC8uL3NyYy92aWV3L0hvbWUvaW5kZXguanMiLCJ3ZWJwYWNrOi8vamF2YXNjcmlwdC1zYW5kYm94Ly4vc3JjL3ZpZXcvVGV0cmlzL2luZGV4LmpzIiwid2VicGFjazovL2phdmFzY3JpcHQtc2FuZGJveC8uL3NyYy92aWV3L0ZsYXBweUJpcmQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vamF2YXNjcmlwdC1zYW5kYm94Ly4vc3JjL3ZpZXcvQ29tbW9uL0ljb25zLmpzIiwid2VicGFjazovL2phdmFzY3JpcHQtc2FuZGJveC8uL3NyYy92aWV3L0NvbW1vbi9JY29uLmpzIiwid2VicGFjazovL2phdmFzY3JpcHQtc2FuZGJveC8uL3NyYy92aWV3L05vdGVQYWQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vamF2YXNjcmlwdC1zYW5kYm94Ly4vc3JjL3ZpZXcvTm90ZVBhZC9jb21wb25lbnRzL05vdGVQYWRIZWFkZXIuanMiLCJ3ZWJwYWNrOi8vamF2YXNjcmlwdC1zYW5kYm94Ly4vc3JjL3ZpZXcvTm90ZVBhZC9jb21wb25lbnRzL05vdGVQYWRCb2R5LmpzIiwid2VicGFjazovL2phdmFzY3JpcHQtc2FuZGJveC8uL3NyYy92aWV3L05vdGVQYWQvY29tcG9uZW50cy9Ob3RlUGFkSGVhZGVyQnV0dG9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIi9qcy1zYW5kYm94L1wiOyIsImNsYXNzIEluZGV4ZWREQiB7XHJcbiAgZGI7XHJcblxyXG4gIC8qKlxyXG4gICAqIOyDneyEseyekFxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBkYk5hbWVcclxuICAgKiBAcGFyYW0ge251bWJlcn0gZGJWZXJzaW9uXHJcbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gc3RvcmVzXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoZGJOYW1lLCBkYlZlcnNpb24sIHN0b3Jlcykge1xyXG4gICAgdGhpcy5kYk5hbWUgPSBkYk5hbWU7XHJcbiAgICB0aGlzLmRiVmVyc2lvbiA9IGRiVmVyc2lvbjtcclxuICAgIHRoaXMuc3RvcmVzID0gc3RvcmVzO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogREIg7Jik7ZSIIOuplOyEnOuTnFxyXG4gICAqIEByZXR1cm5zIHt2b2lkfVxyXG4gICAqL1xyXG4gIGFzeW5jIG9wZW5EQigpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSB3aW5kb3cuaW5kZXhlZERCLm9wZW4odGhpcy5kYk5hbWUsIHRoaXMuZGJWZXJzaW9uKTtcclxuXHJcbiAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuZGIgPSByZXF1ZXN0LnJlc3VsdDtcclxuICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICByZXF1ZXN0Lm9uZXJyb3IgPSAoZSkgPT4ge1xyXG4gICAgICAgIHJlamVjdChlKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHJlcXVlc3Qub251cGdyYWRlbmVlZGVkID0gKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuZGIgPSByZXF1ZXN0LnJlc3VsdDtcclxuXHJcbiAgICAgICAgdGhpcy5zdG9yZXMuZm9yRWFjaCgoc3RvcmUpID0+IHtcclxuICAgICAgICAgIGlmICghdGhpcy5kYi5vYmplY3RTdG9yZU5hbWVzLmNvbnRhaW5zKHN0b3JlKSkge1xyXG4gICAgICAgICAgICB0aGlzLmRiLmNyZWF0ZU9iamVjdFN0b3JlKHN0b3JlLCB7IGtleVBhdGg6ICdpZCcgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH07XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOuNsOydtO2EsCDsobDtmowg66mU7ISc65OcXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHN0b3JlTmFtZVxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpZFxyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPG9iamVjdD59XHJcbiAgICovXHJcbiAgYXN5bmMgZ2V0RGF0YShzdG9yZU5hbWUsIGlkKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5kYi50cmFuc2FjdGlvbihzdG9yZU5hbWUsICdyZWFkb25seScpLm9iamVjdFN0b3JlKHN0b3JlTmFtZSkuZ2V0KGlkKTtcclxuXHJcbiAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gKCkgPT4ge1xyXG4gICAgICAgIHJlc29sdmUocmVxdWVzdC5yZXN1bHQpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgcmVxdWVzdC5vbmVycm9yID0gKGUpID0+IHtcclxuICAgICAgICByZWplY3QoZSk7XHJcbiAgICAgIH07XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOuNsOydtO2EsCDsoITssrQg7KGw7ZqMIOuplOyEnOuTnFxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzdG9yZU5hbWVcclxuICAgKiBAcmV0dXJucyB7b2JqZWN0W119XHJcbiAgICovXHJcbiAgYXN5bmMgZ2V0QWxsRGF0YShzdG9yZU5hbWUpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLmRiLnRyYW5zYWN0aW9uKHN0b3JlTmFtZSwgJ3JlYWRvbmx5Jykub2JqZWN0U3RvcmUoc3RvcmVOYW1lKS5nZXRBbGwoKTtcclxuXHJcbiAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gKCkgPT4ge1xyXG4gICAgICAgIHJlc29sdmUocmVxdWVzdC5yZXN1bHQpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgcmVxdWVzdC5vbmVycm9yID0gKGUpID0+IHtcclxuICAgICAgICByZWplY3QoZSk7XHJcbiAgICAgIH07XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOuNsOydtO2EsCDstpTqsIAg66mU7ISc65OcXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHN0b3JlTmFtZVxyXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBkYXRhXHJcbiAgICogQHJldHVybnMge1Byb21pc2U8b2JqZWN0Pn1cclxuICAgKi9cclxuICBhc3luYyB1cHNlcnREYXRhKHN0b3JlTmFtZSwgZGF0YSkge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgY29uc3QgcmVxdWVzdCA9IHRoaXMuZGIudHJhbnNhY3Rpb24oc3RvcmVOYW1lLCAncmVhZHdyaXRlJykub2JqZWN0U3RvcmUoc3RvcmVOYW1lKS5wdXQoZGF0YSk7XHJcblxyXG4gICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9ICgpID0+IHtcclxuICAgICAgICByZXNvbHZlKHJlcXVlc3QucmVzdWx0KTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHJlcXVlc3Qub25lcnJvciA9IChlKSA9PiB7XHJcbiAgICAgICAgcmVqZWN0KGUpO1xyXG4gICAgICB9O1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDrjbDsnbTthLAg7IKt7KCcIOuplOyEnOuTnFxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzdG9yZU5hbWVcclxuICAgKiBAcGFyYW0ge251bWJlcn0gaWRcclxuICAgKi9cclxuICBhc3luYyBkZWxldGVEYXRhKHN0b3JlTmFtZSwgaWQpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLmRiLnRyYW5zYWN0aW9uKHN0b3JlTmFtZSwgJ3JlYWR3cml0ZScpLm9iamVjdFN0b3JlKHN0b3JlTmFtZSkuZGVsZXRlKGlkKTtcclxuXHJcbiAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gKCkgPT4ge1xyXG4gICAgICAgIHJlc29sdmUocmVxdWVzdC5yZXN1bHQpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgcmVxdWVzdC5vbmVycm9yID0gKGUpID0+IHtcclxuICAgICAgICByZWplY3QoZSk7XHJcbiAgICAgIH07XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbmNvbnN0IHNhbmRib3hEQiA9IG5ldyBJbmRleGVkREIoJ3NhbmRib3gnLCAxLCBbJ25vdGVzJ10pO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgc2FuZGJveERCO1xyXG4iLCJjb25zdCByZW5kZXJSYXcgPSAoc3RyaW5nLCAuLi52YWx1ZXMpID0+IHtcbiAgcmV0dXJuIFN0cmluZy5yYXcoc3RyaW5nLCAuLi52YWx1ZXMpO1xufTtcblxuZXhwb3J0IHsgcmVuZGVyUmF3IGFzIGh0bWwsIHJlbmRlclJhdyBhcyBjc3MgfTtcbiIsImltcG9ydCB7IGh0bWwgfSBmcm9tICcuLi91dGlscy91dGlscyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXZWJDb21wb25lbnQgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICBzdXBlcigpO1xyXG4gICAgdGhpcy50ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJyk7XHJcblxyXG4gICAgaWYgKHRoaXMuZ2V0U2hhZG93U3R5bGUoKSAmJiB0aGlzLmdldFNoYWRvd0hUTUwoKSkge1xyXG4gICAgICB0aGlzLmF0dGFjaFNoYWRvdyh7IG1vZGU6ICdvcGVuJyB9KTtcclxuICAgICAgdGhpcy50ZW1wbGF0ZS5pbm5lckhUTUwgPSBodG1sYFxyXG4gICAgICAgIDxzdHlsZT5cclxuICAgICAgICAgICR7dGhpcy5nZXRTaGFkb3dTdHlsZSgpfVxyXG4gICAgICAgIDwvc3R5bGU+XHJcbiAgICAgICAgJHt0aGlzLmdldFNoYWRvd0hUTUwoKX1cclxuICAgICAgYDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMudGVtcGxhdGUuaW5uZXJIVE1MID0gdGhpcy5nZXRIVE1MKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcclxuICAgIHRoaXMucmVuZGVyKCk7XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICBpZiAodGhpcy5zaGFkb3dSb290KSB7XHJcbiAgICAgIHRoaXMuc2hhZG93Um9vdC5hcHBlbmQodGhpcy50ZW1wbGF0ZS5jb250ZW50LmNsb25lTm9kZSh0cnVlKSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmFwcGVuZCh0aGlzLnRlbXBsYXRlLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldEhUTUwoKSB7XHJcbiAgICByZXR1cm4gYGA7XHJcbiAgfVxyXG5cclxuICAvLyBzaGFkb3dSb290IGNzcyDsoJXsnZhcclxuICBnZXRTaGFkb3dTdHlsZSgpIHtcclxuICAgIHJldHVybiAnJztcclxuICB9XHJcblxyXG4gIC8vIHNoYWRvd1Jvb3QgaHRtbCDsoJXsnZhcclxuICBnZXRTaGFkb3dIVE1MKCkge1xyXG4gICAgcmV0dXJuICcnO1xyXG4gIH1cclxuXHJcbiAgLy8g7J2067Kk7Yq4IOygleydmFxyXG59XHJcbiIsImltcG9ydCB7IGh0bWwgfSBmcm9tICcuL3V0aWxzJztcbmltcG9ydCB0ZXRyaXMgZnJvbSAnLi4vLi4vcHVibGljL3RldHJpcy5wbmcnO1xuaW1wb3J0IGZsYXBweUJpcmQgZnJvbSAnLi4vLi4vcHVibGljL2ZsYXBweUJpcmQucG5nJztcbmltcG9ydCBub3RlcGFkIGZyb20gJy4uLy4uL3B1YmxpYy9ub3RlcGFkLnBuZyc7XG5cbmNvbnN0IHJvdXRlcyA9IFtcbiAge1xuICAgIHBhdGg6ICcvJyxcbiAgICBodG1sOiBodG1sYDxteS1ob21lPjwvbXktaG9tZT5gLFxuICAgIGxhYmVsOiAnSG9tZScsXG4gICAgaWNvblNyYzogbnVsbCxcbiAgfSxcbiAge1xuICAgIHBhdGg6ICcvdGV0cmlzJyxcbiAgICBodG1sOiBodG1sYDxteS10ZXRyaXM+PC9teS10ZXRyaXM+YCxcbiAgICBsYWJlbDogJ1RldHJpcycsXG4gICAgaWNvblNyYzogdGV0cmlzLFxuICB9LFxuICB7XG4gICAgcGF0aDogJy9mbGFwcHliaXJkJyxcbiAgICBodG1sOiBodG1sYDxteS1mbGFwcHliaXJkPjwvbXktZmxhcHB5YmlyZD5gLFxuICAgIGxhYmVsOiAnRmxhcHB5Jm5ic3A7QmlyZCcsXG4gICAgaWNvblNyYzogZmxhcHB5QmlyZCxcbiAgfSxcbiAge1xuICAgIHBhdGg6ICcvbm90ZXBhZCcsXG4gICAgaHRtbDogaHRtbGA8bXktbm90ZXBhZD48L215LW5vdGVwYWQ+YCxcbiAgICBsYWJlbDogJ05vdGUmbmJzcDtQYWQnLFxuICAgIGljb25TcmM6IG5vdGVwYWQsXG4gIH0sXG5dO1xuXG5jb25zdCBpY29ucyA9IHJvdXRlcy5yZWR1Y2UoKHByZXYsIHJvdXRlcikgPT4ge1xuICBjb25zdCB7IHBhdGgsIGxhYmVsLCBpY29uU3JjIH0gPSByb3V0ZXI7XG4gIGlmIChyb3V0ZXIucGF0aCA9PT0gJy8nKSByZXR1cm4gcHJldjtcbiAgcmV0dXJuIFsuLi5wcmV2LCB7IHBhdGgsIGxhYmVsLCBpY29uU3JjIH1dO1xufSwgW10pO1xuXG5leHBvcnQgZGVmYXVsdCByb3V0ZXM7XG5leHBvcnQgeyBpY29ucyB9O1xuIiwiaW1wb3J0IHJvdXRlcyBmcm9tICcuLi91dGlscy9yb3V0ZXMnO1xuXG5jb25zdCBCQVNFX1VSTCA9ICcvanMtc2FuZGJveCc7XG5cbmNsYXNzIFJvdXRlciB7XG4gIGNvbnN0cnVjdG9yKHJvdXRlKSB7XG4gICAgdGhpcy5yb3V0ZXMgPSByb3V0ZTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCByb3V0ZSA9IHRoaXMucm91dGVzLmZpbmQoKHZhbHVlKSA9PiB2YWx1ZS5wYXRoID09PSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUucmVwbGFjZShCQVNFX1VSTCwgJycpKTtcblxuICAgIGlmICghcm91dGUpIHtcbiAgICAgIHRoaXMucmVwbGFjZVRvKCcvJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BhZ2UnKS5pbm5lckhUTUwgPSByb3V0ZS5odG1sO1xuICB9XG5cbiAgbmF2aWdhdGVUbyh1cmwpIHtcbiAgICB3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUobnVsbCwgbnVsbCwgdXJsKTtcbiAgICB0aGlzLnJlbmRlcigpO1xuICB9XG5cbiAgcmVwbGFjZVRvKHVybCkge1xuICAgIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZShudWxsLCBudWxsLCB1cmwpO1xuICAgIHRoaXMucmVuZGVyKCk7XG4gIH1cblxuICBiYWNrKCkge1xuICAgIHdpbmRvdy5oaXN0b3J5LmJhY2soKTtcbiAgICB0aGlzLnJlbmRlcigpO1xuICB9XG59XG5cbmNvbnN0IHJvdXRlciA9IG5ldyBSb3V0ZXIocm91dGVzKTtcblxuZXhwb3J0IGRlZmF1bHQgcm91dGVyO1xuIiwiY29uc3QgYnV0dG9ucyA9IFtcbiAge1xuICAgIGlkOiAnZmlsZScsXG4gICAgdGl0bGU6ICftjIzsnbwnLFxuICAgIGtleTogJ0YnLFxuICAgIHNsb3RzOiBbXG4gICAgICB7IHRleHQ6ICfsg4jroZwmbmJzcDvrp4zrk6TquLAoTiknLCBrZXk6IFsnQ3RybCcsICdOJ10sIGRpc2FibGU6IHRydWUgfSxcbiAgICAgIHsgdGV4dDogJ+yDiCZuYnNwO+ywvShXKScsIGtleTogWydDdHJsJywgJ1NoaWZ0JywgJ04nXSwgZGlzYWJsZTogdHJ1ZSB9LFxuICAgICAgeyB0ZXh0OiAn7KCA7J6lKFMpJywga2V5OiBbJ0N0cmwnLCAnUyddIH0sXG4gICAgICB7IHRleHQ6ICfsgq3soJwoRCknLCBrZXk6IFsnQ3RybCcsICdTaGlmdCcsICdTJ10sIGRpc2FibGU6IHRydWUgfSxcbiAgICAgIHsgdGV4dDogJ+2OmOydtOyngCZuYnNwO+yEpOyglShVKS4uLicsIGtleTogW10sIGRpc2FibGU6IHRydWUgfSxcbiAgICAgIHsgdGV4dDogJ+yduOyHhChQKS4uLicsIGtleTogWydDdHJsJywgJ1AnXSwgZGlzYWJsZTogdHJ1ZSB9LFxuICAgICAgeyB0ZXh0OiAn64Gd64K06riwKFgpJywga2V5OiBbXSwgZGlzYWJsZTogdHJ1ZSB9LFxuICAgIF0sXG4gIH0sXG4gIHtcbiAgICBpZDogJ2VkaXQnLFxuICAgIHRpdGxlOiAn7Y647KeRJyxcbiAgICBrZXk6ICdFJyxcbiAgICBzbG90czogW1xuICAgICAgeyB0ZXh0OiAn7Iuk7ZaJJm5ic3A77Leo7IaMKFUpJywga2V5OiBbJ0N0cmwnLCAnWiddLCBkaXNhYmxlOiB0cnVlIH0sXG4gICAgICB7IHRleHQ6ICfsnpjrnbzrgrTquLAoVCknLCBrZXk6IFsnQ3RybCcsICdYJ10sIGRpc2FibGU6IHRydWUgfSxcbiAgICAgIHsgdGV4dDogJ+uzteyCrChDKScsIGtleTogWydDdHJsJywgJ0MnXSwgZGlzYWJsZTogdHJ1ZSB9LFxuICAgICAgeyB0ZXh0OiAn67aZ7Jes64Sj6riwKFApJywga2V5OiBbJ0N0cmwnLCAnViddLCBkaXNhYmxlOiB0cnVlIH0sXG4gICAgICB7IHRleHQ6ICfsgq3soJwoRCknLCBrZXk6IFsnRGVsJ10sIGRpc2FibGU6IHRydWUgfSxcbiAgICAgIHsgdGV4dDogJ0JpbmfsnLzroZwmbmJzcDvqsoDsg4koUykuLi4nLCBrZXk6IFsnQ3RybCcsICdFJ10sIGRpc2FibGU6IHRydWUgfSxcbiAgICAgIHsgdGV4dDogJ+ywvuq4sChGKS4uLicsIGtleTogWydDdHJsJywgJ0YnXSwgZGlzYWJsZTogdHJ1ZSB9LFxuICAgICAgeyB0ZXh0OiAn64uk7J2MJm5ic3A77LC+6riwKE4pJywga2V5OiBbJ0YzJ10sIGRpc2FibGU6IHRydWUgfSxcbiAgICAgIHsgdGV4dDogJ+ydtOyghCZuYnNwO+ywvuq4sChWKScsIGtleTogWydTaGlmdCcsICdGMyddLCBkaXNhYmxlOiB0cnVlIH0sXG4gICAgICB7IHRleHQ6ICfrsJTqvrjquLAoUikuLi4nLCBrZXk6IFsnQ3RybCcsICdIJ10sIGRpc2FibGU6IHRydWUgfSxcbiAgICAgIHsgdGV4dDogJ+ydtOuPmShHKS4uLicsIGtleTogWydDdHJsJywgJ0cnXSwgZGlzYWJsZTogdHJ1ZSB9LFxuICAgICAgeyB0ZXh0OiAn66qo65GQJm5ic3A77ISg7YOdKEEpJywga2V5OiBbJ0N0cmwnLCAnQSddLCBkaXNhYmxlOiB0cnVlIH0sXG4gICAgICB7IHRleHQ6ICfsi5zqsIQv64Kg7KecKEQpJywga2V5OiBbJ0Y1J10sIGRpc2FibGU6IHRydWUgfSxcbiAgICBdLFxuICB9LFxuICB7XG4gICAgaWQ6ICdmb3JtYXQnLFxuICAgIHRpdGxlOiAn7ISc7IudJyxcbiAgICBrZXk6ICdPJyxcbiAgICBzbG90czogW1xuICAgICAgeyB0ZXh0OiAn7J6Q64+ZJm5ic3A77KSEJm5ic3A767CU6r+IKFcpJywga2V5OiBbXSwgZGlzYWJsZTogdHJ1ZSB9LFxuICAgICAgeyB0ZXh0OiAn6riA6ry0KEYpLi4uJywga2V5OiBbXSwgZGlzYWJsZTogdHJ1ZSB9LFxuICAgIF0sXG4gIH0sXG4gIHtcbiAgICBpZDogJ3ZpZXcnLFxuICAgIHRpdGxlOiAn67O06riwJyxcbiAgICBrZXk6ICdWJyxcbiAgICBzbG90czogW1xuICAgICAgeyB0ZXh0OiAn7ZmV64yA7ZWY6riwKFopJywga2V5OiBbJ0N0cmwnLCAnKyddLCBkaXNhYmxlOiB0cnVlIH0sXG4gICAgICB7IHRleHQ6ICfstpXshoztlZjquLAoWCknLCBrZXk6IFsnQ3RybCcsICctJ10sIGRpc2FibGU6IHRydWUgfSxcbiAgICAgIHsgdGV4dDogJ+yDge2DnCZuYnNwO+2RnOyLnOykhChTKScsIGtleTogW10sIGRpc2FibGU6IHRydWUgfSxcbiAgICBdLFxuICB9LFxuICB7XG4gICAgaWQ6ICdoZWxwJyxcbiAgICB0aXRsZTogJ+uPhOybgOunkCcsXG4gICAga2V5OiAnSCcsXG4gICAgc2xvdHM6IFtcbiAgICAgIHsgdGV4dDogJ+uPhOybgOunkCZuYnNwO+uztOq4sChIKScsIGtleTogW10sIGRpc2FibGU6IHRydWUgfSxcbiAgICAgIHsgdGV4dDogJ+2UvOuTnOuwsSZuYnNwO+uztOuCtOq4sChGKScsIGtleTogW10sIGRpc2FibGU6IHRydWUgfSxcbiAgICAgIHsgdGV4dDogJ+uplOuqqOyepSZuYnNwO+ygleuztChBKScsIGtleTogW10sIGRpc2FibGU6IHRydWUgfSxcbiAgICBdLFxuICB9LFxuXTtcblxuZXhwb3J0IGRlZmF1bHQgYnV0dG9ucztcbiIsImltcG9ydCAnLi9zdHlsZS5zY3NzJztcclxuaW1wb3J0IHNhbmRib3hEQiBmcm9tICcuL2NvcmUvSW5kZXhlZERCJztcclxuaW1wb3J0IEhvbWUgZnJvbSAnLi92aWV3L0hvbWUnO1xyXG5pbXBvcnQgVGV0cmlzIGZyb20gJy4vdmlldy9UZXRyaXMnO1xyXG5pbXBvcnQgRmxhcHB5QmlyZCBmcm9tICcuL3ZpZXcvRmxhcHB5QmlyZCc7XHJcbmltcG9ydCBJY29uIGZyb20gJy4vdmlldy9Db21tb24vSWNvbic7XHJcbmltcG9ydCBBcHAgZnJvbSAnLi9BcHAnO1xyXG5pbXBvcnQgTm90ZVBhZCBmcm9tICcuL3ZpZXcvTm90ZVBhZCc7XHJcbmltcG9ydCBOb3RlUGFkSGVhZGVyIGZyb20gJy4vdmlldy9Ob3RlUGFkL2NvbXBvbmVudHMvTm90ZVBhZEhlYWRlcic7XHJcbmltcG9ydCBOb3RlUGFkQm9keSBmcm9tICcuL3ZpZXcvTm90ZVBhZC9jb21wb25lbnRzL05vdGVQYWRCb2R5JztcclxuaW1wb3J0IEljb25zIGZyb20gJy4vdmlldy9Db21tb24vSWNvbnMnO1xyXG5pbXBvcnQgRm9vdGVyIGZyb20gJy4vdmlldy9Db21tb24vRm9vdGVyJztcclxuaW1wb3J0IE5vdGVQYWRCdXR0b24gZnJvbSAnLi92aWV3L05vdGVQYWQvY29tcG9uZW50cy9Ob3RlUGFkSGVhZGVyQnV0dG9uJztcclxuXHJcbnNhbmRib3hEQi5vcGVuREIoKTtcclxuXHJcbmN1c3RvbUVsZW1lbnRzLmRlZmluZSgnbXktYXBwJywgQXBwKTtcclxuY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdteS1mb290ZXInLCBGb290ZXIpO1xyXG5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ215LWhvbWUnLCBIb21lKTtcclxuY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdteS10ZXRyaXMnLCBUZXRyaXMpO1xyXG5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ215LWZsYXBweWJpcmQnLCBGbGFwcHlCaXJkKTtcclxuY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdteS1pY29ucycsIEljb25zKTtcclxuY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdteS1pY29uJywgSWNvbik7XHJcbmN1c3RvbUVsZW1lbnRzLmRlZmluZSgnbXktbm90ZXBhZCcsIE5vdGVQYWQpO1xyXG5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ215LW5vdGVwYWQtaGVhZGVyJywgTm90ZVBhZEhlYWRlcik7XHJcbmN1c3RvbUVsZW1lbnRzLmRlZmluZSgnbXktbm90ZXBhZC1ib2R5JywgTm90ZVBhZEJvZHkpO1xyXG5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ215LW5vdGVwYWQtYnV0dG9uJywgTm90ZVBhZEJ1dHRvbik7XHJcbiIsImltcG9ydCByb3V0ZXIgZnJvbSAnLi9jb3JlL1JvdXRlcic7XHJcbmltcG9ydCB7IGh0bWwgfSBmcm9tICcuL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IFdlYkNvbXBvbmVudCBmcm9tICcuL2NvcmUvV2ViQ29tcG9uZW50JztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwcCBleHRlbmRzIFdlYkNvbXBvbmVudCB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICBzdXBlcigpO1xyXG4gICAgcm91dGVyLnJlbmRlcigpO1xyXG4gIH1cclxuXHJcbiAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XHJcbiAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgKCkgPT4gcm91dGVyLnJlbmRlcigpKTtcclxuICB9XHJcblxyXG4gIGdldEhUTUwoKSB7XHJcbiAgICByZXR1cm4gaHRtbGBcclxuICAgICAgPG15LWljb25zIHNsb3Q9XCJpY29uc1wiIHRhYmluZGV4PVwiLTFcIj48L215LWljb25zPlxyXG4gICAgICA8bXktZm9vdGVyIHNsb3Q9XCJmb290ZXJcIj48L215LWZvb3Rlcj5cclxuICAgIGA7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBXZWJDb21wb25lbnQgZnJvbSAnLi4vLi4vY29yZS9XZWJDb21wb25lbnQnO1xuaW1wb3J0IHsgaHRtbCB9IGZyb20gJy4uLy4uL3V0aWxzL3V0aWxzJztcbmltcG9ydCB7IGljb25zIH0gZnJvbSAnLi4vLi4vdXRpbHMvcm91dGVzJztcbmltcG9ydCByb3V0ZXIgZnJvbSAnLi4vLi4vY29yZS9Sb3V0ZXInO1xuaW1wb3J0IHdpbmRvd0xvZ28gZnJvbSAnLi4vLi4vLi4vcHVibGljL3dpbmRvd0xvZ28ucG5nJztcbmltcG9ydCBzZWFyY2hJY29uIGZyb20gJy4uLy4uLy4uL3B1YmxpYy9zZWFyY2hJY29uLnBuZyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvb3RlciBleHRlbmRzIFdlYkNvbXBvbmVudCB7XG4gIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGFuZGxlQ2xpY2suYmluZCh0aGlzKSk7XG4gIH1cblxuICBnZXRIVE1MKCkge1xuICAgIHJldHVybiBodG1sYFxuICAgICAgPGltZyBhbHQ9XCJ3aW5kb3dfbG9nb1wiIHNyYz0ke3dpbmRvd0xvZ299IGNsYXNzPVwid2luZG93X2ljb25cIiAvPlxuICAgICAgPGRpdiBjbGFzcz1cImlucHV0X2JveFwiPlxuICAgICAgICA8aW1nIGFsdD1cInNlYXJjaFwiIHNyYz0ke3NlYXJjaEljb259IGNsYXNzPVwid2luZG93X2ljb25cIiAvPjxpbnB1dCB0eXBlPVwidGV4dFwiIHBsYWNlaG9sZGVyPVwi7LC+6riwXCIgLz5cbiAgICAgIDwvZGl2PlxuICAgICAgJHtpY29uc1xuICAgICAgICAubWFwKChpY29uKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIGh0bWxgIDxteS1pY29uIGRhdGEtcGF0aD1cIiR7aWNvbi5wYXRofVwiIGRhdGEtaWNvblNyYz1cIiR7aWNvbi5pY29uU3JjfVwiPjwvbXktaWNvbj4gYDtcbiAgICAgICAgfSlcbiAgICAgICAgLmpvaW4oJycpfVxuICAgIGA7XG4gIH1cblxuICBoYW5kbGVDbGljayhlKSB7XG4gICAgaWYgKCFlLnRhcmdldC5jbG9zZXN0KCdteS1pY29uJykpIHJldHVybjtcblxuICAgIGNvbnN0IGljb24gPSBlLnRhcmdldC5jbG9zZXN0KCdteS1pY29uJyk7XG4gICAgcm91dGVyLm5hdmlnYXRlVG8oaWNvbi5kYXRhc2V0LnBhdGgpO1xuICB9XG59XG4iLCJpbXBvcnQgV2ViQ29tcG9uZW50IGZyb20gJy4uLy4uL2NvcmUvV2ViQ29tcG9uZW50JztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEhvbWUgZXh0ZW5kcyBXZWJDb21wb25lbnQge31cclxuIiwiaW1wb3J0IFdlYkNvbXBvbmVudCBmcm9tICcuLi8uLi9jb3JlL1dlYkNvbXBvbmVudCc7XHJcbmltcG9ydCB7IGh0bWwgfSBmcm9tICcuLi8uLi91dGlscy91dGlscyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUZXRyaXMgZXh0ZW5kcyBXZWJDb21wb25lbnQge1xyXG4gIGdldEhUTUwoKSB7XHJcbiAgICByZXR1cm4gaHRtbGBcclxuICAgICAgPGgxPlRldHJpczwvaDE+XHJcbiAgICAgIDxwPllvdSBhcmUgdmlld2luZyB0aGUgVGV0cmlzIGNvbXBvbmVudCE8L3A+XHJcbiAgICBgO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgV2ViQ29tcG9uZW50IGZyb20gJy4uLy4uL2NvcmUvV2ViQ29tcG9uZW50JztcclxuaW1wb3J0IHsgaHRtbCB9IGZyb20gJy4uLy4uL3V0aWxzL3V0aWxzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZsYXBweUJpcmQgZXh0ZW5kcyBXZWJDb21wb25lbnQge1xyXG4gIGdldEhUTUwoKSB7XHJcbiAgICByZXR1cm4gaHRtbGBcclxuICAgICAgPGgxPkZsYXBweSBCaXJkPC9oMT5cclxuICAgICAgPHA+WW91IGFyZSB2aWV3aW5nIHRoZSBGbGFwcHkgQmlyZCBjb21wb25lbnQhPC9wPlxyXG4gICAgICA8cD5Zb3UgYXJlIHZpZXdpbmcgdGhlIEZsYXBweSBCaXJkIGNvbXBvbmVudCE8L3A+XHJcbiAgICAgIDxwPllvdSBhcmUgdmlld2luZyB0aGUgRmxhcHB5IEJpcmQgY29tcG9uZW50ITwvcD5cclxuICAgICAgPHA+WW91IGFyZSB2aWV3aW5nIHRoZSBGbGFwcHkgQmlyZCBjb21wb25lbnQhPC9wPlxyXG4gICAgICA8cD5Zb3UgYXJlIHZpZXdpbmcgdGhlIEZsYXBweSBCaXJkIGNvbXBvbmVudCE8L3A+XHJcbiAgICAgIDxwPllvdSBhcmUgdmlld2luZyB0aGUgRmxhcHB5IEJpcmQgY29tcG9uZW50ITwvcD5cclxuICAgIGA7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IGh0bWwgfSBmcm9tICcuLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCByb3V0ZXIgZnJvbSAnLi4vLi4vY29yZS9Sb3V0ZXInO1xyXG5pbXBvcnQgV2ViQ29tcG9uZW50IGZyb20gJy4uLy4uL2NvcmUvV2ViQ29tcG9uZW50JztcclxuaW1wb3J0IHsgaWNvbnMgfSBmcm9tICcuLi8uLi91dGlscy9yb3V0ZXMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSWNvbnMgZXh0ZW5kcyBXZWJDb21wb25lbnQge1xyXG4gIGNvbm5lY3RlZENhbGxiYWNrKCkge1xyXG4gICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcclxuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmhhbmRsZUNsaWNrLmJpbmQodGhpcykpO1xyXG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdkYmxjbGljaycsIHRoaXMuaGFuZGxlRG91YmxlQ2xpY2suYmluZCh0aGlzKSk7XHJcbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLmhhbmRsZUtleURvd24uYmluZCh0aGlzKSk7XHJcbiAgfVxyXG5cclxuICBnZXRIVE1MKCkge1xyXG4gICAgcmV0dXJuIGh0bWxgXHJcbiAgICAgICR7aWNvbnNcclxuICAgICAgICAubWFwKChpY29uKSA9PiB7XHJcbiAgICAgICAgICByZXR1cm4gaHRtbGBcclxuICAgICAgICAgICAgPG15LWljb24gZGF0YS1wYXRoPSR7aWNvbi5wYXRofSBkYXRhLWxhYmVsPSR7aWNvbi5sYWJlbH0gZGF0YS1pY29uU3JjPSR7aWNvbi5pY29uU3JjfT48L215LWljb24+XHJcbiAgICAgICAgICBgO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmpvaW4oJycpfVxyXG4gICAgYDtcclxuICB9XHJcblxyXG4gIGhhbmRsZUNsaWNrKGUpIHtcclxuICAgIGlmICghZS50YXJnZXQuY2xvc2VzdCgnbXktaWNvbicpKSByZXR1cm47XHJcblxyXG4gICAgY29uc3QgaWNvbiA9IGUudGFyZ2V0LmNsb3Nlc3QoJ215LWljb24nKTtcclxuICAgIGljb24udG9nZ2xlQXR0cmlidXRlKCdjaGVja2VkJyk7XHJcbiAgICB0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoJ215LWljb24nKS5mb3JFYWNoKChub2RlKSA9PiB7XHJcbiAgICAgIGlmIChub2RlICE9PSBpY29uKSB7XHJcbiAgICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUoJ2NoZWNrZWQnKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVEb3VibGVDbGljayhlKSB7XHJcbiAgICBpZiAoIWUudGFyZ2V0LmNsb3Nlc3QoJ215LWljb24nKSkgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IGljb24gPSBlLnRhcmdldC5jbG9zZXN0KCdteS1pY29uJyk7XHJcbiAgICByb3V0ZXIubmF2aWdhdGVUbyhpY29uLmRhdGFzZXQucGF0aCk7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVLZXlEb3duKGUpIHtcclxuICAgIGNvbnN0IGNoZWNrZWRFbCA9IHRoaXMucXVlcnlTZWxlY3RvckFsbCgnbXktaWNvbltjaGVja2VkXScpO1xyXG5cclxuICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJykge1xyXG4gICAgICBpZiAoY2hlY2tlZEVsLmxlbmd0aCA+IDEpIHJldHVybjtcclxuICAgICAgaWYgKCFjaGVja2VkRWwpIHJldHVybjtcclxuICAgICAgcm91dGVyLm5hdmlnYXRlVG8oY2hlY2tlZEVsWzBdLmRhdGFzZXQucGF0aCk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IGh0bWwgfSBmcm9tICcuLi8uLi91dGlscy91dGlscyc7XG5pbXBvcnQgV2ViQ29tcG9uZW50IGZyb20gJy4uLy4uL2NvcmUvV2ViQ29tcG9uZW50JztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSWNvbiBleHRlbmRzIFdlYkNvbXBvbmVudCB7XG4gIGdldEhUTUwoKSB7XG4gICAgY29uc3QgeyBsYWJlbCwgaWNvbnNyYyB9ID0gdGhpcy5kYXRhc2V0O1xuICAgIHJldHVybiBodG1sYFxuICAgICAgPGltZyBhbHQ9XCIke2xhYmVsfV9pY29uXCIgc3JjPSR7aWNvbnNyY30gLz5cbiAgICAgICR7bGFiZWwgPyBgPHNwYW4gY2xhc3M9XCJpY29uX25hbWVcIj4ke2xhYmVsfTwvc3Bhbj5gIDogJyd9XG4gICAgYDtcbiAgfVxufVxuIiwiaW1wb3J0IFdlYkNvbXBvbmVudCBmcm9tICcuLi8uLi9jb3JlL1dlYkNvbXBvbmVudCc7XG5pbXBvcnQgeyBodG1sIH0gZnJvbSAnLi4vLi4vdXRpbHMvdXRpbHMnO1xuaW1wb3J0ICcuL3N0eWxlcy5zY3NzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTm90ZVBhZCBleHRlbmRzIFdlYkNvbXBvbmVudCB7XG4gIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gIH1cblxuICBnZXRIVE1MKCkge1xuICAgIHJldHVybiBodG1sYFxuICAgICAgPG15LW5vdGVwYWQtaGVhZGVyPjwvbXktbm90ZXBhZC1oZWFkZXI+XG4gICAgICA8bXktbm90ZXBhZC1ib2R5PjwvbXktbm90ZXBhZC1ib2R5PlxuICAgIGA7XG4gIH1cbn1cbiIsImltcG9ydCB7IGh0bWwgfSBmcm9tICcuLi8uLi8uLi91dGlscy91dGlscyc7XG5pbXBvcnQgV2ViQ29tcG9uZW50IGZyb20gJy4uLy4uLy4uL2NvcmUvV2ViQ29tcG9uZW50JztcbmltcG9ydCBidXR0b25zIGZyb20gJy4uL2NvbnN0L2J1dHRvbnMnO1xuaW1wb3J0IE5vdGVQYWRJY29uIGZyb20gJy4uLy4uLy4uLy4uL3B1YmxpYy9ub3RlcGFkLnBuZyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5vdGVQYWRIZWFkZXIgZXh0ZW5kcyBXZWJDb21wb25lbnQge1xuICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICB9XG5cbiAgZ2V0SFRNTCgpIHtcbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxoZWFkZXI+XG4gICAgICAgIDxzcGFuPjxpbWcgYWx0PVwibm90ZXBhZF9pY29uXCIgc3JjPSR7Tm90ZVBhZEljb259IC8+7KCc66qp7JeG7J2MIC0gV2luZG93cyDrqZTrqqjsnqU8L3NwYW4+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJ2aWV3X2J1dHRvbnNcIj5cbiAgICAgICAgICA8YnV0dG9uIGlkPVwibWluaVwiPvCfl5U8L2J1dHRvbj5cbiAgICAgICAgICA8YnV0dG9uIGlkPVwiZnVsbFwiPvCfl5Y8L2J1dHRvbj5cbiAgICAgICAgICA8YnV0dG9uIGlkPVwiY2xvc2VcIj7ihak8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2hlYWRlcj5cbiAgICAgIDxkaXYgY2xhc3M9XCJlZGl0X2J1dHRvbnNcIj5cbiAgICAgICAgJHtidXR0b25zXG4gICAgICAgICAgLm1hcChcbiAgICAgICAgICAgIChidXR0b24pID0+XG4gICAgICAgICAgICAgIGh0bWxgXG4gICAgICAgICAgICAgICAgPG15LW5vdGVwYWQtYnV0dG9uXG4gICAgICAgICAgICAgICAgICBpZD0ke2J1dHRvbi5pZH1cbiAgICAgICAgICAgICAgICAgIGRhdGEtdGl0bGU9JHtidXR0b24udGl0bGV9XG4gICAgICAgICAgICAgICAgICBkYXRhLWtleT0ke2J1dHRvbi5rZXl9XG4gICAgICAgICAgICAgICAgICBkYXRhLXNsb3RzPSR7SlNPTi5zdHJpbmdpZnkoYnV0dG9uLnNsb3RzKX1cbiAgICAgICAgICAgICAgICA+PC9teS1ub3RlcGFkLWJ1dHRvbj5cbiAgICAgICAgICAgICAgYFxuICAgICAgICAgIClcbiAgICAgICAgICAuam9pbignJyl9XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICB9XG59XG4iLCJpbXBvcnQgeyBodG1sIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgV2ViQ29tcG9uZW50IGZyb20gJy4uLy4uLy4uL2NvcmUvV2ViQ29tcG9uZW50JztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5vdGVQYWRCb2R5IGV4dGVuZHMgV2ViQ29tcG9uZW50IHtcclxuICBnZXRIVE1MKCkge1xyXG4gICAgcmV0dXJuIGh0bWxgPHRleHRhcmVhPjwvdGV4dGFyZWE+YDtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgaHRtbCB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcbmltcG9ydCBXZWJDb21wb25lbnQgZnJvbSAnLi4vLi4vLi4vY29yZS9XZWJDb21wb25lbnQnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBOb3RlUGFkQnV0dG9uIGV4dGVuZHMgV2ViQ29tcG9uZW50IHtcbiAgZ2V0SFRNTCgpIHtcbiAgICBjb25zdCB7IHRpdGxlLCBrZXksIHNsb3RzIH0gPSB0aGlzLmRhdGFzZXQ7XG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICAke3RpdGxlfSg8dT4ke2tleX08L3U+KVxuICAgICAgPGRpdiBjbGFzcz1cInBvcHVwXCI+XG4gICAgICAgICR7SlNPTi5wYXJzZShzbG90cylcbiAgICAgICAgICAubWFwKFxuICAgICAgICAgICAgKHNsb3QpID0+IGh0bWxgXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzbG90XCIgZGF0YS1kaXNhYmxlPSR7ISFzbG90LmRpc2FibGV9PlxuICAgICAgICAgICAgICAgIDxkaXY+JHtzbG90LnRleHR9PC9kaXY+XG4gICAgICAgICAgICAgICAgJHtzbG90LmtleS5sZW5ndGggPiAwID8gYDxkaXY+JHtzbG90LmtleS5qb2luKCcgKyAnKX08L2Rpdj5gIDogJyd9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgYFxuICAgICAgICAgIClcbiAgICAgICAgICAuam9pbignJyl9XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICB9XG59XG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImRiIiwiY29uc3RydWN0b3IiLCJkYk5hbWUiLCJkYlZlcnNpb24iLCJzdG9yZXMiLCJ0aGlzIiwiYXN5bmMiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInJlcXVlc3QiLCJ3aW5kb3ciLCJpbmRleGVkREIiLCJvcGVuIiwib25zdWNjZXNzIiwicmVzdWx0Iiwib25lcnJvciIsImUiLCJvbnVwZ3JhZGVuZWVkZWQiLCJmb3JFYWNoIiwic3RvcmUiLCJvYmplY3RTdG9yZU5hbWVzIiwiY29udGFpbnMiLCJjcmVhdGVPYmplY3RTdG9yZSIsImtleVBhdGgiLCJzdG9yZU5hbWUiLCJpZCIsInRyYW5zYWN0aW9uIiwib2JqZWN0U3RvcmUiLCJnZXQiLCJnZXRBbGwiLCJkYXRhIiwicHV0IiwiZGVsZXRlIiwicmVuZGVyUmF3Iiwic3RyaW5nIiwidmFsdWVzIiwiU3RyaW5nIiwicmF3IiwiV2ViQ29tcG9uZW50IiwiSFRNTEVsZW1lbnQiLCJzdXBlciIsInRlbXBsYXRlIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiZ2V0U2hhZG93U3R5bGUiLCJnZXRTaGFkb3dIVE1MIiwiYXR0YWNoU2hhZG93IiwibW9kZSIsImlubmVySFRNTCIsImdldEhUTUwiLCJjb25uZWN0ZWRDYWxsYmFjayIsInJlbmRlciIsInNoYWRvd1Jvb3QiLCJhcHBlbmQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwicm91dGVzIiwicGF0aCIsImh0bWwiLCJsYWJlbCIsImljb25TcmMiLCJpY29ucyIsInJlZHVjZSIsInByZXYiLCJyb3V0ZXIiLCJyb3V0ZSIsImZpbmQiLCJ2YWx1ZSIsImxvY2F0aW9uIiwicGF0aG5hbWUiLCJyZXBsYWNlIiwicXVlcnlTZWxlY3RvciIsInJlcGxhY2VUbyIsIm5hdmlnYXRlVG8iLCJ1cmwiLCJoaXN0b3J5IiwicHVzaFN0YXRlIiwicmVwbGFjZVN0YXRlIiwiYmFjayIsInRpdGxlIiwia2V5Iiwic2xvdHMiLCJ0ZXh0IiwiZGlzYWJsZSIsImN1c3RvbUVsZW1lbnRzIiwiZGVmaW5lIiwiYWRkRXZlbnRMaXN0ZW5lciIsImhhbmRsZUNsaWNrIiwiYmluZCIsImljb24iLCJqb2luIiwidGFyZ2V0IiwiY2xvc2VzdCIsImRhdGFzZXQiLCJoYW5kbGVEb3VibGVDbGljayIsImhhbmRsZUtleURvd24iLCJ0b2dnbGVBdHRyaWJ1dGUiLCJxdWVyeVNlbGVjdG9yQWxsIiwibm9kZSIsInJlbW92ZUF0dHJpYnV0ZSIsImNoZWNrZWRFbCIsImxlbmd0aCIsImljb25zcmMiLCJidXR0b24iLCJKU09OIiwic3RyaW5naWZ5IiwicGFyc2UiLCJtYXAiLCJzbG90Il0sInNvdXJjZVJvb3QiOiIifQ==