(()=>{"use strict";var e="/js-sandbox/";const t=new class{db;constructor(e,t,n){this.dbName=e,this.dbVersion=t,this.stores=n}async openDB(){return new Promise(((e,t)=>{const n=window.indexedDB.open(this.dbName,this.dbVersion);n.onsuccess=()=>{this.db=n.result,e()},n.onerror=e=>{t(e)},n.onupgradeneeded=()=>{this.db=n.result,this.stores.forEach((e=>{this.db.objectStoreNames.contains(e)||this.db.createObjectStore(e,{keyPath:"id"})}))}}))}async getData(e,t){return new Promise(((n,s)=>{const a=this.db.transaction(e,"readonly").objectStore(e).get(t);a.onsuccess=()=>{n(a.result)},a.onerror=e=>{s(e)}}))}async getAllData(e){return new Promise(((t,n)=>{const s=this.db.transaction(e,"readonly").objectStore(e).getAll();s.onsuccess=()=>{t(s.result)},s.onerror=e=>{n(e)}}))}async upsertData(e,t){return new Promise(((n,s)=>{const a=this.db.transaction(e,"readwrite").objectStore(e).put(t);a.onsuccess=()=>{n(a.result)},a.onerror=e=>{s(e)}}))}async deleteData(e,t){return new Promise(((n,s)=>{const a=this.db.transaction(e,"readwrite").objectStore(e).delete(t);a.onsuccess=()=>{n(a.result)},a.onerror=e=>{s(e)}}))}}("sandbox",1,["notes"]),n=(e,...t)=>String.raw(e,...t);class s extends HTMLElement{constructor(){super(),this.template=document.createElement("template"),this.getShadowStyle()&&this.getShadowHTML()?(this.attachShadow({mode:"open"}),this.template.innerHTML=n`
        <style>
          ${this.getShadowStyle()}
        </style>
        ${this.getShadowHTML()}
      `):this.template.innerHTML=this.getHTML()}connectedCallback(){this.render()}render(){this.shadowRoot?this.shadowRoot.append(this.template.content.cloneNode(!0)):this.append(this.template.content.cloneNode(!0))}getHTML(){return""}getShadowStyle(){return""}getShadowHTML(){return""}}const a=e+"2a583f97b153f7da7d41.png",o=[{path:"/",html:n`<my-home></my-home>`,label:"Home",iconSrc:null},{path:"/tetris",html:n`<my-tetris></my-tetris>`,label:"Tetris",iconSrc:e+"71c0bea6462001116fcf.png"},{path:"/flappybird",html:n`<my-flappybird></my-flappybird>`,label:"Flappy&nbsp;Bird",iconSrc:e+"39b884119b49599495ed.png"},{path:"/notepad",html:n`<my-notepad></my-notepad>`,label:"Note&nbsp;Pad",iconSrc:a}],i=o.reduce(((e,t)=>{const{path:n,label:s,iconSrc:a}=t;return"/"===t.path?e:[...e,{path:n,label:s,iconSrc:a}]}),[]),l=o,r=new class{constructor(e){this.routes=e}render(){const e=this.routes.find((e=>e.path===window.location.pathname.replace("/js-sandbox","")));console.log(e),e?document.querySelector("#page").innerHTML=e.html:this.replaceTo("/")}navigateTo(e){window.history.pushState(null,null,e),this.render()}replaceTo(e){window.history.replaceState(null,null,e),this.render()}back(){window.history.back(),this.render()}}(l),d=[{id:"file",title:"ÌååÏùº",key:"F",slots:[{text:"ÏÉàÎ°ú&nbsp;ÎßåÎì§Í∏∞(N)",key:["Ctrl","N"],disable:!0},{text:"ÏÉà&nbsp;Ï∞Ω(W)",key:["Ctrl","Shift","N"],disable:!0},{text:"Ï†ÄÏû•(S)",key:["Ctrl","S"]},{text:"ÏÇ≠Ï†ú(D)",key:["Ctrl","Shift","S"],disable:!0},{text:"ÌéòÏù¥ÏßÄ&nbsp;ÏÑ§Ï†ï(U)...",key:[],disable:!0},{text:"Ïù∏ÏáÑ(P)...",key:["Ctrl","P"],disable:!0},{text:"ÎÅùÎÇ¥Í∏∞(X)",key:[],disable:!0}]},{id:"edit",title:"Ìé∏Ïßë",key:"E",slots:[{text:"Ïã§Ìñâ&nbsp;Ï∑®ÏÜå(U)",key:["Ctrl","Z"],disable:!0},{text:"ÏûòÎùºÎÇ¥Í∏∞(T)",key:["Ctrl","X"],disable:!0},{text:"Î≥µÏÇ¨(C)",key:["Ctrl","C"],disable:!0},{text:"Î∂ôÏó¨ÎÑ£Í∏∞(P)",key:["Ctrl","V"],disable:!0},{text:"ÏÇ≠Ï†ú(D)",key:["Del"],disable:!0},{text:"BingÏúºÎ°ú&nbsp;Í≤ÄÏÉâ(S)...",key:["Ctrl","E"],disable:!0},{text:"Ï∞æÍ∏∞(F)...",key:["Ctrl","F"],disable:!0},{text:"Îã§Ïùå&nbsp;Ï∞æÍ∏∞(N)",key:["F3"],disable:!0},{text:"Ïù¥Ï†Ñ&nbsp;Ï∞æÍ∏∞(V)",key:["Shift","F3"],disable:!0},{text:"Î∞îÍæ∏Í∏∞(R)...",key:["Ctrl","H"],disable:!0},{text:"Ïù¥Îèô(G)...",key:["Ctrl","G"],disable:!0},{text:"Î™®Îëê&nbsp;ÏÑ†ÌÉù(A)",key:["Ctrl","A"],disable:!0},{text:"ÏãúÍ∞Ñ/ÎÇ†Ïßú(D)",key:["F5"],disable:!0}]},{id:"format",title:"ÏÑúÏãù",key:"O",slots:[{text:"ÏûêÎèô&nbsp;Ï§Ñ&nbsp;Î∞îÍøà(W)",key:[],disable:!0},{text:"Í∏ÄÍº¥(F)...",key:[],disable:!0}]},{id:"view",title:"Î≥¥Í∏∞",key:"V",slots:[{text:"ÌôïÎåÄÌïòÍ∏∞(Z)",key:["Ctrl","+"],disable:!0},{text:"Ï∂ïÏÜåÌïòÍ∏∞(X)",key:["Ctrl","-"],disable:!0},{text:"ÏÉÅÌÉú&nbsp;ÌëúÏãúÏ§Ñ(S)",key:[],disable:!0}]},{id:"help",title:"ÎèÑÏõÄÎßê",key:"H",slots:[{text:"ÎèÑÏõÄÎßê&nbsp;Î≥¥Í∏∞(H)",key:[],disable:!0},{text:"ÌîºÎìúÎ∞±&nbsp;Î≥¥ÎÇ¥Í∏∞(F)",key:[],disable:!0},{text:"Î©îÎ™®Ïû•&nbsp;Ï†ïÎ≥¥(A)",key:[],disable:!0}]}],c=e+"59cb65e4f8f2627d6c2c.png",p=e+"bc8d31a2338dd0b3f68a.png";t.openDB(),customElements.define("my-app",class extends s{constructor(){super(),r.render()}connectedCallback(){super.connectedCallback(),window.addEventListener("popstate",(()=>r.render()))}getHTML(){return n`
      <my-icons slot="icons" tabindex="-1"></my-icons>
      <my-footer slot="footer"></my-footer>
    `}}),customElements.define("my-footer",class extends s{connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.handleClick.bind(this))}getHTML(){return n`
      <img alt="window_logo" src=${c} class="window_icon" />
      <div class="input_box">
        <img alt="search" src=${p} class="window_icon" /><input type="text" placeholder="Ï∞æÍ∏∞" />
      </div>
      ${i.map((e=>n` <my-icon data-path="${e.path}" data-iconSrc="${e.iconSrc}"></my-icon> `)).join("")}
    `}handleClick(e){if(!e.target.closest("my-icon"))return;const t=e.target.closest("my-icon");r.navigateTo(t.dataset.path)}}),customElements.define("my-home",class extends s{}),customElements.define("my-tetris",class extends s{getHTML(){return n`
      <h1>Tetris</h1>
      <p>You are viewing the Tetris component!</p>
    `}}),customElements.define("my-flappybird",class extends s{getHTML(){return n`
      <h1>Flappy Bird</h1>
      <p>You are viewing the Flappy Bird component!</p>
      <p>You are viewing the Flappy Bird component!</p>
      <p>You are viewing the Flappy Bird component!</p>
      <p>You are viewing the Flappy Bird component!</p>
      <p>You are viewing the Flappy Bird component!</p>
      <p>You are viewing the Flappy Bird component!</p>
    `}}),customElements.define("my-icons",class extends s{connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.handleClick.bind(this)),this.addEventListener("dblclick",this.handleDoubleClick.bind(this)),this.addEventListener("keydown",this.handleKeyDown.bind(this))}getHTML(){return n`
      ${i.map((e=>n`
            <my-icon data-path=${e.path} data-label=${e.label} data-iconSrc=${e.iconSrc}></my-icon>
          `)).join("")}
    `}handleClick(e){if(!e.target.closest("my-icon"))return;const t=e.target.closest("my-icon");t.toggleAttribute("checked"),this.querySelectorAll("my-icon").forEach((e=>{e!==t&&e.removeAttribute("checked")}))}handleDoubleClick(e){if(!e.target.closest("my-icon"))return;const t=e.target.closest("my-icon");r.navigateTo(t.dataset.path)}handleKeyDown(e){const t=this.querySelectorAll("my-icon[checked]");if("Enter"===e.key){if(t.length>1)return;if(!t)return;r.navigateTo(t[0].dataset.path)}}}),customElements.define("my-icon",class extends s{getHTML(){const{label:e,iconsrc:t}=this.dataset;return n`
      <img alt="${e}_icon" src=${t} />
      ${e?`<span class="icon_name">${e}</span>`:""}
    `}}),customElements.define("my-notepad",class extends s{connectedCallback(){super.connectedCallback()}getHTML(){return n`
      <my-notepad-header></my-notepad-header>
      <my-notepad-body></my-notepad-body>
    `}}),customElements.define("my-notepad-header",class extends s{connectedCallback(){super.connectedCallback()}getHTML(){return n`
      <header>
        <span><img alt="notepad_icon" src=${a} />Ï†úÎ™©ÏóÜÏùå - Windows Î©îÎ™®Ïû•</span>
        <div class="view_buttons">
          <button id="mini">üóï</button>
          <button id="full">üóñ</button>
          <button id="close">‚Ö©</button>
        </div>
      </header>
      <div class="edit_buttons">
        ${d.map((e=>n`
                <my-notepad-button
                  id=${e.id}
                  data-title=${e.title}
                  data-key=${e.key}
                  data-slots=${JSON.stringify(e.slots)}
                ></my-notepad-button>
              `)).join("")}
      </div>
    `}}),customElements.define("my-notepad-body",class extends s{getHTML(){return n`<textarea></textarea>`}}),customElements.define("my-notepad-button",class extends s{getHTML(){const{title:e,key:t,slots:s}=this.dataset;return n`
      ${e}(<u>${t}</u>)
      <div class="popup">
        ${JSON.parse(s).map((e=>n`
              <div class="slot" data-disable=${!!e.disable}>
                <div>${e.text}</div>
                ${e.key.length>0?`<div>${e.key.join(" + ")}</div>`:""}
              </div>
            `)).join("")}
      </div>
    `}})})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVUvRSxLQUFLMkYsUUFDbkMsT0FBTyxDQUFJO1FBQ1BkLFFBQVlDOztVQUVWd0IsS0FBS0UsTUFBTXpCLEdBQ1YwQixLQUNFQyxHQUFTLENBQUk7aURBQ3VCQSxFQUFLekI7dUJBQy9CeUIsRUFBSzFCO2tCQUNWMEIsRUFBSzVCLElBQUlxQixPQUFTLEVBQUksUUFBUU8sRUFBSzVCLElBQUlVLEtBQUssZUFBaUI7O2dCQUlwRUEsS0FBSzs7S0FHZCxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vamF2YXNjcmlwdC1zYW5kYm94L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2phdmFzY3JpcHQtc2FuZGJveC93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly9qYXZhc2NyaXB0LXNhbmRib3gvLi9zcmMvY29yZS9JbmRleGVkREIuanMiLCJ3ZWJwYWNrOi8vamF2YXNjcmlwdC1zYW5kYm94Ly4vc3JjL3V0aWxzL3V0aWxzLmpzIiwid2VicGFjazovL2phdmFzY3JpcHQtc2FuZGJveC8uL3NyYy9jb3JlL1dlYkNvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly9qYXZhc2NyaXB0LXNhbmRib3gvLi9zcmMvdXRpbHMvcm91dGVzLmpzIiwid2VicGFjazovL2phdmFzY3JpcHQtc2FuZGJveC8uL3NyYy9jb3JlL1JvdXRlci5qcyIsIndlYnBhY2s6Ly9qYXZhc2NyaXB0LXNhbmRib3gvLi9zcmMvdmlldy9Ob3RlUGFkL2NvbnN0L2J1dHRvbnMuanMiLCJ3ZWJwYWNrOi8vamF2YXNjcmlwdC1zYW5kYm94Ly4vc3JjL2luZGV4LmpzIiwid2VicGFjazovL2phdmFzY3JpcHQtc2FuZGJveC8uL3NyYy9BcHAuanMiLCJ3ZWJwYWNrOi8vamF2YXNjcmlwdC1zYW5kYm94Ly4vc3JjL3ZpZXcvQ29tbW9uL0Zvb3Rlci5qcyIsIndlYnBhY2s6Ly9qYXZhc2NyaXB0LXNhbmRib3gvLi9zcmMvdmlldy9Ib21lL2luZGV4LmpzIiwid2VicGFjazovL2phdmFzY3JpcHQtc2FuZGJveC8uL3NyYy92aWV3L1RldHJpcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9qYXZhc2NyaXB0LXNhbmRib3gvLi9zcmMvdmlldy9GbGFwcHlCaXJkL2luZGV4LmpzIiwid2VicGFjazovL2phdmFzY3JpcHQtc2FuZGJveC8uL3NyYy92aWV3L0NvbW1vbi9JY29ucy5qcyIsIndlYnBhY2s6Ly9qYXZhc2NyaXB0LXNhbmRib3gvLi9zcmMvdmlldy9Db21tb24vSWNvbi5qcyIsIndlYnBhY2s6Ly9qYXZhc2NyaXB0LXNhbmRib3gvLi9zcmMvdmlldy9Ob3RlUGFkL2luZGV4LmpzIiwid2VicGFjazovL2phdmFzY3JpcHQtc2FuZGJveC8uL3NyYy92aWV3L05vdGVQYWQvY29tcG9uZW50cy9Ob3RlUGFkSGVhZGVyLmpzIiwid2VicGFjazovL2phdmFzY3JpcHQtc2FuZGJveC8uL3NyYy92aWV3L05vdGVQYWQvY29tcG9uZW50cy9Ob3RlUGFkQm9keS5qcyIsIndlYnBhY2s6Ly9qYXZhc2NyaXB0LXNhbmRib3gvLi9zcmMvdmlldy9Ob3RlUGFkL2NvbXBvbmVudHMvTm90ZVBhZEhlYWRlckJ1dHRvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCIvanMtc2FuZGJveC9cIjsiLCJjbGFzcyBJbmRleGVkREIge1xyXG4gIGRiO1xyXG5cclxuICAvKipcclxuICAgKiDsg53shLHsnpBcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gZGJOYW1lXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IGRiVmVyc2lvblxyXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHN0b3Jlc1xyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKGRiTmFtZSwgZGJWZXJzaW9uLCBzdG9yZXMpIHtcclxuICAgIHRoaXMuZGJOYW1lID0gZGJOYW1lO1xyXG4gICAgdGhpcy5kYlZlcnNpb24gPSBkYlZlcnNpb247XHJcbiAgICB0aGlzLnN0b3JlcyA9IHN0b3JlcztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIERCIOyYpO2UiCDrqZTshJzrk5xcclxuICAgKiBAcmV0dXJucyB7dm9pZH1cclxuICAgKi9cclxuICBhc3luYyBvcGVuREIoKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICBjb25zdCByZXF1ZXN0ID0gd2luZG93LmluZGV4ZWREQi5vcGVuKHRoaXMuZGJOYW1lLCB0aGlzLmRiVmVyc2lvbik7XHJcblxyXG4gICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLmRiID0gcmVxdWVzdC5yZXN1bHQ7XHJcbiAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgcmVxdWVzdC5vbmVycm9yID0gKGUpID0+IHtcclxuICAgICAgICByZWplY3QoZSk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICByZXF1ZXN0Lm9udXBncmFkZW5lZWRlZCA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLmRiID0gcmVxdWVzdC5yZXN1bHQ7XHJcblxyXG4gICAgICAgIHRoaXMuc3RvcmVzLmZvckVhY2goKHN0b3JlKSA9PiB7XHJcbiAgICAgICAgICBpZiAoIXRoaXMuZGIub2JqZWN0U3RvcmVOYW1lcy5jb250YWlucyhzdG9yZSkpIHtcclxuICAgICAgICAgICAgdGhpcy5kYi5jcmVhdGVPYmplY3RTdG9yZShzdG9yZSwgeyBrZXlQYXRoOiAnaWQnIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9O1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDrjbDsnbTthLAg7KGw7ZqMIOuplOyEnOuTnFxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzdG9yZU5hbWVcclxuICAgKiBAcGFyYW0ge251bWJlcn0gaWRcclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxvYmplY3Q+fVxyXG4gICAqL1xyXG4gIGFzeW5jIGdldERhdGEoc3RvcmVOYW1lLCBpZCkge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgY29uc3QgcmVxdWVzdCA9IHRoaXMuZGIudHJhbnNhY3Rpb24oc3RvcmVOYW1lLCAncmVhZG9ubHknKS5vYmplY3RTdG9yZShzdG9yZU5hbWUpLmdldChpZCk7XHJcblxyXG4gICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9ICgpID0+IHtcclxuICAgICAgICByZXNvbHZlKHJlcXVlc3QucmVzdWx0KTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHJlcXVlc3Qub25lcnJvciA9IChlKSA9PiB7XHJcbiAgICAgICAgcmVqZWN0KGUpO1xyXG4gICAgICB9O1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDrjbDsnbTthLAg7KCE7LK0IOyhsO2ajCDrqZTshJzrk5xcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gc3RvcmVOYW1lXHJcbiAgICogQHJldHVybnMge29iamVjdFtdfVxyXG4gICAqL1xyXG4gIGFzeW5jIGdldEFsbERhdGEoc3RvcmVOYW1lKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5kYi50cmFuc2FjdGlvbihzdG9yZU5hbWUsICdyZWFkb25seScpLm9iamVjdFN0b3JlKHN0b3JlTmFtZSkuZ2V0QWxsKCk7XHJcblxyXG4gICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9ICgpID0+IHtcclxuICAgICAgICByZXNvbHZlKHJlcXVlc3QucmVzdWx0KTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHJlcXVlc3Qub25lcnJvciA9IChlKSA9PiB7XHJcbiAgICAgICAgcmVqZWN0KGUpO1xyXG4gICAgICB9O1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDrjbDsnbTthLAg7LaU6rCAIOuplOyEnOuTnFxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzdG9yZU5hbWVcclxuICAgKiBAcGFyYW0ge29iamVjdH0gZGF0YVxyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPG9iamVjdD59XHJcbiAgICovXHJcbiAgYXN5bmMgdXBzZXJ0RGF0YShzdG9yZU5hbWUsIGRhdGEpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLmRiLnRyYW5zYWN0aW9uKHN0b3JlTmFtZSwgJ3JlYWR3cml0ZScpLm9iamVjdFN0b3JlKHN0b3JlTmFtZSkucHV0KGRhdGEpO1xyXG5cclxuICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSAoKSA9PiB7XHJcbiAgICAgICAgcmVzb2x2ZShyZXF1ZXN0LnJlc3VsdCk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICByZXF1ZXN0Lm9uZXJyb3IgPSAoZSkgPT4ge1xyXG4gICAgICAgIHJlamVjdChlKTtcclxuICAgICAgfTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog642w7J207YSwIOyCreygnCDrqZTshJzrk5xcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gc3RvcmVOYW1lXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IGlkXHJcbiAgICovXHJcbiAgYXN5bmMgZGVsZXRlRGF0YShzdG9yZU5hbWUsIGlkKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5kYi50cmFuc2FjdGlvbihzdG9yZU5hbWUsICdyZWFkd3JpdGUnKS5vYmplY3RTdG9yZShzdG9yZU5hbWUpLmRlbGV0ZShpZCk7XHJcblxyXG4gICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9ICgpID0+IHtcclxuICAgICAgICByZXNvbHZlKHJlcXVlc3QucmVzdWx0KTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHJlcXVlc3Qub25lcnJvciA9IChlKSA9PiB7XHJcbiAgICAgICAgcmVqZWN0KGUpO1xyXG4gICAgICB9O1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5jb25zdCBzYW5kYm94REIgPSBuZXcgSW5kZXhlZERCKCdzYW5kYm94JywgMSwgWydub3RlcyddKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHNhbmRib3hEQjtcclxuIiwiY29uc3QgcmVuZGVyUmF3ID0gKHN0cmluZywgLi4udmFsdWVzKSA9PiB7XG4gIHJldHVybiBTdHJpbmcucmF3KHN0cmluZywgLi4udmFsdWVzKTtcbn07XG5cbmV4cG9ydCB7IHJlbmRlclJhdyBhcyBodG1sLCByZW5kZXJSYXcgYXMgY3NzIH07XG4iLCJpbXBvcnQgeyBodG1sIH0gZnJvbSAnLi4vdXRpbHMvdXRpbHMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgV2ViQ29tcG9uZW50IGV4dGVuZHMgSFRNTEVsZW1lbnQge1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgc3VwZXIoKTtcclxuICAgIHRoaXMudGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZW1wbGF0ZScpO1xyXG5cclxuICAgIGlmICh0aGlzLmdldFNoYWRvd1N0eWxlKCkgJiYgdGhpcy5nZXRTaGFkb3dIVE1MKCkpIHtcclxuICAgICAgdGhpcy5hdHRhY2hTaGFkb3coeyBtb2RlOiAnb3BlbicgfSk7XHJcbiAgICAgIHRoaXMudGVtcGxhdGUuaW5uZXJIVE1MID0gaHRtbGBcclxuICAgICAgICA8c3R5bGU+XHJcbiAgICAgICAgICAke3RoaXMuZ2V0U2hhZG93U3R5bGUoKX1cclxuICAgICAgICA8L3N0eWxlPlxyXG4gICAgICAgICR7dGhpcy5nZXRTaGFkb3dIVE1MKCl9XHJcbiAgICAgIGA7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnRlbXBsYXRlLmlubmVySFRNTCA9IHRoaXMuZ2V0SFRNTCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XHJcbiAgICB0aGlzLnJlbmRlcigpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgaWYgKHRoaXMuc2hhZG93Um9vdCkge1xyXG4gICAgICB0aGlzLnNoYWRvd1Jvb3QuYXBwZW5kKHRoaXMudGVtcGxhdGUuY29udGVudC5jbG9uZU5vZGUodHJ1ZSkpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5hcHBlbmQodGhpcy50ZW1wbGF0ZS5jb250ZW50LmNsb25lTm9kZSh0cnVlKSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRIVE1MKCkge1xyXG4gICAgcmV0dXJuIGBgO1xyXG4gIH1cclxuXHJcbiAgLy8gc2hhZG93Um9vdCBjc3Mg7KCV7J2YXHJcbiAgZ2V0U2hhZG93U3R5bGUoKSB7XHJcbiAgICByZXR1cm4gJyc7XHJcbiAgfVxyXG5cclxuICAvLyBzaGFkb3dSb290IGh0bWwg7KCV7J2YXHJcbiAgZ2V0U2hhZG93SFRNTCgpIHtcclxuICAgIHJldHVybiAnJztcclxuICB9XHJcblxyXG4gIC8vIOydtOuypO2KuCDsoJXsnZhcclxufVxyXG4iLCJpbXBvcnQgeyBodG1sIH0gZnJvbSAnLi91dGlscyc7XG5pbXBvcnQgdGV0cmlzIGZyb20gJy4uLy4uL3B1YmxpYy90ZXRyaXMucG5nJztcbmltcG9ydCBmbGFwcHlCaXJkIGZyb20gJy4uLy4uL3B1YmxpYy9mbGFwcHlCaXJkLnBuZyc7XG5pbXBvcnQgbm90ZXBhZCBmcm9tICcuLi8uLi9wdWJsaWMvbm90ZXBhZC5wbmcnO1xuXG5jb25zdCByb3V0ZXMgPSBbXG4gIHtcbiAgICBwYXRoOiAnLycsXG4gICAgaHRtbDogaHRtbGA8bXktaG9tZT48L215LWhvbWU+YCxcbiAgICBsYWJlbDogJ0hvbWUnLFxuICAgIGljb25TcmM6IG51bGwsXG4gIH0sXG4gIHtcbiAgICBwYXRoOiAnL3RldHJpcycsXG4gICAgaHRtbDogaHRtbGA8bXktdGV0cmlzPjwvbXktdGV0cmlzPmAsXG4gICAgbGFiZWw6ICdUZXRyaXMnLFxuICAgIGljb25TcmM6IHRldHJpcyxcbiAgfSxcbiAge1xuICAgIHBhdGg6ICcvZmxhcHB5YmlyZCcsXG4gICAgaHRtbDogaHRtbGA8bXktZmxhcHB5YmlyZD48L215LWZsYXBweWJpcmQ+YCxcbiAgICBsYWJlbDogJ0ZsYXBweSZuYnNwO0JpcmQnLFxuICAgIGljb25TcmM6IGZsYXBweUJpcmQsXG4gIH0sXG4gIHtcbiAgICBwYXRoOiAnL25vdGVwYWQnLFxuICAgIGh0bWw6IGh0bWxgPG15LW5vdGVwYWQ+PC9teS1ub3RlcGFkPmAsXG4gICAgbGFiZWw6ICdOb3RlJm5ic3A7UGFkJyxcbiAgICBpY29uU3JjOiBub3RlcGFkLFxuICB9LFxuXTtcblxuY29uc3QgaWNvbnMgPSByb3V0ZXMucmVkdWNlKChwcmV2LCByb3V0ZXIpID0+IHtcbiAgY29uc3QgeyBwYXRoLCBsYWJlbCwgaWNvblNyYyB9ID0gcm91dGVyO1xuICBpZiAocm91dGVyLnBhdGggPT09ICcvJykgcmV0dXJuIHByZXY7XG4gIHJldHVybiBbLi4ucHJldiwgeyBwYXRoLCBsYWJlbCwgaWNvblNyYyB9XTtcbn0sIFtdKTtcblxuZXhwb3J0IGRlZmF1bHQgcm91dGVzO1xuZXhwb3J0IHsgaWNvbnMgfTtcbiIsImltcG9ydCByb3V0ZXMgZnJvbSAnLi4vdXRpbHMvcm91dGVzJztcblxuY2xhc3MgUm91dGVyIHtcbiAgY29uc3RydWN0b3Iocm91dGUpIHtcbiAgICB0aGlzLnJvdXRlcyA9IHJvdXRlO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHJvdXRlID0gdGhpcy5yb3V0ZXMuZmluZCgodmFsdWUpID0+IHZhbHVlLnBhdGggPT09IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZS5yZXBsYWNlKCcvanMtc2FuZGJveCcsICcnKSk7XG5cbiAgICBjb25zb2xlLmxvZyhyb3V0ZSk7XG5cbiAgICBpZiAoIXJvdXRlKSB7XG4gICAgICB0aGlzLnJlcGxhY2VUbygnLycpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwYWdlJykuaW5uZXJIVE1MID0gcm91dGUuaHRtbDtcbiAgfVxuXG4gIG5hdmlnYXRlVG8odXJsKSB7XG4gICAgd2luZG93Lmhpc3RvcnkucHVzaFN0YXRlKG51bGwsIG51bGwsIHVybCk7XG4gICAgdGhpcy5yZW5kZXIoKTtcbiAgfVxuXG4gIHJlcGxhY2VUbyh1cmwpIHtcbiAgICB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUobnVsbCwgbnVsbCwgdXJsKTtcbiAgICB0aGlzLnJlbmRlcigpO1xuICB9XG5cbiAgYmFjaygpIHtcbiAgICB3aW5kb3cuaGlzdG9yeS5iYWNrKCk7XG4gICAgdGhpcy5yZW5kZXIoKTtcbiAgfVxufVxuXG5jb25zdCByb3V0ZXIgPSBuZXcgUm91dGVyKHJvdXRlcyk7XG5cbmV4cG9ydCBkZWZhdWx0IHJvdXRlcjtcbiIsImNvbnN0IGJ1dHRvbnMgPSBbXG4gIHtcbiAgICBpZDogJ2ZpbGUnLFxuICAgIHRpdGxlOiAn7YyM7J28JyxcbiAgICBrZXk6ICdGJyxcbiAgICBzbG90czogW1xuICAgICAgeyB0ZXh0OiAn7IOI66GcJm5ic3A766eM65Ok6riwKE4pJywga2V5OiBbJ0N0cmwnLCAnTiddLCBkaXNhYmxlOiB0cnVlIH0sXG4gICAgICB7IHRleHQ6ICfsg4gmbmJzcDvssL0oVyknLCBrZXk6IFsnQ3RybCcsICdTaGlmdCcsICdOJ10sIGRpc2FibGU6IHRydWUgfSxcbiAgICAgIHsgdGV4dDogJ+yggOyepShTKScsIGtleTogWydDdHJsJywgJ1MnXSB9LFxuICAgICAgeyB0ZXh0OiAn7IKt7KCcKEQpJywga2V5OiBbJ0N0cmwnLCAnU2hpZnQnLCAnUyddLCBkaXNhYmxlOiB0cnVlIH0sXG4gICAgICB7IHRleHQ6ICftjpjsnbTsp4AmbmJzcDvshKTsoJUoVSkuLi4nLCBrZXk6IFtdLCBkaXNhYmxlOiB0cnVlIH0sXG4gICAgICB7IHRleHQ6ICfsnbjsh4QoUCkuLi4nLCBrZXk6IFsnQ3RybCcsICdQJ10sIGRpc2FibGU6IHRydWUgfSxcbiAgICAgIHsgdGV4dDogJ+uBneuCtOq4sChYKScsIGtleTogW10sIGRpc2FibGU6IHRydWUgfSxcbiAgICBdLFxuICB9LFxuICB7XG4gICAgaWQ6ICdlZGl0JyxcbiAgICB0aXRsZTogJ+2OuOynkScsXG4gICAga2V5OiAnRScsXG4gICAgc2xvdHM6IFtcbiAgICAgIHsgdGV4dDogJ+yLpO2WiSZuYnNwO+y3qOyGjChVKScsIGtleTogWydDdHJsJywgJ1onXSwgZGlzYWJsZTogdHJ1ZSB9LFxuICAgICAgeyB0ZXh0OiAn7J6Y652864K06riwKFQpJywga2V5OiBbJ0N0cmwnLCAnWCddLCBkaXNhYmxlOiB0cnVlIH0sXG4gICAgICB7IHRleHQ6ICfrs7XsgqwoQyknLCBrZXk6IFsnQ3RybCcsICdDJ10sIGRpc2FibGU6IHRydWUgfSxcbiAgICAgIHsgdGV4dDogJ+u2meyXrOuEo+q4sChQKScsIGtleTogWydDdHJsJywgJ1YnXSwgZGlzYWJsZTogdHJ1ZSB9LFxuICAgICAgeyB0ZXh0OiAn7IKt7KCcKEQpJywga2V5OiBbJ0RlbCddLCBkaXNhYmxlOiB0cnVlIH0sXG4gICAgICB7IHRleHQ6ICdCaW5n7Jy866GcJm5ic3A76rKA7IOJKFMpLi4uJywga2V5OiBbJ0N0cmwnLCAnRSddLCBkaXNhYmxlOiB0cnVlIH0sXG4gICAgICB7IHRleHQ6ICfssL7quLAoRikuLi4nLCBrZXk6IFsnQ3RybCcsICdGJ10sIGRpc2FibGU6IHRydWUgfSxcbiAgICAgIHsgdGV4dDogJ+uLpOydjCZuYnNwO+ywvuq4sChOKScsIGtleTogWydGMyddLCBkaXNhYmxlOiB0cnVlIH0sXG4gICAgICB7IHRleHQ6ICfsnbTsoIQmbmJzcDvssL7quLAoViknLCBrZXk6IFsnU2hpZnQnLCAnRjMnXSwgZGlzYWJsZTogdHJ1ZSB9LFxuICAgICAgeyB0ZXh0OiAn67CU6r646riwKFIpLi4uJywga2V5OiBbJ0N0cmwnLCAnSCddLCBkaXNhYmxlOiB0cnVlIH0sXG4gICAgICB7IHRleHQ6ICfsnbTrj5koRykuLi4nLCBrZXk6IFsnQ3RybCcsICdHJ10sIGRpc2FibGU6IHRydWUgfSxcbiAgICAgIHsgdGV4dDogJ+uqqOuRkCZuYnNwO+yEoO2DnShBKScsIGtleTogWydDdHJsJywgJ0EnXSwgZGlzYWJsZTogdHJ1ZSB9LFxuICAgICAgeyB0ZXh0OiAn7Iuc6rCEL+uCoOynnChEKScsIGtleTogWydGNSddLCBkaXNhYmxlOiB0cnVlIH0sXG4gICAgXSxcbiAgfSxcbiAge1xuICAgIGlkOiAnZm9ybWF0JyxcbiAgICB0aXRsZTogJ+yEnOyLnScsXG4gICAga2V5OiAnTycsXG4gICAgc2xvdHM6IFtcbiAgICAgIHsgdGV4dDogJ+yekOuPmSZuYnNwO+ykhCZuYnNwO+uwlOq/iChXKScsIGtleTogW10sIGRpc2FibGU6IHRydWUgfSxcbiAgICAgIHsgdGV4dDogJ+q4gOq8tChGKS4uLicsIGtleTogW10sIGRpc2FibGU6IHRydWUgfSxcbiAgICBdLFxuICB9LFxuICB7XG4gICAgaWQ6ICd2aWV3JyxcbiAgICB0aXRsZTogJ+uztOq4sCcsXG4gICAga2V5OiAnVicsXG4gICAgc2xvdHM6IFtcbiAgICAgIHsgdGV4dDogJ+2ZleuMgO2VmOq4sChaKScsIGtleTogWydDdHJsJywgJysnXSwgZGlzYWJsZTogdHJ1ZSB9LFxuICAgICAgeyB0ZXh0OiAn7LaV7IaM7ZWY6riwKFgpJywga2V5OiBbJ0N0cmwnLCAnLSddLCBkaXNhYmxlOiB0cnVlIH0sXG4gICAgICB7IHRleHQ6ICfsg4Htg5wmbmJzcDvtkZzsi5zspIQoUyknLCBrZXk6IFtdLCBkaXNhYmxlOiB0cnVlIH0sXG4gICAgXSxcbiAgfSxcbiAge1xuICAgIGlkOiAnaGVscCcsXG4gICAgdGl0bGU6ICfrj4Tsm4Drp5AnLFxuICAgIGtleTogJ0gnLFxuICAgIHNsb3RzOiBbXG4gICAgICB7IHRleHQ6ICfrj4Tsm4Drp5AmbmJzcDvrs7TquLAoSCknLCBrZXk6IFtdLCBkaXNhYmxlOiB0cnVlIH0sXG4gICAgICB7IHRleHQ6ICftlLzrk5zrsLEmbmJzcDvrs7TrgrTquLAoRiknLCBrZXk6IFtdLCBkaXNhYmxlOiB0cnVlIH0sXG4gICAgICB7IHRleHQ6ICfrqZTrqqjsnqUmbmJzcDvsoJXrs7QoQSknLCBrZXk6IFtdLCBkaXNhYmxlOiB0cnVlIH0sXG4gICAgXSxcbiAgfSxcbl07XG5cbmV4cG9ydCBkZWZhdWx0IGJ1dHRvbnM7XG4iLCJpbXBvcnQgJy4vc3R5bGUuc2Nzcyc7XHJcbmltcG9ydCBzYW5kYm94REIgZnJvbSAnLi9jb3JlL0luZGV4ZWREQic7XHJcbmltcG9ydCBIb21lIGZyb20gJy4vdmlldy9Ib21lJztcclxuaW1wb3J0IFRldHJpcyBmcm9tICcuL3ZpZXcvVGV0cmlzJztcclxuaW1wb3J0IEZsYXBweUJpcmQgZnJvbSAnLi92aWV3L0ZsYXBweUJpcmQnO1xyXG5pbXBvcnQgSWNvbiBmcm9tICcuL3ZpZXcvQ29tbW9uL0ljb24nO1xyXG5pbXBvcnQgQXBwIGZyb20gJy4vQXBwJztcclxuaW1wb3J0IE5vdGVQYWQgZnJvbSAnLi92aWV3L05vdGVQYWQnO1xyXG5pbXBvcnQgTm90ZVBhZEhlYWRlciBmcm9tICcuL3ZpZXcvTm90ZVBhZC9jb21wb25lbnRzL05vdGVQYWRIZWFkZXInO1xyXG5pbXBvcnQgTm90ZVBhZEJvZHkgZnJvbSAnLi92aWV3L05vdGVQYWQvY29tcG9uZW50cy9Ob3RlUGFkQm9keSc7XHJcbmltcG9ydCBJY29ucyBmcm9tICcuL3ZpZXcvQ29tbW9uL0ljb25zJztcclxuaW1wb3J0IEZvb3RlciBmcm9tICcuL3ZpZXcvQ29tbW9uL0Zvb3Rlcic7XHJcbmltcG9ydCBOb3RlUGFkQnV0dG9uIGZyb20gJy4vdmlldy9Ob3RlUGFkL2NvbXBvbmVudHMvTm90ZVBhZEhlYWRlckJ1dHRvbic7XHJcblxyXG5zYW5kYm94REIub3BlbkRCKCk7XHJcblxyXG5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ215LWFwcCcsIEFwcCk7XHJcbmN1c3RvbUVsZW1lbnRzLmRlZmluZSgnbXktZm9vdGVyJywgRm9vdGVyKTtcclxuY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdteS1ob21lJywgSG9tZSk7XHJcbmN1c3RvbUVsZW1lbnRzLmRlZmluZSgnbXktdGV0cmlzJywgVGV0cmlzKTtcclxuY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdteS1mbGFwcHliaXJkJywgRmxhcHB5QmlyZCk7XHJcbmN1c3RvbUVsZW1lbnRzLmRlZmluZSgnbXktaWNvbnMnLCBJY29ucyk7XHJcbmN1c3RvbUVsZW1lbnRzLmRlZmluZSgnbXktaWNvbicsIEljb24pO1xyXG5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ215LW5vdGVwYWQnLCBOb3RlUGFkKTtcclxuY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdteS1ub3RlcGFkLWhlYWRlcicsIE5vdGVQYWRIZWFkZXIpO1xyXG5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ215LW5vdGVwYWQtYm9keScsIE5vdGVQYWRCb2R5KTtcclxuY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdteS1ub3RlcGFkLWJ1dHRvbicsIE5vdGVQYWRCdXR0b24pO1xyXG4iLCJpbXBvcnQgcm91dGVyIGZyb20gJy4vY29yZS9Sb3V0ZXInO1xyXG5pbXBvcnQgeyBodG1sIH0gZnJvbSAnLi91dGlscy91dGlscyc7XHJcbmltcG9ydCBXZWJDb21wb25lbnQgZnJvbSAnLi9jb3JlL1dlYkNvbXBvbmVudCc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBcHAgZXh0ZW5kcyBXZWJDb21wb25lbnQge1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgc3VwZXIoKTtcclxuICAgIHJvdXRlci5yZW5kZXIoKTtcclxuICB9XHJcblxyXG4gIGNvbm5lY3RlZENhbGxiYWNrKCkge1xyXG4gICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdwb3BzdGF0ZScsICgpID0+IHJvdXRlci5yZW5kZXIoKSk7XHJcbiAgfVxyXG5cclxuICBnZXRIVE1MKCkge1xyXG4gICAgcmV0dXJuIGh0bWxgXHJcbiAgICAgIDxteS1pY29ucyBzbG90PVwiaWNvbnNcIiB0YWJpbmRleD1cIi0xXCI+PC9teS1pY29ucz5cclxuICAgICAgPG15LWZvb3RlciBzbG90PVwiZm9vdGVyXCI+PC9teS1mb290ZXI+XHJcbiAgICBgO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgV2ViQ29tcG9uZW50IGZyb20gJy4uLy4uL2NvcmUvV2ViQ29tcG9uZW50JztcbmltcG9ydCB7IGh0bWwgfSBmcm9tICcuLi8uLi91dGlscy91dGlscyc7XG5pbXBvcnQgeyBpY29ucyB9IGZyb20gJy4uLy4uL3V0aWxzL3JvdXRlcyc7XG5pbXBvcnQgcm91dGVyIGZyb20gJy4uLy4uL2NvcmUvUm91dGVyJztcbmltcG9ydCB3aW5kb3dMb2dvIGZyb20gJy4uLy4uLy4uL3B1YmxpYy93aW5kb3dMb2dvLnBuZyc7XG5pbXBvcnQgc2VhcmNoSWNvbiBmcm9tICcuLi8uLi8uLi9wdWJsaWMvc2VhcmNoSWNvbi5wbmcnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGb290ZXIgZXh0ZW5kcyBXZWJDb21wb25lbnQge1xuICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmhhbmRsZUNsaWNrLmJpbmQodGhpcykpO1xuICB9XG5cbiAgZ2V0SFRNTCgpIHtcbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxpbWcgYWx0PVwid2luZG93X2xvZ29cIiBzcmM9JHt3aW5kb3dMb2dvfSBjbGFzcz1cIndpbmRvd19pY29uXCIgLz5cbiAgICAgIDxkaXYgY2xhc3M9XCJpbnB1dF9ib3hcIj5cbiAgICAgICAgPGltZyBhbHQ9XCJzZWFyY2hcIiBzcmM9JHtzZWFyY2hJY29ufSBjbGFzcz1cIndpbmRvd19pY29uXCIgLz48aW5wdXQgdHlwZT1cInRleHRcIiBwbGFjZWhvbGRlcj1cIuywvuq4sFwiIC8+XG4gICAgICA8L2Rpdj5cbiAgICAgICR7aWNvbnNcbiAgICAgICAgLm1hcCgoaWNvbikgPT4ge1xuICAgICAgICAgIHJldHVybiBodG1sYCA8bXktaWNvbiBkYXRhLXBhdGg9XCIke2ljb24ucGF0aH1cIiBkYXRhLWljb25TcmM9XCIke2ljb24uaWNvblNyY31cIj48L215LWljb24+IGA7XG4gICAgICAgIH0pXG4gICAgICAgIC5qb2luKCcnKX1cbiAgICBgO1xuICB9XG5cbiAgaGFuZGxlQ2xpY2soZSkge1xuICAgIGlmICghZS50YXJnZXQuY2xvc2VzdCgnbXktaWNvbicpKSByZXR1cm47XG5cbiAgICBjb25zdCBpY29uID0gZS50YXJnZXQuY2xvc2VzdCgnbXktaWNvbicpO1xuICAgIHJvdXRlci5uYXZpZ2F0ZVRvKGljb24uZGF0YXNldC5wYXRoKTtcbiAgfVxufVxuIiwiaW1wb3J0IFdlYkNvbXBvbmVudCBmcm9tICcuLi8uLi9jb3JlL1dlYkNvbXBvbmVudCc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIb21lIGV4dGVuZHMgV2ViQ29tcG9uZW50IHt9XHJcbiIsImltcG9ydCBXZWJDb21wb25lbnQgZnJvbSAnLi4vLi4vY29yZS9XZWJDb21wb25lbnQnO1xyXG5pbXBvcnQgeyBodG1sIH0gZnJvbSAnLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGV0cmlzIGV4dGVuZHMgV2ViQ29tcG9uZW50IHtcclxuICBnZXRIVE1MKCkge1xyXG4gICAgcmV0dXJuIGh0bWxgXHJcbiAgICAgIDxoMT5UZXRyaXM8L2gxPlxyXG4gICAgICA8cD5Zb3UgYXJlIHZpZXdpbmcgdGhlIFRldHJpcyBjb21wb25lbnQhPC9wPlxyXG4gICAgYDtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFdlYkNvbXBvbmVudCBmcm9tICcuLi8uLi9jb3JlL1dlYkNvbXBvbmVudCc7XHJcbmltcG9ydCB7IGh0bWwgfSBmcm9tICcuLi8uLi91dGlscy91dGlscyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGbGFwcHlCaXJkIGV4dGVuZHMgV2ViQ29tcG9uZW50IHtcclxuICBnZXRIVE1MKCkge1xyXG4gICAgcmV0dXJuIGh0bWxgXHJcbiAgICAgIDxoMT5GbGFwcHkgQmlyZDwvaDE+XHJcbiAgICAgIDxwPllvdSBhcmUgdmlld2luZyB0aGUgRmxhcHB5IEJpcmQgY29tcG9uZW50ITwvcD5cclxuICAgICAgPHA+WW91IGFyZSB2aWV3aW5nIHRoZSBGbGFwcHkgQmlyZCBjb21wb25lbnQhPC9wPlxyXG4gICAgICA8cD5Zb3UgYXJlIHZpZXdpbmcgdGhlIEZsYXBweSBCaXJkIGNvbXBvbmVudCE8L3A+XHJcbiAgICAgIDxwPllvdSBhcmUgdmlld2luZyB0aGUgRmxhcHB5IEJpcmQgY29tcG9uZW50ITwvcD5cclxuICAgICAgPHA+WW91IGFyZSB2aWV3aW5nIHRoZSBGbGFwcHkgQmlyZCBjb21wb25lbnQhPC9wPlxyXG4gICAgICA8cD5Zb3UgYXJlIHZpZXdpbmcgdGhlIEZsYXBweSBCaXJkIGNvbXBvbmVudCE8L3A+XHJcbiAgICBgO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBodG1sIH0gZnJvbSAnLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgcm91dGVyIGZyb20gJy4uLy4uL2NvcmUvUm91dGVyJztcclxuaW1wb3J0IFdlYkNvbXBvbmVudCBmcm9tICcuLi8uLi9jb3JlL1dlYkNvbXBvbmVudCc7XHJcbmltcG9ydCB7IGljb25zIH0gZnJvbSAnLi4vLi4vdXRpbHMvcm91dGVzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEljb25zIGV4dGVuZHMgV2ViQ29tcG9uZW50IHtcclxuICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcclxuICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XHJcbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5oYW5kbGVDbGljay5iaW5kKHRoaXMpKTtcclxuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcignZGJsY2xpY2snLCB0aGlzLmhhbmRsZURvdWJsZUNsaWNrLmJpbmQodGhpcykpO1xyXG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5oYW5kbGVLZXlEb3duLmJpbmQodGhpcykpO1xyXG4gIH1cclxuXHJcbiAgZ2V0SFRNTCgpIHtcclxuICAgIHJldHVybiBodG1sYFxyXG4gICAgICAke2ljb25zXHJcbiAgICAgICAgLm1hcCgoaWNvbikgPT4ge1xyXG4gICAgICAgICAgcmV0dXJuIGh0bWxgXHJcbiAgICAgICAgICAgIDxteS1pY29uIGRhdGEtcGF0aD0ke2ljb24ucGF0aH0gZGF0YS1sYWJlbD0ke2ljb24ubGFiZWx9IGRhdGEtaWNvblNyYz0ke2ljb24uaWNvblNyY30+PC9teS1pY29uPlxyXG4gICAgICAgICAgYDtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5qb2luKCcnKX1cclxuICAgIGA7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVDbGljayhlKSB7XHJcbiAgICBpZiAoIWUudGFyZ2V0LmNsb3Nlc3QoJ215LWljb24nKSkgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IGljb24gPSBlLnRhcmdldC5jbG9zZXN0KCdteS1pY29uJyk7XHJcbiAgICBpY29uLnRvZ2dsZUF0dHJpYnV0ZSgnY2hlY2tlZCcpO1xyXG4gICAgdGhpcy5xdWVyeVNlbGVjdG9yQWxsKCdteS1pY29uJykuZm9yRWFjaCgobm9kZSkgPT4ge1xyXG4gICAgICBpZiAobm9kZSAhPT0gaWNvbikge1xyXG4gICAgICAgIG5vZGUucmVtb3ZlQXR0cmlidXRlKCdjaGVja2VkJyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgaGFuZGxlRG91YmxlQ2xpY2soZSkge1xyXG4gICAgaWYgKCFlLnRhcmdldC5jbG9zZXN0KCdteS1pY29uJykpIHJldHVybjtcclxuXHJcbiAgICBjb25zdCBpY29uID0gZS50YXJnZXQuY2xvc2VzdCgnbXktaWNvbicpO1xyXG4gICAgcm91dGVyLm5hdmlnYXRlVG8oaWNvbi5kYXRhc2V0LnBhdGgpO1xyXG4gIH1cclxuXHJcbiAgaGFuZGxlS2V5RG93bihlKSB7XHJcbiAgICBjb25zdCBjaGVja2VkRWwgPSB0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoJ215LWljb25bY2hlY2tlZF0nKTtcclxuXHJcbiAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicpIHtcclxuICAgICAgaWYgKGNoZWNrZWRFbC5sZW5ndGggPiAxKSByZXR1cm47XHJcbiAgICAgIGlmICghY2hlY2tlZEVsKSByZXR1cm47XHJcbiAgICAgIHJvdXRlci5uYXZpZ2F0ZVRvKGNoZWNrZWRFbFswXS5kYXRhc2V0LnBhdGgpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBodG1sIH0gZnJvbSAnLi4vLi4vdXRpbHMvdXRpbHMnO1xuaW1wb3J0IFdlYkNvbXBvbmVudCBmcm9tICcuLi8uLi9jb3JlL1dlYkNvbXBvbmVudCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEljb24gZXh0ZW5kcyBXZWJDb21wb25lbnQge1xuICBnZXRIVE1MKCkge1xuICAgIGNvbnN0IHsgbGFiZWwsIGljb25zcmMgfSA9IHRoaXMuZGF0YXNldDtcbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxpbWcgYWx0PVwiJHtsYWJlbH1faWNvblwiIHNyYz0ke2ljb25zcmN9IC8+XG4gICAgICAke2xhYmVsID8gYDxzcGFuIGNsYXNzPVwiaWNvbl9uYW1lXCI+JHtsYWJlbH08L3NwYW4+YCA6ICcnfVxuICAgIGA7XG4gIH1cbn1cbiIsImltcG9ydCBXZWJDb21wb25lbnQgZnJvbSAnLi4vLi4vY29yZS9XZWJDb21wb25lbnQnO1xuaW1wb3J0IHsgaHRtbCB9IGZyb20gJy4uLy4uL3V0aWxzL3V0aWxzJztcbmltcG9ydCAnLi9zdHlsZXMuc2Nzcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5vdGVQYWQgZXh0ZW5kcyBXZWJDb21wb25lbnQge1xuICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICB9XG5cbiAgZ2V0SFRNTCgpIHtcbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxteS1ub3RlcGFkLWhlYWRlcj48L215LW5vdGVwYWQtaGVhZGVyPlxuICAgICAgPG15LW5vdGVwYWQtYm9keT48L215LW5vdGVwYWQtYm9keT5cbiAgICBgO1xuICB9XG59XG4iLCJpbXBvcnQgeyBodG1sIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xuaW1wb3J0IFdlYkNvbXBvbmVudCBmcm9tICcuLi8uLi8uLi9jb3JlL1dlYkNvbXBvbmVudCc7XG5pbXBvcnQgYnV0dG9ucyBmcm9tICcuLi9jb25zdC9idXR0b25zJztcbmltcG9ydCBOb3RlUGFkSWNvbiBmcm9tICcuLi8uLi8uLi8uLi9wdWJsaWMvbm90ZXBhZC5wbmcnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBOb3RlUGFkSGVhZGVyIGV4dGVuZHMgV2ViQ29tcG9uZW50IHtcbiAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgfVxuXG4gIGdldEhUTUwoKSB7XG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8aGVhZGVyPlxuICAgICAgICA8c3Bhbj48aW1nIGFsdD1cIm5vdGVwYWRfaWNvblwiIHNyYz0ke05vdGVQYWRJY29ufSAvPuygnOuqqeyXhuydjCAtIFdpbmRvd3Mg66mU66qo7J6lPC9zcGFuPlxuICAgICAgICA8ZGl2IGNsYXNzPVwidmlld19idXR0b25zXCI+XG4gICAgICAgICAgPGJ1dHRvbiBpZD1cIm1pbmlcIj7wn5eVPC9idXR0b24+XG4gICAgICAgICAgPGJ1dHRvbiBpZD1cImZ1bGxcIj7wn5eWPC9idXR0b24+XG4gICAgICAgICAgPGJ1dHRvbiBpZD1cImNsb3NlXCI+4oWpPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9oZWFkZXI+XG4gICAgICA8ZGl2IGNsYXNzPVwiZWRpdF9idXR0b25zXCI+XG4gICAgICAgICR7YnV0dG9uc1xuICAgICAgICAgIC5tYXAoXG4gICAgICAgICAgICAoYnV0dG9uKSA9PlxuICAgICAgICAgICAgICBodG1sYFxuICAgICAgICAgICAgICAgIDxteS1ub3RlcGFkLWJ1dHRvblxuICAgICAgICAgICAgICAgICAgaWQ9JHtidXR0b24uaWR9XG4gICAgICAgICAgICAgICAgICBkYXRhLXRpdGxlPSR7YnV0dG9uLnRpdGxlfVxuICAgICAgICAgICAgICAgICAgZGF0YS1rZXk9JHtidXR0b24ua2V5fVxuICAgICAgICAgICAgICAgICAgZGF0YS1zbG90cz0ke0pTT04uc3RyaW5naWZ5KGJ1dHRvbi5zbG90cyl9XG4gICAgICAgICAgICAgICAgPjwvbXktbm90ZXBhZC1idXR0b24+XG4gICAgICAgICAgICAgIGBcbiAgICAgICAgICApXG4gICAgICAgICAgLmpvaW4oJycpfVxuICAgICAgPC9kaXY+XG4gICAgYDtcbiAgfVxufVxuIiwiaW1wb3J0IHsgaHRtbCB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IFdlYkNvbXBvbmVudCBmcm9tICcuLi8uLi8uLi9jb3JlL1dlYkNvbXBvbmVudCc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBOb3RlUGFkQm9keSBleHRlbmRzIFdlYkNvbXBvbmVudCB7XHJcbiAgZ2V0SFRNTCgpIHtcclxuICAgIHJldHVybiBodG1sYDx0ZXh0YXJlYT48L3RleHRhcmVhPmA7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IGh0bWwgfSBmcm9tICcuLi8uLi8uLi91dGlscy91dGlscyc7XG5pbXBvcnQgV2ViQ29tcG9uZW50IGZyb20gJy4uLy4uLy4uL2NvcmUvV2ViQ29tcG9uZW50JztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTm90ZVBhZEJ1dHRvbiBleHRlbmRzIFdlYkNvbXBvbmVudCB7XG4gIGdldEhUTUwoKSB7XG4gICAgY29uc3QgeyB0aXRsZSwga2V5LCBzbG90cyB9ID0gdGhpcy5kYXRhc2V0O1xuICAgIHJldHVybiBodG1sYFxuICAgICAgJHt0aXRsZX0oPHU+JHtrZXl9PC91PilcbiAgICAgIDxkaXYgY2xhc3M9XCJwb3B1cFwiPlxuICAgICAgICAke0pTT04ucGFyc2Uoc2xvdHMpXG4gICAgICAgICAgLm1hcChcbiAgICAgICAgICAgIChzbG90KSA9PiBodG1sYFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic2xvdFwiIGRhdGEtZGlzYWJsZT0keyEhc2xvdC5kaXNhYmxlfT5cbiAgICAgICAgICAgICAgICA8ZGl2PiR7c2xvdC50ZXh0fTwvZGl2PlxuICAgICAgICAgICAgICAgICR7c2xvdC5rZXkubGVuZ3RoID4gMCA/IGA8ZGl2PiR7c2xvdC5rZXkuam9pbignICsgJyl9PC9kaXY+YCA6ICcnfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIGBcbiAgICAgICAgICApXG4gICAgICAgICAgLmpvaW4oJycpfVxuICAgICAgPC9kaXY+XG4gICAgYDtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJkYiIsImNvbnN0cnVjdG9yIiwiZGJOYW1lIiwiZGJWZXJzaW9uIiwic3RvcmVzIiwidGhpcyIsImFzeW5jIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJyZXF1ZXN0Iiwid2luZG93IiwiaW5kZXhlZERCIiwib3BlbiIsIm9uc3VjY2VzcyIsInJlc3VsdCIsIm9uZXJyb3IiLCJlIiwib251cGdyYWRlbmVlZGVkIiwiZm9yRWFjaCIsInN0b3JlIiwib2JqZWN0U3RvcmVOYW1lcyIsImNvbnRhaW5zIiwiY3JlYXRlT2JqZWN0U3RvcmUiLCJrZXlQYXRoIiwic3RvcmVOYW1lIiwiaWQiLCJ0cmFuc2FjdGlvbiIsIm9iamVjdFN0b3JlIiwiZ2V0IiwiZ2V0QWxsIiwiZGF0YSIsInB1dCIsImRlbGV0ZSIsInJlbmRlclJhdyIsInN0cmluZyIsInZhbHVlcyIsIlN0cmluZyIsInJhdyIsIldlYkNvbXBvbmVudCIsIkhUTUxFbGVtZW50Iiwic3VwZXIiLCJ0ZW1wbGF0ZSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImdldFNoYWRvd1N0eWxlIiwiZ2V0U2hhZG93SFRNTCIsImF0dGFjaFNoYWRvdyIsIm1vZGUiLCJpbm5lckhUTUwiLCJnZXRIVE1MIiwiY29ubmVjdGVkQ2FsbGJhY2siLCJyZW5kZXIiLCJzaGFkb3dSb290IiwiYXBwZW5kIiwiY29udGVudCIsImNsb25lTm9kZSIsInJvdXRlcyIsInBhdGgiLCJodG1sIiwibGFiZWwiLCJpY29uU3JjIiwiaWNvbnMiLCJyZWR1Y2UiLCJwcmV2Iiwicm91dGVyIiwicm91dGUiLCJmaW5kIiwidmFsdWUiLCJsb2NhdGlvbiIsInBhdGhuYW1lIiwicmVwbGFjZSIsImNvbnNvbGUiLCJsb2ciLCJxdWVyeVNlbGVjdG9yIiwicmVwbGFjZVRvIiwibmF2aWdhdGVUbyIsInVybCIsImhpc3RvcnkiLCJwdXNoU3RhdGUiLCJyZXBsYWNlU3RhdGUiLCJiYWNrIiwidGl0bGUiLCJrZXkiLCJzbG90cyIsInRleHQiLCJkaXNhYmxlIiwiY3VzdG9tRWxlbWVudHMiLCJkZWZpbmUiLCJhZGRFdmVudExpc3RlbmVyIiwiaGFuZGxlQ2xpY2siLCJiaW5kIiwiaWNvbiIsImpvaW4iLCJ0YXJnZXQiLCJjbG9zZXN0IiwiZGF0YXNldCIsImhhbmRsZURvdWJsZUNsaWNrIiwiaGFuZGxlS2V5RG93biIsInRvZ2dsZUF0dHJpYnV0ZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJub2RlIiwicmVtb3ZlQXR0cmlidXRlIiwiY2hlY2tlZEVsIiwibGVuZ3RoIiwiaWNvbnNyYyIsImJ1dHRvbiIsIkpTT04iLCJzdHJpbmdpZnkiLCJwYXJzZSIsIm1hcCIsInNsb3QiXSwic291cmNlUm9vdCI6IiJ9