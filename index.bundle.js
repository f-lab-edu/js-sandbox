(()=>{"use strict";var e="/js-sandbox/";const t=new class{db;constructor(e,t,n){this.dbName=e,this.dbVersion=t,this.stores=n}async openDB(){return new Promise(((e,t)=>{const n=window.indexedDB.open(this.dbName,this.dbVersion);n.onsuccess=()=>{this.db=n.result,e()},n.onerror=e=>{t(e)},n.onupgradeneeded=()=>{this.db=n.result,this.stores.forEach((e=>{this.db.objectStoreNames.contains(e)||this.db.createObjectStore(e,{keyPath:"id"})}))}}))}async getData(e,t){return new Promise(((n,s)=>{const a=this.db.transaction(e,"readonly").objectStore(e).get(t);a.onsuccess=()=>{n(a.result)},a.onerror=e=>{s(e)}}))}async getAllData(e){return new Promise(((t,n)=>{const s=this.db.transaction(e,"readonly").objectStore(e).getAll();s.onsuccess=()=>{t(s.result)},s.onerror=e=>{n(e)}}))}async upsertData(e,t){return new Promise(((n,s)=>{const a=this.db.transaction(e,"readwrite").objectStore(e).put(t);a.onsuccess=()=>{n(a.result)},a.onerror=e=>{s(e)}}))}async deleteData(e,t){return new Promise(((n,s)=>{const a=this.db.transaction(e,"readwrite").objectStore(e).delete(t);a.onsuccess=()=>{n(a.result)},a.onerror=e=>{s(e)}}))}}("sandbox",1,["notes"]),n=(e,...t)=>String.raw(e,...t);class s extends HTMLElement{constructor(){super(),this.template=document.createElement("template"),this.getShadowStyle()&&this.getShadowHTML()?(this.attachShadow({mode:"open"}),this.template.innerHTML=n`
        <style>
          ${this.getShadowStyle()}
        </style>
        ${this.getShadowHTML()}
      `):this.template.innerHTML=this.getHTML()}connectedCallback(){this.render()}render(){this.shadowRoot?this.shadowRoot.append(this.template.content.cloneNode(!0)):this.append(this.template.content.cloneNode(!0))}getHTML(){return""}getShadowStyle(){return""}getShadowHTML(){return""}}const a=e+"2a583f97b153f7da7d41.png",i=[{path:"/",html:n`<my-home></my-home>`,label:"Home",iconSrc:null},{path:"/tetris",html:n`<my-tetris></my-tetris>`,label:"Tetris",iconSrc:e+"71c0bea6462001116fcf.png"},{path:"/flappybird",html:n`<my-flappybird></my-flappybird>`,label:"Flappy&nbsp;Bird",iconSrc:e+"39b884119b49599495ed.png"},{path:"/notepad",html:n`<my-notepad></my-notepad>`,label:"Note&nbsp;Pad",iconSrc:a}],o=i.reduce(((e,t)=>{const{path:n,label:s,iconSrc:a}=t;return"/"===t.path?e:[...e,{path:n,label:s,iconSrc:a}]}),[]),l=i,r=new class{constructor(e){this.routes=e}render(){const e=this.routes.find((e=>e.path===window.location.pathname));e?document.querySelector("#page").innerHTML=e.html:this.replaceTo("/")}navigateTo(e){window.history.pushState(null,null,e),this.render()}replaceTo(e){window.history.replaceState(null,null,e),this.render()}back(){window.history.back(),this.render()}}(l),d=[{id:"file",title:"ÌååÏùº",key:"F",slots:[{text:"ÏÉàÎ°ú&nbsp;ÎßåÎì§Í∏∞(N)",key:["Ctrl","N"],disable:!0},{text:"ÏÉà&nbsp;Ï∞Ω(W)",key:["Ctrl","Shift","N"],disable:!0},{text:"Ï†ÄÏû•(S)",key:["Ctrl","S"]},{text:"ÏÇ≠Ï†ú(D)",key:["Ctrl","Shift","S"],disable:!0},{text:"ÌéòÏù¥ÏßÄ&nbsp;ÏÑ§Ï†ï(U)...",key:[],disable:!0},{text:"Ïù∏ÏáÑ(P)...",key:["Ctrl","P"],disable:!0},{text:"ÎÅùÎÇ¥Í∏∞(X)",key:[],disable:!0}]},{id:"edit",title:"Ìé∏Ïßë",key:"E",slots:[{text:"Ïã§Ìñâ&nbsp;Ï∑®ÏÜå(U)",key:["Ctrl","Z"],disable:!0},{text:"ÏûòÎùºÎÇ¥Í∏∞(T)",key:["Ctrl","X"],disable:!0},{text:"Î≥µÏÇ¨(C)",key:["Ctrl","C"],disable:!0},{text:"Î∂ôÏó¨ÎÑ£Í∏∞(P)",key:["Ctrl","V"],disable:!0},{text:"ÏÇ≠Ï†ú(D)",key:["Del"],disable:!0},{text:"BingÏúºÎ°ú&nbsp;Í≤ÄÏÉâ(S)...",key:["Ctrl","E"],disable:!0},{text:"Ï∞æÍ∏∞(F)...",key:["Ctrl","F"],disable:!0},{text:"Îã§Ïùå&nbsp;Ï∞æÍ∏∞(N)",key:["F3"],disable:!0},{text:"Ïù¥Ï†Ñ&nbsp;Ï∞æÍ∏∞(V)",key:["Shift","F3"],disable:!0},{text:"Î∞îÍæ∏Í∏∞(R)...",key:["Ctrl","H"],disable:!0},{text:"Ïù¥Îèô(G)...",key:["Ctrl","G"],disable:!0},{text:"Î™®Îëê&nbsp;ÏÑ†ÌÉù(A)",key:["Ctrl","A"],disable:!0},{text:"ÏãúÍ∞Ñ/ÎÇ†Ïßú(D)",key:["F5"],disable:!0}]},{id:"format",title:"ÏÑúÏãù",key:"O",slots:[{text:"ÏûêÎèô&nbsp;Ï§Ñ&nbsp;Î∞îÍøà(W)",key:[],disable:!0},{text:"Í∏ÄÍº¥(F)...",key:[],disable:!0}]},{id:"view",title:"Î≥¥Í∏∞",key:"V",slots:[{text:"ÌôïÎåÄÌïòÍ∏∞(Z)",key:["Ctrl","+"],disable:!0},{text:"Ï∂ïÏÜåÌïòÍ∏∞(X)",key:["Ctrl","-"],disable:!0},{text:"ÏÉÅÌÉú&nbsp;ÌëúÏãúÏ§Ñ(S)",key:[],disable:!0}]},{id:"help",title:"ÎèÑÏõÄÎßê",key:"H",slots:[{text:"ÎèÑÏõÄÎßê&nbsp;Î≥¥Í∏∞(H)",key:[],disable:!0},{text:"ÌîºÎìúÎ∞±&nbsp;Î≥¥ÎÇ¥Í∏∞(F)",key:[],disable:!0},{text:"Î©îÎ™®Ïû•&nbsp;Ï†ïÎ≥¥(A)",key:[],disable:!0}]}],c=e+"59cb65e4f8f2627d6c2c.png",p=e+"bc8d31a2338dd0b3f68a.png";t.openDB(),customElements.define("my-app",class extends s{constructor(){super(),r.render()}connectedCallback(){super.connectedCallback(),window.addEventListener("popstate",(()=>r.render()))}getHTML(){return n`
      <my-icons slot="icons" tabindex="-1"></my-icons>
      <my-footer slot="footer"></my-footer>
    `}}),customElements.define("my-footer",class extends s{connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.handleClick.bind(this))}getHTML(){return n`
      <img alt="window_logo" src=${c} class="window_icon" />
      <div class="input_box">
        <img alt="search" src=${p} class="window_icon" /><input type="text" placeholder="Ï∞æÍ∏∞" />
      </div>
      ${o.map((e=>n` <my-icon data-path="${e.path}" data-iconSrc="${e.iconSrc}"></my-icon> `)).join("")}
    `}handleClick(e){if(!e.target.closest("my-icon"))return;const t=e.target.closest("my-icon");r.navigateTo(t.dataset.path)}}),customElements.define("my-home",class extends s{}),customElements.define("my-tetris",class extends s{getHTML(){return n`
      <h1>Tetris</h1>
      <p>You are viewing the Tetris component!</p>
    `}}),customElements.define("my-flappybird",class extends s{getHTML(){return n`
      <h1>Flappy Bird</h1>
      <p>You are viewing the Flappy Bird component!</p>
      <p>You are viewing the Flappy Bird component!</p>
      <p>You are viewing the Flappy Bird component!</p>
      <p>You are viewing the Flappy Bird component!</p>
      <p>You are viewing the Flappy Bird component!</p>
      <p>You are viewing the Flappy Bird component!</p>
    `}}),customElements.define("my-icons",class extends s{connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.handleClick.bind(this)),this.addEventListener("dblclick",this.handleDoubleClick.bind(this)),this.addEventListener("keydown",this.handleKeyDown.bind(this))}getHTML(){return n`
      ${o.map((e=>n`
            <my-icon data-path=${e.path} data-label=${e.label} data-iconSrc=${e.iconSrc}></my-icon>
          `)).join("")}
    `}handleClick(e){if(!e.target.closest("my-icon"))return;const t=e.target.closest("my-icon");t.toggleAttribute("checked"),this.querySelectorAll("my-icon").forEach((e=>{e!==t&&e.removeAttribute("checked")}))}handleDoubleClick(e){if(!e.target.closest("my-icon"))return;const t=e.target.closest("my-icon");r.navigateTo(t.dataset.path)}handleKeyDown(e){const t=this.querySelectorAll("my-icon[checked]");if("Enter"===e.key){if(t.length>1)return;if(!t)return;r.navigateTo(t[0].dataset.path)}}}),customElements.define("my-icon",class extends s{getHTML(){const{label:e,iconsrc:t}=this.dataset;return n`
      <img alt="${e}_icon" src=${t} />
      ${e?`<span class="icon_name">${e}</span>`:""}
    `}}),customElements.define("my-notepad",class extends s{connectedCallback(){super.connectedCallback()}getHTML(){return n`
      <my-notepad-header></my-notepad-header>
      <my-notepad-body></my-notepad-body>
    `}}),customElements.define("my-notepad-header",class extends s{connectedCallback(){super.connectedCallback()}getHTML(){return n`
      <header>
        <span><img alt="notepad_icon" src=${a} />Ï†úÎ™©ÏóÜÏùå - Windows Î©îÎ™®Ïû•</span>
        <div class="view_buttons">
          <button id="mini">üóï</button>
          <button id="full">üóñ</button>
          <button id="close">‚Ö©</button>
        </div>
      </header>
      <div class="edit_buttons">
        ${d.map((e=>n`
                <my-notepad-button
                  id=${e.id}
                  data-title=${e.title}
                  data-key=${e.key}
                  data-slots=${JSON.stringify(e.slots)}
                ></my-notepad-button>
              `)).join("")}
      </div>
    `}}),customElements.define("my-notepad-body",class extends s{getHTML(){return n`<textarea></textarea>`}}),customElements.define("my-notepad-button",class extends s{getHTML(){const{title:e,key:t,slots:s}=this.dataset;return n`
      ${e}(<u>${t}</u>)
      <div class="popup">
        ${JSON.parse(s).map((e=>n`
              <div class="slot" data-disable=${!!e.disable}>
                <div>${e.text}</div>
                ${e.key.length>0?`<div>${e.key.join(" + ")}</div>`:""}
              </div>
            `)).join("")}
      </div>
    `}})})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UUFBWUM7O1VBRVZ3QixLQUFLRSxNQUFNekIsR0FDVjBCLEtBQ0VDLEdBQVMsQ0FBSTtpREFDdUJBLEVBQUt6Qjt1QkFDL0J5QixFQUFLMUI7a0JBQ1YwQixFQUFLNUIsSUFBSXFCLE9BQVMsRUFBSSxRQUFRTyxFQUFLNUIsSUFBSVUsS0FBSyxlQUFpQjs7Z0JBSXBFQSxLQUFLOztLQUdkLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9qYXZhc2NyaXB0LXNhbmRib3gvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vamF2YXNjcmlwdC1zYW5kYm94L3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL2phdmFzY3JpcHQtc2FuZGJveC8uL3NyYy9jb3JlL0luZGV4ZWREQi5qcyIsIndlYnBhY2s6Ly9qYXZhc2NyaXB0LXNhbmRib3gvLi9zcmMvdXRpbHMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vamF2YXNjcmlwdC1zYW5kYm94Ly4vc3JjL2NvcmUvV2ViQ29tcG9uZW50LmpzIiwid2VicGFjazovL2phdmFzY3JpcHQtc2FuZGJveC8uL3NyYy91dGlscy9yb3V0ZXMuanMiLCJ3ZWJwYWNrOi8vamF2YXNjcmlwdC1zYW5kYm94Ly4vc3JjL2NvcmUvUm91dGVyLmpzIiwid2VicGFjazovL2phdmFzY3JpcHQtc2FuZGJveC8uL3NyYy92aWV3L05vdGVQYWQvY29uc3QvYnV0dG9ucy5qcyIsIndlYnBhY2s6Ly9qYXZhc2NyaXB0LXNhbmRib3gvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vamF2YXNjcmlwdC1zYW5kYm94Ly4vc3JjL0FwcC5qcyIsIndlYnBhY2s6Ly9qYXZhc2NyaXB0LXNhbmRib3gvLi9zcmMvdmlldy9Db21tb24vRm9vdGVyLmpzIiwid2VicGFjazovL2phdmFzY3JpcHQtc2FuZGJveC8uL3NyYy92aWV3L0hvbWUvaW5kZXguanMiLCJ3ZWJwYWNrOi8vamF2YXNjcmlwdC1zYW5kYm94Ly4vc3JjL3ZpZXcvVGV0cmlzL2luZGV4LmpzIiwid2VicGFjazovL2phdmFzY3JpcHQtc2FuZGJveC8uL3NyYy92aWV3L0ZsYXBweUJpcmQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vamF2YXNjcmlwdC1zYW5kYm94Ly4vc3JjL3ZpZXcvQ29tbW9uL0ljb25zLmpzIiwid2VicGFjazovL2phdmFzY3JpcHQtc2FuZGJveC8uL3NyYy92aWV3L0NvbW1vbi9JY29uLmpzIiwid2VicGFjazovL2phdmFzY3JpcHQtc2FuZGJveC8uL3NyYy92aWV3L05vdGVQYWQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vamF2YXNjcmlwdC1zYW5kYm94Ly4vc3JjL3ZpZXcvTm90ZVBhZC9jb21wb25lbnRzL05vdGVQYWRIZWFkZXIuanMiLCJ3ZWJwYWNrOi8vamF2YXNjcmlwdC1zYW5kYm94Ly4vc3JjL3ZpZXcvTm90ZVBhZC9jb21wb25lbnRzL05vdGVQYWRCb2R5LmpzIiwid2VicGFjazovL2phdmFzY3JpcHQtc2FuZGJveC8uL3NyYy92aWV3L05vdGVQYWQvY29tcG9uZW50cy9Ob3RlUGFkSGVhZGVyQnV0dG9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIi9qcy1zYW5kYm94L1wiOyIsImNsYXNzIEluZGV4ZWREQiB7XHJcbiAgZGI7XHJcblxyXG4gIC8qKlxyXG4gICAqIOyDneyEseyekFxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBkYk5hbWVcclxuICAgKiBAcGFyYW0ge251bWJlcn0gZGJWZXJzaW9uXHJcbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gc3RvcmVzXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoZGJOYW1lLCBkYlZlcnNpb24sIHN0b3Jlcykge1xyXG4gICAgdGhpcy5kYk5hbWUgPSBkYk5hbWU7XHJcbiAgICB0aGlzLmRiVmVyc2lvbiA9IGRiVmVyc2lvbjtcclxuICAgIHRoaXMuc3RvcmVzID0gc3RvcmVzO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogREIg7Jik7ZSIIOuplOyEnOuTnFxyXG4gICAqIEByZXR1cm5zIHt2b2lkfVxyXG4gICAqL1xyXG4gIGFzeW5jIG9wZW5EQigpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSB3aW5kb3cuaW5kZXhlZERCLm9wZW4odGhpcy5kYk5hbWUsIHRoaXMuZGJWZXJzaW9uKTtcclxuXHJcbiAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuZGIgPSByZXF1ZXN0LnJlc3VsdDtcclxuICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICByZXF1ZXN0Lm9uZXJyb3IgPSAoZSkgPT4ge1xyXG4gICAgICAgIHJlamVjdChlKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHJlcXVlc3Qub251cGdyYWRlbmVlZGVkID0gKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuZGIgPSByZXF1ZXN0LnJlc3VsdDtcclxuXHJcbiAgICAgICAgdGhpcy5zdG9yZXMuZm9yRWFjaCgoc3RvcmUpID0+IHtcclxuICAgICAgICAgIGlmICghdGhpcy5kYi5vYmplY3RTdG9yZU5hbWVzLmNvbnRhaW5zKHN0b3JlKSkge1xyXG4gICAgICAgICAgICB0aGlzLmRiLmNyZWF0ZU9iamVjdFN0b3JlKHN0b3JlLCB7IGtleVBhdGg6ICdpZCcgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH07XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOuNsOydtO2EsCDsobDtmowg66mU7ISc65OcXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHN0b3JlTmFtZVxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpZFxyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPG9iamVjdD59XHJcbiAgICovXHJcbiAgYXN5bmMgZ2V0RGF0YShzdG9yZU5hbWUsIGlkKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5kYi50cmFuc2FjdGlvbihzdG9yZU5hbWUsICdyZWFkb25seScpLm9iamVjdFN0b3JlKHN0b3JlTmFtZSkuZ2V0KGlkKTtcclxuXHJcbiAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gKCkgPT4ge1xyXG4gICAgICAgIHJlc29sdmUocmVxdWVzdC5yZXN1bHQpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgcmVxdWVzdC5vbmVycm9yID0gKGUpID0+IHtcclxuICAgICAgICByZWplY3QoZSk7XHJcbiAgICAgIH07XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOuNsOydtO2EsCDsoITssrQg7KGw7ZqMIOuplOyEnOuTnFxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzdG9yZU5hbWVcclxuICAgKiBAcmV0dXJucyB7b2JqZWN0W119XHJcbiAgICovXHJcbiAgYXN5bmMgZ2V0QWxsRGF0YShzdG9yZU5hbWUpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLmRiLnRyYW5zYWN0aW9uKHN0b3JlTmFtZSwgJ3JlYWRvbmx5Jykub2JqZWN0U3RvcmUoc3RvcmVOYW1lKS5nZXRBbGwoKTtcclxuXHJcbiAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gKCkgPT4ge1xyXG4gICAgICAgIHJlc29sdmUocmVxdWVzdC5yZXN1bHQpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgcmVxdWVzdC5vbmVycm9yID0gKGUpID0+IHtcclxuICAgICAgICByZWplY3QoZSk7XHJcbiAgICAgIH07XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOuNsOydtO2EsCDstpTqsIAg66mU7ISc65OcXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHN0b3JlTmFtZVxyXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBkYXRhXHJcbiAgICogQHJldHVybnMge1Byb21pc2U8b2JqZWN0Pn1cclxuICAgKi9cclxuICBhc3luYyB1cHNlcnREYXRhKHN0b3JlTmFtZSwgZGF0YSkge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgY29uc3QgcmVxdWVzdCA9IHRoaXMuZGIudHJhbnNhY3Rpb24oc3RvcmVOYW1lLCAncmVhZHdyaXRlJykub2JqZWN0U3RvcmUoc3RvcmVOYW1lKS5wdXQoZGF0YSk7XHJcblxyXG4gICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9ICgpID0+IHtcclxuICAgICAgICByZXNvbHZlKHJlcXVlc3QucmVzdWx0KTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHJlcXVlc3Qub25lcnJvciA9IChlKSA9PiB7XHJcbiAgICAgICAgcmVqZWN0KGUpO1xyXG4gICAgICB9O1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDrjbDsnbTthLAg7IKt7KCcIOuplOyEnOuTnFxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzdG9yZU5hbWVcclxuICAgKiBAcGFyYW0ge251bWJlcn0gaWRcclxuICAgKi9cclxuICBhc3luYyBkZWxldGVEYXRhKHN0b3JlTmFtZSwgaWQpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLmRiLnRyYW5zYWN0aW9uKHN0b3JlTmFtZSwgJ3JlYWR3cml0ZScpLm9iamVjdFN0b3JlKHN0b3JlTmFtZSkuZGVsZXRlKGlkKTtcclxuXHJcbiAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gKCkgPT4ge1xyXG4gICAgICAgIHJlc29sdmUocmVxdWVzdC5yZXN1bHQpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgcmVxdWVzdC5vbmVycm9yID0gKGUpID0+IHtcclxuICAgICAgICByZWplY3QoZSk7XHJcbiAgICAgIH07XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbmNvbnN0IHNhbmRib3hEQiA9IG5ldyBJbmRleGVkREIoJ3NhbmRib3gnLCAxLCBbJ25vdGVzJ10pO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgc2FuZGJveERCO1xyXG4iLCJjb25zdCByZW5kZXJSYXcgPSAoc3RyaW5nLCAuLi52YWx1ZXMpID0+IHtcbiAgcmV0dXJuIFN0cmluZy5yYXcoc3RyaW5nLCAuLi52YWx1ZXMpO1xufTtcblxuZXhwb3J0IHsgcmVuZGVyUmF3IGFzIGh0bWwsIHJlbmRlclJhdyBhcyBjc3MgfTtcbiIsImltcG9ydCB7IGh0bWwgfSBmcm9tICcuLi91dGlscy91dGlscyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXZWJDb21wb25lbnQgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICBzdXBlcigpO1xyXG4gICAgdGhpcy50ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJyk7XHJcblxyXG4gICAgaWYgKHRoaXMuZ2V0U2hhZG93U3R5bGUoKSAmJiB0aGlzLmdldFNoYWRvd0hUTUwoKSkge1xyXG4gICAgICB0aGlzLmF0dGFjaFNoYWRvdyh7IG1vZGU6ICdvcGVuJyB9KTtcclxuICAgICAgdGhpcy50ZW1wbGF0ZS5pbm5lckhUTUwgPSBodG1sYFxyXG4gICAgICAgIDxzdHlsZT5cclxuICAgICAgICAgICR7dGhpcy5nZXRTaGFkb3dTdHlsZSgpfVxyXG4gICAgICAgIDwvc3R5bGU+XHJcbiAgICAgICAgJHt0aGlzLmdldFNoYWRvd0hUTUwoKX1cclxuICAgICAgYDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMudGVtcGxhdGUuaW5uZXJIVE1MID0gdGhpcy5nZXRIVE1MKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcclxuICAgIHRoaXMucmVuZGVyKCk7XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICBpZiAodGhpcy5zaGFkb3dSb290KSB7XHJcbiAgICAgIHRoaXMuc2hhZG93Um9vdC5hcHBlbmQodGhpcy50ZW1wbGF0ZS5jb250ZW50LmNsb25lTm9kZSh0cnVlKSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmFwcGVuZCh0aGlzLnRlbXBsYXRlLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldEhUTUwoKSB7XHJcbiAgICByZXR1cm4gYGA7XHJcbiAgfVxyXG5cclxuICAvLyBzaGFkb3dSb290IGNzcyDsoJXsnZhcclxuICBnZXRTaGFkb3dTdHlsZSgpIHtcclxuICAgIHJldHVybiAnJztcclxuICB9XHJcblxyXG4gIC8vIHNoYWRvd1Jvb3QgaHRtbCDsoJXsnZhcclxuICBnZXRTaGFkb3dIVE1MKCkge1xyXG4gICAgcmV0dXJuICcnO1xyXG4gIH1cclxuXHJcbiAgLy8g7J2067Kk7Yq4IOygleydmFxyXG59XHJcbiIsImltcG9ydCB7IGh0bWwgfSBmcm9tICcuL3V0aWxzJztcbmltcG9ydCB0ZXRyaXMgZnJvbSAnLi4vLi4vcHVibGljL3RldHJpcy5wbmcnO1xuaW1wb3J0IGZsYXBweUJpcmQgZnJvbSAnLi4vLi4vcHVibGljL2ZsYXBweUJpcmQucG5nJztcbmltcG9ydCBub3RlcGFkIGZyb20gJy4uLy4uL3B1YmxpYy9ub3RlcGFkLnBuZyc7XG5cbmNvbnN0IHJvdXRlcyA9IFtcbiAge1xuICAgIHBhdGg6ICcvJyxcbiAgICBodG1sOiBodG1sYDxteS1ob21lPjwvbXktaG9tZT5gLFxuICAgIGxhYmVsOiAnSG9tZScsXG4gICAgaWNvblNyYzogbnVsbCxcbiAgfSxcbiAge1xuICAgIHBhdGg6ICcvdGV0cmlzJyxcbiAgICBodG1sOiBodG1sYDxteS10ZXRyaXM+PC9teS10ZXRyaXM+YCxcbiAgICBsYWJlbDogJ1RldHJpcycsXG4gICAgaWNvblNyYzogdGV0cmlzLFxuICB9LFxuICB7XG4gICAgcGF0aDogJy9mbGFwcHliaXJkJyxcbiAgICBodG1sOiBodG1sYDxteS1mbGFwcHliaXJkPjwvbXktZmxhcHB5YmlyZD5gLFxuICAgIGxhYmVsOiAnRmxhcHB5Jm5ic3A7QmlyZCcsXG4gICAgaWNvblNyYzogZmxhcHB5QmlyZCxcbiAgfSxcbiAge1xuICAgIHBhdGg6ICcvbm90ZXBhZCcsXG4gICAgaHRtbDogaHRtbGA8bXktbm90ZXBhZD48L215LW5vdGVwYWQ+YCxcbiAgICBsYWJlbDogJ05vdGUmbmJzcDtQYWQnLFxuICAgIGljb25TcmM6IG5vdGVwYWQsXG4gIH0sXG5dO1xuXG5jb25zdCBpY29ucyA9IHJvdXRlcy5yZWR1Y2UoKHByZXYsIHJvdXRlcikgPT4ge1xuICBjb25zdCB7IHBhdGgsIGxhYmVsLCBpY29uU3JjIH0gPSByb3V0ZXI7XG4gIGlmIChyb3V0ZXIucGF0aCA9PT0gJy8nKSByZXR1cm4gcHJldjtcbiAgcmV0dXJuIFsuLi5wcmV2LCB7IHBhdGgsIGxhYmVsLCBpY29uU3JjIH1dO1xufSwgW10pO1xuXG5leHBvcnQgZGVmYXVsdCByb3V0ZXM7XG5leHBvcnQgeyBpY29ucyB9O1xuIiwiaW1wb3J0IHJvdXRlcyBmcm9tICcuLi91dGlscy9yb3V0ZXMnO1xyXG5cclxuY2xhc3MgUm91dGVyIHtcclxuICBjb25zdHJ1Y3Rvcihyb3V0ZSkge1xyXG4gICAgdGhpcy5yb3V0ZXMgPSByb3V0ZTtcclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IHJvdXRlID0gdGhpcy5yb3V0ZXMuZmluZCgodmFsdWUpID0+IHZhbHVlLnBhdGggPT09IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSk7XHJcblxyXG4gICAgaWYgKCFyb3V0ZSkge1xyXG4gICAgICB0aGlzLnJlcGxhY2VUbygnLycpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BhZ2UnKS5pbm5lckhUTUwgPSByb3V0ZS5odG1sO1xyXG4gIH1cclxuXHJcbiAgbmF2aWdhdGVUbyh1cmwpIHtcclxuICAgIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZShudWxsLCBudWxsLCB1cmwpO1xyXG4gICAgdGhpcy5yZW5kZXIoKTtcclxuICB9XHJcblxyXG4gIHJlcGxhY2VUbyh1cmwpIHtcclxuICAgIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZShudWxsLCBudWxsLCB1cmwpO1xyXG4gICAgdGhpcy5yZW5kZXIoKTtcclxuICB9XHJcblxyXG4gIGJhY2soKSB7XHJcbiAgICB3aW5kb3cuaGlzdG9yeS5iYWNrKCk7XHJcbiAgICB0aGlzLnJlbmRlcigpO1xyXG4gIH1cclxufVxyXG5cclxuY29uc3Qgcm91dGVyID0gbmV3IFJvdXRlcihyb3V0ZXMpO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgcm91dGVyO1xyXG4iLCJjb25zdCBidXR0b25zID0gW1xuICB7XG4gICAgaWQ6ICdmaWxlJyxcbiAgICB0aXRsZTogJ+2MjOydvCcsXG4gICAga2V5OiAnRicsXG4gICAgc2xvdHM6IFtcbiAgICAgIHsgdGV4dDogJ+yDiOuhnCZuYnNwO+unjOuTpOq4sChOKScsIGtleTogWydDdHJsJywgJ04nXSwgZGlzYWJsZTogdHJ1ZSB9LFxuICAgICAgeyB0ZXh0OiAn7IOIJm5ic3A77LC9KFcpJywga2V5OiBbJ0N0cmwnLCAnU2hpZnQnLCAnTiddLCBkaXNhYmxlOiB0cnVlIH0sXG4gICAgICB7IHRleHQ6ICfsoIDsnqUoUyknLCBrZXk6IFsnQ3RybCcsICdTJ10gfSxcbiAgICAgIHsgdGV4dDogJ+yCreygnChEKScsIGtleTogWydDdHJsJywgJ1NoaWZ0JywgJ1MnXSwgZGlzYWJsZTogdHJ1ZSB9LFxuICAgICAgeyB0ZXh0OiAn7Y6Y7J207KeAJm5ic3A77ISk7KCVKFUpLi4uJywga2V5OiBbXSwgZGlzYWJsZTogdHJ1ZSB9LFxuICAgICAgeyB0ZXh0OiAn7J247IeEKFApLi4uJywga2V5OiBbJ0N0cmwnLCAnUCddLCBkaXNhYmxlOiB0cnVlIH0sXG4gICAgICB7IHRleHQ6ICfrgZ3rgrTquLAoWCknLCBrZXk6IFtdLCBkaXNhYmxlOiB0cnVlIH0sXG4gICAgXSxcbiAgfSxcbiAge1xuICAgIGlkOiAnZWRpdCcsXG4gICAgdGl0bGU6ICftjrjsp5EnLFxuICAgIGtleTogJ0UnLFxuICAgIHNsb3RzOiBbXG4gICAgICB7IHRleHQ6ICfsi6TtlokmbmJzcDvst6jshowoVSknLCBrZXk6IFsnQ3RybCcsICdaJ10sIGRpc2FibGU6IHRydWUgfSxcbiAgICAgIHsgdGV4dDogJ+yemOudvOuCtOq4sChUKScsIGtleTogWydDdHJsJywgJ1gnXSwgZGlzYWJsZTogdHJ1ZSB9LFxuICAgICAgeyB0ZXh0OiAn67O17IKsKEMpJywga2V5OiBbJ0N0cmwnLCAnQyddLCBkaXNhYmxlOiB0cnVlIH0sXG4gICAgICB7IHRleHQ6ICfrtpnsl6zrhKPquLAoUCknLCBrZXk6IFsnQ3RybCcsICdWJ10sIGRpc2FibGU6IHRydWUgfSxcbiAgICAgIHsgdGV4dDogJ+yCreygnChEKScsIGtleTogWydEZWwnXSwgZGlzYWJsZTogdHJ1ZSB9LFxuICAgICAgeyB0ZXh0OiAnQmluZ+ycvOuhnCZuYnNwO+qygOyDiShTKS4uLicsIGtleTogWydDdHJsJywgJ0UnXSwgZGlzYWJsZTogdHJ1ZSB9LFxuICAgICAgeyB0ZXh0OiAn7LC+6riwKEYpLi4uJywga2V5OiBbJ0N0cmwnLCAnRiddLCBkaXNhYmxlOiB0cnVlIH0sXG4gICAgICB7IHRleHQ6ICfri6TsnYwmbmJzcDvssL7quLAoTiknLCBrZXk6IFsnRjMnXSwgZGlzYWJsZTogdHJ1ZSB9LFxuICAgICAgeyB0ZXh0OiAn7J207KCEJm5ic3A77LC+6riwKFYpJywga2V5OiBbJ1NoaWZ0JywgJ0YzJ10sIGRpc2FibGU6IHRydWUgfSxcbiAgICAgIHsgdGV4dDogJ+uwlOq+uOq4sChSKS4uLicsIGtleTogWydDdHJsJywgJ0gnXSwgZGlzYWJsZTogdHJ1ZSB9LFxuICAgICAgeyB0ZXh0OiAn7J2064+ZKEcpLi4uJywga2V5OiBbJ0N0cmwnLCAnRyddLCBkaXNhYmxlOiB0cnVlIH0sXG4gICAgICB7IHRleHQ6ICfrqqjrkZAmbmJzcDvshKDtg50oQSknLCBrZXk6IFsnQ3RybCcsICdBJ10sIGRpc2FibGU6IHRydWUgfSxcbiAgICAgIHsgdGV4dDogJ+yLnOqwhC/rgqDsp5woRCknLCBrZXk6IFsnRjUnXSwgZGlzYWJsZTogdHJ1ZSB9LFxuICAgIF0sXG4gIH0sXG4gIHtcbiAgICBpZDogJ2Zvcm1hdCcsXG4gICAgdGl0bGU6ICfshJzsi50nLFxuICAgIGtleTogJ08nLFxuICAgIHNsb3RzOiBbXG4gICAgICB7IHRleHQ6ICfsnpDrj5kmbmJzcDvspIQmbmJzcDvrsJTqv4goVyknLCBrZXk6IFtdLCBkaXNhYmxlOiB0cnVlIH0sXG4gICAgICB7IHRleHQ6ICfquIDqvLQoRikuLi4nLCBrZXk6IFtdLCBkaXNhYmxlOiB0cnVlIH0sXG4gICAgXSxcbiAgfSxcbiAge1xuICAgIGlkOiAndmlldycsXG4gICAgdGl0bGU6ICfrs7TquLAnLFxuICAgIGtleTogJ1YnLFxuICAgIHNsb3RzOiBbXG4gICAgICB7IHRleHQ6ICftmZXrjIDtlZjquLAoWiknLCBrZXk6IFsnQ3RybCcsICcrJ10sIGRpc2FibGU6IHRydWUgfSxcbiAgICAgIHsgdGV4dDogJ+y2leyGjO2VmOq4sChYKScsIGtleTogWydDdHJsJywgJy0nXSwgZGlzYWJsZTogdHJ1ZSB9LFxuICAgICAgeyB0ZXh0OiAn7IOB7YOcJm5ic3A77ZGc7Iuc7KSEKFMpJywga2V5OiBbXSwgZGlzYWJsZTogdHJ1ZSB9LFxuICAgIF0sXG4gIH0sXG4gIHtcbiAgICBpZDogJ2hlbHAnLFxuICAgIHRpdGxlOiAn64+E7JuA66eQJyxcbiAgICBrZXk6ICdIJyxcbiAgICBzbG90czogW1xuICAgICAgeyB0ZXh0OiAn64+E7JuA66eQJm5ic3A767O06riwKEgpJywga2V5OiBbXSwgZGlzYWJsZTogdHJ1ZSB9LFxuICAgICAgeyB0ZXh0OiAn7ZS865Oc67CxJm5ic3A767O064K06riwKEYpJywga2V5OiBbXSwgZGlzYWJsZTogdHJ1ZSB9LFxuICAgICAgeyB0ZXh0OiAn66mU66qo7J6lJm5ic3A77KCV67O0KEEpJywga2V5OiBbXSwgZGlzYWJsZTogdHJ1ZSB9LFxuICAgIF0sXG4gIH0sXG5dO1xuXG5leHBvcnQgZGVmYXVsdCBidXR0b25zO1xuIiwiaW1wb3J0ICcuL3N0eWxlLnNjc3MnO1xyXG5pbXBvcnQgc2FuZGJveERCIGZyb20gJy4vY29yZS9JbmRleGVkREInO1xyXG5pbXBvcnQgSG9tZSBmcm9tICcuL3ZpZXcvSG9tZSc7XHJcbmltcG9ydCBUZXRyaXMgZnJvbSAnLi92aWV3L1RldHJpcyc7XHJcbmltcG9ydCBGbGFwcHlCaXJkIGZyb20gJy4vdmlldy9GbGFwcHlCaXJkJztcclxuaW1wb3J0IEljb24gZnJvbSAnLi92aWV3L0NvbW1vbi9JY29uJztcclxuaW1wb3J0IEFwcCBmcm9tICcuL0FwcCc7XHJcbmltcG9ydCBOb3RlUGFkIGZyb20gJy4vdmlldy9Ob3RlUGFkJztcclxuaW1wb3J0IE5vdGVQYWRIZWFkZXIgZnJvbSAnLi92aWV3L05vdGVQYWQvY29tcG9uZW50cy9Ob3RlUGFkSGVhZGVyJztcclxuaW1wb3J0IE5vdGVQYWRCb2R5IGZyb20gJy4vdmlldy9Ob3RlUGFkL2NvbXBvbmVudHMvTm90ZVBhZEJvZHknO1xyXG5pbXBvcnQgSWNvbnMgZnJvbSAnLi92aWV3L0NvbW1vbi9JY29ucyc7XHJcbmltcG9ydCBGb290ZXIgZnJvbSAnLi92aWV3L0NvbW1vbi9Gb290ZXInO1xyXG5pbXBvcnQgTm90ZVBhZEJ1dHRvbiBmcm9tICcuL3ZpZXcvTm90ZVBhZC9jb21wb25lbnRzL05vdGVQYWRIZWFkZXJCdXR0b24nO1xyXG5cclxuc2FuZGJveERCLm9wZW5EQigpO1xyXG5cclxuY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdteS1hcHAnLCBBcHApO1xyXG5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ215LWZvb3RlcicsIEZvb3Rlcik7XHJcbmN1c3RvbUVsZW1lbnRzLmRlZmluZSgnbXktaG9tZScsIEhvbWUpO1xyXG5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ215LXRldHJpcycsIFRldHJpcyk7XHJcbmN1c3RvbUVsZW1lbnRzLmRlZmluZSgnbXktZmxhcHB5YmlyZCcsIEZsYXBweUJpcmQpO1xyXG5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ215LWljb25zJywgSWNvbnMpO1xyXG5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ215LWljb24nLCBJY29uKTtcclxuY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdteS1ub3RlcGFkJywgTm90ZVBhZCk7XHJcbmN1c3RvbUVsZW1lbnRzLmRlZmluZSgnbXktbm90ZXBhZC1oZWFkZXInLCBOb3RlUGFkSGVhZGVyKTtcclxuY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdteS1ub3RlcGFkLWJvZHknLCBOb3RlUGFkQm9keSk7XHJcbmN1c3RvbUVsZW1lbnRzLmRlZmluZSgnbXktbm90ZXBhZC1idXR0b24nLCBOb3RlUGFkQnV0dG9uKTtcclxuIiwiaW1wb3J0IHJvdXRlciBmcm9tICcuL2NvcmUvUm91dGVyJztcclxuaW1wb3J0IHsgaHRtbCB9IGZyb20gJy4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgV2ViQ29tcG9uZW50IGZyb20gJy4vY29yZS9XZWJDb21wb25lbnQnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBwIGV4dGVuZHMgV2ViQ29tcG9uZW50IHtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHN1cGVyKCk7XHJcbiAgICByb3V0ZXIucmVuZGVyKCk7XHJcbiAgfVxyXG5cclxuICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcclxuICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncG9wc3RhdGUnLCAoKSA9PiByb3V0ZXIucmVuZGVyKCkpO1xyXG4gIH1cclxuXHJcbiAgZ2V0SFRNTCgpIHtcclxuICAgIHJldHVybiBodG1sYFxyXG4gICAgICA8bXktaWNvbnMgc2xvdD1cImljb25zXCIgdGFiaW5kZXg9XCItMVwiPjwvbXktaWNvbnM+XHJcbiAgICAgIDxteS1mb290ZXIgc2xvdD1cImZvb3RlclwiPjwvbXktZm9vdGVyPlxyXG4gICAgYDtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFdlYkNvbXBvbmVudCBmcm9tICcuLi8uLi9jb3JlL1dlYkNvbXBvbmVudCc7XG5pbXBvcnQgeyBodG1sIH0gZnJvbSAnLi4vLi4vdXRpbHMvdXRpbHMnO1xuaW1wb3J0IHsgaWNvbnMgfSBmcm9tICcuLi8uLi91dGlscy9yb3V0ZXMnO1xuaW1wb3J0IHJvdXRlciBmcm9tICcuLi8uLi9jb3JlL1JvdXRlcic7XG5pbXBvcnQgd2luZG93TG9nbyBmcm9tICcuLi8uLi8uLi9wdWJsaWMvd2luZG93TG9nby5wbmcnO1xuaW1wb3J0IHNlYXJjaEljb24gZnJvbSAnLi4vLi4vLi4vcHVibGljL3NlYXJjaEljb24ucG5nJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9vdGVyIGV4dGVuZHMgV2ViQ29tcG9uZW50IHtcbiAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5oYW5kbGVDbGljay5iaW5kKHRoaXMpKTtcbiAgfVxuXG4gIGdldEhUTUwoKSB7XG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8aW1nIGFsdD1cIndpbmRvd19sb2dvXCIgc3JjPSR7d2luZG93TG9nb30gY2xhc3M9XCJ3aW5kb3dfaWNvblwiIC8+XG4gICAgICA8ZGl2IGNsYXNzPVwiaW5wdXRfYm94XCI+XG4gICAgICAgIDxpbWcgYWx0PVwic2VhcmNoXCIgc3JjPSR7c2VhcmNoSWNvbn0gY2xhc3M9XCJ3aW5kb3dfaWNvblwiIC8+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgcGxhY2Vob2xkZXI9XCLssL7quLBcIiAvPlxuICAgICAgPC9kaXY+XG4gICAgICAke2ljb25zXG4gICAgICAgIC5tYXAoKGljb24pID0+IHtcbiAgICAgICAgICByZXR1cm4gaHRtbGAgPG15LWljb24gZGF0YS1wYXRoPVwiJHtpY29uLnBhdGh9XCIgZGF0YS1pY29uU3JjPVwiJHtpY29uLmljb25TcmN9XCI+PC9teS1pY29uPiBgO1xuICAgICAgICB9KVxuICAgICAgICAuam9pbignJyl9XG4gICAgYDtcbiAgfVxuXG4gIGhhbmRsZUNsaWNrKGUpIHtcbiAgICBpZiAoIWUudGFyZ2V0LmNsb3Nlc3QoJ215LWljb24nKSkgcmV0dXJuO1xuXG4gICAgY29uc3QgaWNvbiA9IGUudGFyZ2V0LmNsb3Nlc3QoJ215LWljb24nKTtcbiAgICByb3V0ZXIubmF2aWdhdGVUbyhpY29uLmRhdGFzZXQucGF0aCk7XG4gIH1cbn1cbiIsImltcG9ydCBXZWJDb21wb25lbnQgZnJvbSAnLi4vLi4vY29yZS9XZWJDb21wb25lbnQnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSG9tZSBleHRlbmRzIFdlYkNvbXBvbmVudCB7fVxyXG4iLCJpbXBvcnQgV2ViQ29tcG9uZW50IGZyb20gJy4uLy4uL2NvcmUvV2ViQ29tcG9uZW50JztcclxuaW1wb3J0IHsgaHRtbCB9IGZyb20gJy4uLy4uL3V0aWxzL3V0aWxzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRldHJpcyBleHRlbmRzIFdlYkNvbXBvbmVudCB7XHJcbiAgZ2V0SFRNTCgpIHtcclxuICAgIHJldHVybiBodG1sYFxyXG4gICAgICA8aDE+VGV0cmlzPC9oMT5cclxuICAgICAgPHA+WW91IGFyZSB2aWV3aW5nIHRoZSBUZXRyaXMgY29tcG9uZW50ITwvcD5cclxuICAgIGA7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBXZWJDb21wb25lbnQgZnJvbSAnLi4vLi4vY29yZS9XZWJDb21wb25lbnQnO1xyXG5pbXBvcnQgeyBodG1sIH0gZnJvbSAnLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRmxhcHB5QmlyZCBleHRlbmRzIFdlYkNvbXBvbmVudCB7XHJcbiAgZ2V0SFRNTCgpIHtcclxuICAgIHJldHVybiBodG1sYFxyXG4gICAgICA8aDE+RmxhcHB5IEJpcmQ8L2gxPlxyXG4gICAgICA8cD5Zb3UgYXJlIHZpZXdpbmcgdGhlIEZsYXBweSBCaXJkIGNvbXBvbmVudCE8L3A+XHJcbiAgICAgIDxwPllvdSBhcmUgdmlld2luZyB0aGUgRmxhcHB5IEJpcmQgY29tcG9uZW50ITwvcD5cclxuICAgICAgPHA+WW91IGFyZSB2aWV3aW5nIHRoZSBGbGFwcHkgQmlyZCBjb21wb25lbnQhPC9wPlxyXG4gICAgICA8cD5Zb3UgYXJlIHZpZXdpbmcgdGhlIEZsYXBweSBCaXJkIGNvbXBvbmVudCE8L3A+XHJcbiAgICAgIDxwPllvdSBhcmUgdmlld2luZyB0aGUgRmxhcHB5IEJpcmQgY29tcG9uZW50ITwvcD5cclxuICAgICAgPHA+WW91IGFyZSB2aWV3aW5nIHRoZSBGbGFwcHkgQmlyZCBjb21wb25lbnQhPC9wPlxyXG4gICAgYDtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgaHRtbCB9IGZyb20gJy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IHJvdXRlciBmcm9tICcuLi8uLi9jb3JlL1JvdXRlcic7XHJcbmltcG9ydCBXZWJDb21wb25lbnQgZnJvbSAnLi4vLi4vY29yZS9XZWJDb21wb25lbnQnO1xyXG5pbXBvcnQgeyBpY29ucyB9IGZyb20gJy4uLy4uL3V0aWxzL3JvdXRlcyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJY29ucyBleHRlbmRzIFdlYkNvbXBvbmVudCB7XHJcbiAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XHJcbiAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xyXG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGFuZGxlQ2xpY2suYmluZCh0aGlzKSk7XHJcbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ2RibGNsaWNrJywgdGhpcy5oYW5kbGVEb3VibGVDbGljay5iaW5kKHRoaXMpKTtcclxuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuaGFuZGxlS2V5RG93bi5iaW5kKHRoaXMpKTtcclxuICB9XHJcblxyXG4gIGdldEhUTUwoKSB7XHJcbiAgICByZXR1cm4gaHRtbGBcclxuICAgICAgJHtpY29uc1xyXG4gICAgICAgIC5tYXAoKGljb24pID0+IHtcclxuICAgICAgICAgIHJldHVybiBodG1sYFxyXG4gICAgICAgICAgICA8bXktaWNvbiBkYXRhLXBhdGg9JHtpY29uLnBhdGh9IGRhdGEtbGFiZWw9JHtpY29uLmxhYmVsfSBkYXRhLWljb25TcmM9JHtpY29uLmljb25TcmN9PjwvbXktaWNvbj5cclxuICAgICAgICAgIGA7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuam9pbignJyl9XHJcbiAgICBgO1xyXG4gIH1cclxuXHJcbiAgaGFuZGxlQ2xpY2soZSkge1xyXG4gICAgaWYgKCFlLnRhcmdldC5jbG9zZXN0KCdteS1pY29uJykpIHJldHVybjtcclxuXHJcbiAgICBjb25zdCBpY29uID0gZS50YXJnZXQuY2xvc2VzdCgnbXktaWNvbicpO1xyXG4gICAgaWNvbi50b2dnbGVBdHRyaWJ1dGUoJ2NoZWNrZWQnKTtcclxuICAgIHRoaXMucXVlcnlTZWxlY3RvckFsbCgnbXktaWNvbicpLmZvckVhY2goKG5vZGUpID0+IHtcclxuICAgICAgaWYgKG5vZGUgIT09IGljb24pIHtcclxuICAgICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZSgnY2hlY2tlZCcpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGhhbmRsZURvdWJsZUNsaWNrKGUpIHtcclxuICAgIGlmICghZS50YXJnZXQuY2xvc2VzdCgnbXktaWNvbicpKSByZXR1cm47XHJcblxyXG4gICAgY29uc3QgaWNvbiA9IGUudGFyZ2V0LmNsb3Nlc3QoJ215LWljb24nKTtcclxuICAgIHJvdXRlci5uYXZpZ2F0ZVRvKGljb24uZGF0YXNldC5wYXRoKTtcclxuICB9XHJcblxyXG4gIGhhbmRsZUtleURvd24oZSkge1xyXG4gICAgY29uc3QgY2hlY2tlZEVsID0gdGhpcy5xdWVyeVNlbGVjdG9yQWxsKCdteS1pY29uW2NoZWNrZWRdJyk7XHJcblxyXG4gICAgaWYgKGUua2V5ID09PSAnRW50ZXInKSB7XHJcbiAgICAgIGlmIChjaGVja2VkRWwubGVuZ3RoID4gMSkgcmV0dXJuO1xyXG4gICAgICBpZiAoIWNoZWNrZWRFbCkgcmV0dXJuO1xyXG4gICAgICByb3V0ZXIubmF2aWdhdGVUbyhjaGVja2VkRWxbMF0uZGF0YXNldC5wYXRoKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgaHRtbCB9IGZyb20gJy4uLy4uL3V0aWxzL3V0aWxzJztcbmltcG9ydCBXZWJDb21wb25lbnQgZnJvbSAnLi4vLi4vY29yZS9XZWJDb21wb25lbnQnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJY29uIGV4dGVuZHMgV2ViQ29tcG9uZW50IHtcbiAgZ2V0SFRNTCgpIHtcbiAgICBjb25zdCB7IGxhYmVsLCBpY29uc3JjIH0gPSB0aGlzLmRhdGFzZXQ7XG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8aW1nIGFsdD1cIiR7bGFiZWx9X2ljb25cIiBzcmM9JHtpY29uc3JjfSAvPlxuICAgICAgJHtsYWJlbCA/IGA8c3BhbiBjbGFzcz1cImljb25fbmFtZVwiPiR7bGFiZWx9PC9zcGFuPmAgOiAnJ31cbiAgICBgO1xuICB9XG59XG4iLCJpbXBvcnQgV2ViQ29tcG9uZW50IGZyb20gJy4uLy4uL2NvcmUvV2ViQ29tcG9uZW50JztcbmltcG9ydCB7IGh0bWwgfSBmcm9tICcuLi8uLi91dGlscy91dGlscyc7XG5pbXBvcnQgJy4vc3R5bGVzLnNjc3MnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBOb3RlUGFkIGV4dGVuZHMgV2ViQ29tcG9uZW50IHtcbiAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgfVxuXG4gIGdldEhUTUwoKSB7XG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8bXktbm90ZXBhZC1oZWFkZXI+PC9teS1ub3RlcGFkLWhlYWRlcj5cbiAgICAgIDxteS1ub3RlcGFkLWJvZHk+PC9teS1ub3RlcGFkLWJvZHk+XG4gICAgYDtcbiAgfVxufVxuIiwiaW1wb3J0IHsgaHRtbCB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcbmltcG9ydCBXZWJDb21wb25lbnQgZnJvbSAnLi4vLi4vLi4vY29yZS9XZWJDb21wb25lbnQnO1xuaW1wb3J0IGJ1dHRvbnMgZnJvbSAnLi4vY29uc3QvYnV0dG9ucyc7XG5pbXBvcnQgTm90ZVBhZEljb24gZnJvbSAnLi4vLi4vLi4vLi4vcHVibGljL25vdGVwYWQucG5nJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTm90ZVBhZEhlYWRlciBleHRlbmRzIFdlYkNvbXBvbmVudCB7XG4gIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gIH1cblxuICBnZXRIVE1MKCkge1xuICAgIHJldHVybiBodG1sYFxuICAgICAgPGhlYWRlcj5cbiAgICAgICAgPHNwYW4+PGltZyBhbHQ9XCJub3RlcGFkX2ljb25cIiBzcmM9JHtOb3RlUGFkSWNvbn0gLz7soJzrqqnsl4bsnYwgLSBXaW5kb3dzIOuplOuqqOyepTwvc3Bhbj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInZpZXdfYnV0dG9uc1wiPlxuICAgICAgICAgIDxidXR0b24gaWQ9XCJtaW5pXCI+8J+XlTwvYnV0dG9uPlxuICAgICAgICAgIDxidXR0b24gaWQ9XCJmdWxsXCI+8J+XljwvYnV0dG9uPlxuICAgICAgICAgIDxidXR0b24gaWQ9XCJjbG9zZVwiPuKFqTwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvaGVhZGVyPlxuICAgICAgPGRpdiBjbGFzcz1cImVkaXRfYnV0dG9uc1wiPlxuICAgICAgICAke2J1dHRvbnNcbiAgICAgICAgICAubWFwKFxuICAgICAgICAgICAgKGJ1dHRvbikgPT5cbiAgICAgICAgICAgICAgaHRtbGBcbiAgICAgICAgICAgICAgICA8bXktbm90ZXBhZC1idXR0b25cbiAgICAgICAgICAgICAgICAgIGlkPSR7YnV0dG9uLmlkfVxuICAgICAgICAgICAgICAgICAgZGF0YS10aXRsZT0ke2J1dHRvbi50aXRsZX1cbiAgICAgICAgICAgICAgICAgIGRhdGEta2V5PSR7YnV0dG9uLmtleX1cbiAgICAgICAgICAgICAgICAgIGRhdGEtc2xvdHM9JHtKU09OLnN0cmluZ2lmeShidXR0b24uc2xvdHMpfVxuICAgICAgICAgICAgICAgID48L215LW5vdGVwYWQtYnV0dG9uPlxuICAgICAgICAgICAgICBgXG4gICAgICAgICAgKVxuICAgICAgICAgIC5qb2luKCcnKX1cbiAgICAgIDwvZGl2PlxuICAgIGA7XG4gIH1cbn1cbiIsImltcG9ydCB7IGh0bWwgfSBmcm9tICcuLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCBXZWJDb21wb25lbnQgZnJvbSAnLi4vLi4vLi4vY29yZS9XZWJDb21wb25lbnQnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTm90ZVBhZEJvZHkgZXh0ZW5kcyBXZWJDb21wb25lbnQge1xyXG4gIGdldEhUTUwoKSB7XHJcbiAgICByZXR1cm4gaHRtbGA8dGV4dGFyZWE+PC90ZXh0YXJlYT5gO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBodG1sIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xuaW1wb3J0IFdlYkNvbXBvbmVudCBmcm9tICcuLi8uLi8uLi9jb3JlL1dlYkNvbXBvbmVudCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5vdGVQYWRCdXR0b24gZXh0ZW5kcyBXZWJDb21wb25lbnQge1xuICBnZXRIVE1MKCkge1xuICAgIGNvbnN0IHsgdGl0bGUsIGtleSwgc2xvdHMgfSA9IHRoaXMuZGF0YXNldDtcbiAgICByZXR1cm4gaHRtbGBcbiAgICAgICR7dGl0bGV9KDx1PiR7a2V5fTwvdT4pXG4gICAgICA8ZGl2IGNsYXNzPVwicG9wdXBcIj5cbiAgICAgICAgJHtKU09OLnBhcnNlKHNsb3RzKVxuICAgICAgICAgIC5tYXAoXG4gICAgICAgICAgICAoc2xvdCkgPT4gaHRtbGBcbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNsb3RcIiBkYXRhLWRpc2FibGU9JHshIXNsb3QuZGlzYWJsZX0+XG4gICAgICAgICAgICAgICAgPGRpdj4ke3Nsb3QudGV4dH08L2Rpdj5cbiAgICAgICAgICAgICAgICAke3Nsb3Qua2V5Lmxlbmd0aCA+IDAgPyBgPGRpdj4ke3Nsb3Qua2V5LmpvaW4oJyArICcpfTwvZGl2PmAgOiAnJ31cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBgXG4gICAgICAgICAgKVxuICAgICAgICAgIC5qb2luKCcnKX1cbiAgICAgIDwvZGl2PlxuICAgIGA7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZGIiLCJjb25zdHJ1Y3RvciIsImRiTmFtZSIsImRiVmVyc2lvbiIsInN0b3JlcyIsInRoaXMiLCJhc3luYyIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwicmVxdWVzdCIsIndpbmRvdyIsImluZGV4ZWREQiIsIm9wZW4iLCJvbnN1Y2Nlc3MiLCJyZXN1bHQiLCJvbmVycm9yIiwiZSIsIm9udXBncmFkZW5lZWRlZCIsImZvckVhY2giLCJzdG9yZSIsIm9iamVjdFN0b3JlTmFtZXMiLCJjb250YWlucyIsImNyZWF0ZU9iamVjdFN0b3JlIiwia2V5UGF0aCIsInN0b3JlTmFtZSIsImlkIiwidHJhbnNhY3Rpb24iLCJvYmplY3RTdG9yZSIsImdldCIsImdldEFsbCIsImRhdGEiLCJwdXQiLCJkZWxldGUiLCJyZW5kZXJSYXciLCJzdHJpbmciLCJ2YWx1ZXMiLCJTdHJpbmciLCJyYXciLCJXZWJDb21wb25lbnQiLCJIVE1MRWxlbWVudCIsInN1cGVyIiwidGVtcGxhdGUiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJnZXRTaGFkb3dTdHlsZSIsImdldFNoYWRvd0hUTUwiLCJhdHRhY2hTaGFkb3ciLCJtb2RlIiwiaW5uZXJIVE1MIiwiZ2V0SFRNTCIsImNvbm5lY3RlZENhbGxiYWNrIiwicmVuZGVyIiwic2hhZG93Um9vdCIsImFwcGVuZCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJyb3V0ZXMiLCJwYXRoIiwiaHRtbCIsImxhYmVsIiwiaWNvblNyYyIsImljb25zIiwicmVkdWNlIiwicHJldiIsInJvdXRlciIsInJvdXRlIiwiZmluZCIsInZhbHVlIiwibG9jYXRpb24iLCJwYXRobmFtZSIsInF1ZXJ5U2VsZWN0b3IiLCJyZXBsYWNlVG8iLCJuYXZpZ2F0ZVRvIiwidXJsIiwiaGlzdG9yeSIsInB1c2hTdGF0ZSIsInJlcGxhY2VTdGF0ZSIsImJhY2siLCJ0aXRsZSIsImtleSIsInNsb3RzIiwidGV4dCIsImRpc2FibGUiLCJjdXN0b21FbGVtZW50cyIsImRlZmluZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJoYW5kbGVDbGljayIsImJpbmQiLCJpY29uIiwiam9pbiIsInRhcmdldCIsImNsb3Nlc3QiLCJkYXRhc2V0IiwiaGFuZGxlRG91YmxlQ2xpY2siLCJoYW5kbGVLZXlEb3duIiwidG9nZ2xlQXR0cmlidXRlIiwicXVlcnlTZWxlY3RvckFsbCIsIm5vZGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJjaGVja2VkRWwiLCJsZW5ndGgiLCJpY29uc3JjIiwiYnV0dG9uIiwiSlNPTiIsInN0cmluZ2lmeSIsInBhcnNlIiwibWFwIiwic2xvdCJdLCJzb3VyY2VSb290IjoiIn0=