(()=>{"use strict";var t="./js-sandbox/";const e=new class{db;constructor(t,e,i){this.dbName=t,this.dbVersion=e,this.stores=i}async openDB(){return new Promise(((t,e)=>{const i=window.indexedDB.open(this.dbName,this.dbVersion);i.onsuccess=()=>{this.db=i.result,t()},i.onerror=t=>{e(t)},i.onupgradeneeded=()=>{this.db=i.result,this.stores.forEach((t=>{this.db.objectStoreNames.contains(t)&&this.db.deleteObjectStore(t),this.db.createObjectStore(t,{keyPath:"id"})}))}}))}async getData(t,e){return new Promise(((i,s)=>{const n=this.db.transaction(t,"readonly").objectStore(t).get(e);n.onsuccess=()=>{i(n.result)},n.onerror=t=>{s(t)}}))}async getAllData(t){return new Promise(((e,i)=>{const s=this.db.transaction(t,"readonly").objectStore(t).getAll();s.onsuccess=()=>{e(s.result)},s.onerror=t=>{i(t)}}))}async upsertData(t,e){return new Promise(((i,s)=>{const n=this.db.transaction(t,"readwrite").objectStore(t),o={...e,id:e.id||(new Date).getTime()},a=n.put(o);a.onsuccess=()=>{i(a.result)},a.onerror=()=>{console.log(a.error),s(a.error)}}))}async deleteData(t,e){return new Promise(((i,s)=>{const n=this.db.transaction(t,"readwrite").objectStore(t).delete(e);n.onsuccess=()=>{i(!0)},n.onerror=t=>{s(t)}}))}}("sandboxDB",2,["notepad"]),i=(t,...e)=>String.raw(t,...e);class s extends HTMLElement{constructor(){super(),this.render=this.render.bind(this)}connectedCallback(){this.render()}render(){this.innerHTML=this.injectHTML()}injectHTML(){return""}bindMethods(...t){t.forEach((t=>{this[t]=this[t].bind(this)}))}}class n extends s{injectHTML(){return i`
      <div id="page"></div>
      <my-icons tabindex="-1"></my-icons>
      <my-footer></my-footer>
    `}}const o=t+"2a583f97b153f7da7d41.png",a="/js-sandbox",r=[{path:"/",html:i`<my-home></my-home>`,label:"Home",iconSrc:null},{path:"/tetris",html:i`<my-tetris></my-tetris>`,label:"Tetris",iconSrc:t+"71c0bea6462001116fcf.png"},{path:"/flappybird",html:i`<my-flappybird></my-flappybird>`,label:"Flappy&nbsp;Bird",iconSrc:t+"39b884119b49599495ed.png"},{path:"/notepad",html:i`<my-notepad></my-notepad>`,label:"Note&nbsp;Pad",iconSrc:o},{path:"/notepad/:id",html:i`<my-notepad data-id=":id"></my-notepad>`,label:"Note&nbsp;Pad",iconSrc:null}],l=r.reduce(((t,e)=>{const{path:i,label:s,iconSrc:n}=e;return e.iconSrc?[...t,{path:i,label:s,iconSrc:n}]:t}),[]),c=async()=>[...(await e.getAllData("notepad")).reduce(((t,e)=>{const{id:i,title:s}=e;return[...t,{path:`/notepad/${i}`,label:s,iconSrc:o}]}),[])],d=r,h=new class{constructor(t){this.routes=t}pathToRegexp(t){return new RegExp(`^${t.replace(/\//g,"\\/").replace(/:\w+/g,"(.+)")}$`)}render(){const t=window.location.pathname,e=this.routes.find((e=>this.pathToRegexp(this.getUrlFrom(e.path)).test(t)));e?document.querySelector("#page").innerHTML=e.html.replace(":id",this.getIdFromPath(t)):this.replaceTo("/")}getIdFromPath(t){return t.match(/\d+/)?.[0]}navigateTo(t){this.getUrlFrom(t)!==window.location.pathname&&(window.history.pushState(null,null,a+t),this.render())}replaceTo(t){window.history.replaceState(null,null,a+t),this.render()}getUrlFrom(t){return`${a}${t}`}back(){window.history.back(),this.render()}}(d),u=t+"59cb65e4f8f2627d6c2c.png",p=t+"bc8d31a2338dd0b3f68a.png";class m extends s{connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.handleClick.bind(this))}injectHTML(){return i`
      <img alt="window_logo" src=${u} class="window_icon" />
      <div class="input_box">
        <img alt="search" src=${p} class="window_icon" /><input type="text" placeholder="Ï∞æÍ∏∞" />
      </div>
      ${l.map((t=>i` <my-icon data-path="${t.path}" data-iconSrc="${t.iconSrc}"></my-icon> `)).join("")}
    `}handleClick(t){if(!t.target.closest("my-icon"))return;const e=t.target.closest("my-icon");h.navigateTo(e.dataset.path)}}class b extends s{}class y extends s{constructor(){super(),this.score=0,this.handleStart=this.handleStart.bind(this)}connectedCallback(){super.connectedCallback(),this.querySelector("#start-button").addEventListener("click",this.handleStart)}injectHTML(){return i`
      <my-tetris-playground id="1"></my-tetris-playground>
      <button id="start-button">Í≤åÏûÑ ÏãúÏûë</button>
      <my-tetris-playground id="2"></my-tetris-playground>
    `}handleStart(){this.querySelectorAll("my-tetris-playground").forEach((t=>t.startGame()))}}class k extends s{injectHTML(){return i`
      <h1>Flappy Bird</h1>
      <p>You are viewing the Flappy Bird component!</p>
      <p>You are viewing the Flappy Bird component!</p>
      <p>You are viewing the Flappy Bird component!</p>
      <p>You are viewing the Flappy Bird component!</p>
      <p>You are viewing the Flappy Bird component!</p>
      <p>You are viewing the Flappy Bird component!</p>
    `}}class v extends s{async connectedCallback(){this.icons=[...l,...await c()],super.connectedCallback(),this.addEventListener("click",this.handleClick),this.addEventListener("dblclick",this.handleDoubleClick),this.addEventListener("keydown",this.handleKeyDown),this.addEventListener("iconChange",this.handleIconChange),this.addEventListener("iconDelete",this.handleIconDelete)}static get observedAttributes(){return["icons"]}attributeChangedCallback(t,e,i){e!==i&&this.render()}injectHTML(){return i`
      ${this.icons.map((t=>i`
            <my-icon data-path=${t.path} data-label=${t.label} data-iconSrc=${t.iconSrc}></my-icon>
          `)).join("")}
    `}get icons(){return JSON.parse(this.getAttribute("icons"))}set icons(t){this.setAttribute("icons",JSON.stringify(t))}handleClick(t){if(!t.target.closest("my-icon"))return;const e=t.target.closest("my-icon");e.toggleAttribute("checked"),this.querySelectorAll("my-icon").forEach((t=>{t!==e&&t.removeAttribute("checked")}))}handleDoubleClick(t){if(!t.target.closest("my-icon"))return;const e=t.target.closest("my-icon");h.navigateTo(e.dataset.path)}handleKeyDown(t){const e=this.querySelectorAll("my-icon[checked]");if("Enter"===t.key){if(e.length>1)return;if(!e)return;h.navigateTo(e[0].dataset.path)}}handleIconChange(t){const{path:e,label:i,iconSrc:s}=t.detail,n=this.icons.findIndex((t=>t.path===e));if(-1===n)this.icons=[...this.icons,{path:e,label:i,iconSrc:s}];else{const t=[...this.icons];t[n]={path:e,label:i,iconSrc:s},this.icons=t}}handleIconDelete(t){const{path:e}=t.detail;this.icons=this.icons.filter((t=>t.path!==e))}}class g extends s{injectHTML(){const{label:t,iconsrc:e}=this.dataset;return i`
      <img alt="${t}_icon" src=${e} />
      ${t?`<span class="icon_name">${t}</span>`:""}
    `}}class w extends s{async connectedCallback(){this.data=await e.getData("notepad",this.id)??{title:"Ï†úÎ™©ÏóÜÏùå",content:""},super.connectedCallback(),this.addEventListener("save",this.handleSave),this.addEventListener("localSave",this.handleLocalSave),this.addEventListener("delete",this.handleDelete)}disconnectedCallback(){this.removeEventListener("save",this.handleSave),this.removeEventListener("localSave",this.handleLocalSave),this.removeEventListener("delete",this.handleDelete)}injectHTML(){const{title:t,content:e}=this.data;return i`
      <my-notepad-header title=${t}></my-notepad-header>
      <textarea>${e}</textarea>
    `}handleLocalSave(t){t.preventDefault();const e=this.getNotePadData();if(!e)return;const i=new Blob([e.content],{type:"text/plain"}),s=document.createElement("a");s.href=URL.createObjectURL(i),s.download=`${e.title}.txt`,s.click()}async handleSave(t){t.stopPropagation();const i=this.getNotePadData();if(i)try{const t=await e.upsertData("notepad",i),s=`/notepad/${t}`;alert("Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§.");const n=new CustomEvent("iconChange",{detail:{path:s,label:i.title,iconSrc:o}});document.querySelector("my-icons").dispatchEvent(n),this.id===t?this.title=i.title.replace(/&nbsp;/g," "):h.navigateTo(s)}catch(t){alert("Ï†ÄÏû•Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.")}}async handleDelete(t){try{if(t.stopPropagation(),!window.confirm("Ï†ïÎßê ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?"))return;await e.deleteData("notepad",this.id),alert("ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§.");const i=new CustomEvent("iconDelete",{detail:{path:`/notepad/${this.id}`}});document.querySelector("my-icons").dispatchEvent(i),h.replaceTo("/notepad")}catch(t){alert("ÏÇ≠Ï†úÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.")}}getNotePadData(){const t=this.querySelector("textarea").value.trim();if(!t)return alert("ÎÇ¥Ïö©Ïù¥ ÏóÜÏäµÎãàÎã§."),null;let e;for(;!e;)if(!(e=prompt("ÌååÏùºÎ™ÖÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî.",this.data.title.replace(/&nbsp;/g," ")),e||window.confirm("Ï†úÎ™©ÏùÄ ÌïÑÏàòÏûÖÎãàÎã§.")))return null;return{id:this.id,title:e.trim().replace(/ /g,"&nbsp;"),content:t.replace(/ /g,"&nbsp;")}}get id(){return Number(this.getAttribute("data-id"))}set title(t){this.querySelector("my-notepad-header").setAttribute("title",t)}}const f=!0,S=[{id:"file",title:"ÌååÏùº",key:"F",slots:[{id:1,text:"ÏÉàÎ°ú ÎßåÎì§Í∏∞(N)",key:["Ctrl","N"],onClick:function(){const t=document.querySelector("my-notepad");t.getAttribute("data-id")?h.navigateTo("/notepad"):t.render()}},{id:2,text:"ÎÇ¥ Ïª¥Ìì®ÌÑ∞Ïóê Ï†ÄÏû•(W)",key:["Ctrl","Shift","N"],onClick:function(){this.dispatchEvent(new CustomEvent("localSave",{bubbles:!0}))}},{id:3,text:"Ï†ÄÏû•(S)",key:["Ctrl","S"],onClick:function(){this.dispatchEvent(new CustomEvent("save",{bubbles:!0}))}},{id:4,text:"ÏÇ≠Ï†ú(D)",key:["Ctrl","Shift","S"],onClick:function(){document.querySelector("my-notepad").getAttribute("data-id")&&this.dispatchEvent(new CustomEvent("delete",{bubbles:!0}))}},{id:5,text:"ÌéòÏù¥ÏßÄ ÏÑ§Ï†ï(U)...",key:[],disable:f},{id:6,text:"Ïù∏ÏáÑ(P)...",key:["Ctrl","P"],disable:f},{id:7,text:"ÎÅùÎÇ¥Í∏∞(X)",key:[],disable:f}]},{id:"edit",title:"Ìé∏Ïßë",key:"E",slots:[{id:8,text:"Ïã§Ìñâ Ï∑®ÏÜå(U)",key:["Ctrl","Z"],disable:f},{id:9,text:"ÏûòÎùºÎÇ¥Í∏∞(T)",key:["Ctrl","X"],disable:f},{id:10,text:"Î≥µÏÇ¨(C)",key:["Ctrl","C"],disable:f},{id:11,text:"Î∂ôÏó¨ÎÑ£Í∏∞(P)",key:["Ctrl","V"],disable:f},{id:12,text:"ÏÇ≠Ï†ú(D)",key:["Del"],disable:f},{id:13,text:"BingÏúºÎ°ú Í≤ÄÏÉâ(S)...",key:["Ctrl","E"],disable:f},{id:14,text:"Ï∞æÍ∏∞(F)...",key:["Ctrl","F"],disable:f},{id:15,text:"Îã§Ïùå Ï∞æÍ∏∞(N)",key:["F3"],disable:f},{id:16,text:"Ïù¥Ï†Ñ Ï∞æÍ∏∞(V)",key:["Shift","F3"],disable:f},{id:17,text:"Î∞îÍæ∏Í∏∞(R)...",key:["Ctrl","H"],disable:f},{id:18,text:"Ïù¥Îèô(G)...",key:["Ctrl","G"],disable:f},{id:19,text:"Î™®Îëê ÏÑ†ÌÉù(A)",key:["Ctrl","A"],disable:f},{id:20,text:"ÏãúÍ∞Ñ/ÎÇ†Ïßú(D)",key:["F5"],disable:f}]},{id:"format",title:"ÏÑúÏãù",key:"O",slots:[{id:21,text:"ÏûêÎèô Ï§Ñ Î∞îÍøà(W)",key:[],disable:f},{id:22,text:"Í∏ÄÍº¥(F)...",key:[],disable:f}]},{id:"view",title:"Î≥¥Í∏∞",key:"V",slots:[{id:23,text:"ÌôïÎåÄÌïòÍ∏∞(Z)",key:["Ctrl","+"],disable:f},{id:24,text:"Ï∂ïÏÜåÌïòÍ∏∞(X)",key:["Ctrl","-"],disable:f},{id:25,text:"ÏÉÅÌÉú ÌëúÏãúÏ§Ñ(S)",key:[],disable:f}]},{id:"help",title:"ÎèÑÏõÄÎßê",key:"H",slots:[{id:26,text:"ÎèÑÏõÄÎßê Î≥¥Í∏∞(H)",key:[],disable:f},{id:27,text:"ÌîºÎìúÎ∞± Î≥¥ÎÇ¥Í∏∞(F)",key:[],disable:f},{id:28,text:"Î©îÎ™®Ïû• Ï†ïÎ≥¥(A)",key:[],disable:f}]}],x=S.reduce(((t,e)=>[...t,...e.slots]),[]),C=S;class E extends s{connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.handleClick)}disconnectedCallback(){this.removeEventListener("click",this.handleClick)}static get observedAttributes(){return["title"]}attributeChangedCallback(t,e,i){"title"===t&&e&&(this.querySelector("#title").innerText=i)}injectHTML(){return i`
      <header>
        <span>
          <img alt="notepad_icon" src=${o} />
          <span id="title">${this.title}</span> - Windows Î©îÎ™®Ïû•
        </span>
        <div class="view_buttons">
          <button class="view_button" id="mini">üóï</button>
          <button class="view_button" id="full">üóñ</button>
          <button class="view_button" id="close">‚Ö©</button>
        </div>
      </header>
      <div class="edit_buttons">
        ${C.map((t=>i`
              <button class="edit_button">
                ${t.title}(<u>${t.key}</u>)
                <div class="popup">
                  ${t.slots.map((t=>i`
                        <div class="sub" data-id="${t.id}" data-disable="${!!t.disable}">
                          <div>${t.text}</div>
                          ${t.key.length>0?`<div>${t.key.join(" + ")}</div>`:""}
                        </div>
                      `)).join("")}
                </div>
              </button>
            `)).join("")}
      </div>
    `}handleClick(t){const e=t.target.closest(".view_button"),i=t.target.closest(".edit_button"),s=t.target.closest(".sub");e?this.clickViewButton(e):i?this.clickEditButton(i,s):this.closePopup()}clickViewButton(t){switch(t.id){case"full":this.parentElement.classList.toggle("fullscreen");break;case"mini":case"close":h.back()}}clickEditButton(t,e){if(e){const t=Number(e.dataset.id),{onClick:i}=x.find((e=>e.id===t))||{};i&&i.call(this)}else this.togglePopup(t)}togglePopup(t){const e=t.querySelector(".popup");e.classList.contains("show")?e.classList.remove("show"):(this.closePopup(),e.classList.add("show"))}closePopup(){const t=this.querySelector(".popup.show");t?.classList.remove("show")}get title(){return this.getAttribute("title")}}const L={I:[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],J:[[2,0,0],[2,2,2],[0,0,0]],L:[[0,0,3],[3,3,3],[0,0,0]],O:[[4,4],[4,4]],S:[[0,5,5],[5,5,0],[0,0,0]],T:[[0,6,0],[6,6,6],[0,0,0]],Z:[[7,7,0],[0,7,7],[0,0,0]]},$={0:"empty",1:"I",2:"J",3:"L",4:"O",5:"S",6:"T",7:"Z",10:"I freeze",20:"J freeze",30:"L freeze",40:"O freeze",50:"S freeze",60:"T freeze",70:"Z freeze"},D={1:100,2:300,3:500,4:800},T=10,B=new Map([["1",new Map([["s","moveDown"],["a","moveLeft"],["d","moveRight"],["w","rotate"],["S","moveDown"],["A","moveLeft"],["D","moveRight"],["W","rotate"]])],["2",new Map([["ArrowDown","moveDown"],["ArrowLeft","moveLeft"],["ArrowRight","moveRight"],["ArrowUp","rotate"]])]]),j=t=>Object.values(t).sort((()=>Math.random()-.5)),A=(t,e)=>Array.from(Array(e),(()=>Array(t).fill(0))),F="freeze",M="createNewBlock";class H{static observers={[M]:[],[F]:[]};constructor(t,e=!0){this.$playground=t,this.$board=t.querySelector("my-tetris-board"),this.blockQueue=j(L),this.observers={[M]:[],[F]:[]},e&&this.createNewBlock()}subscribe(t,e){this.observers[t].push(e)}notify(t){this.observers[t].forEach((t=>t()))}unsubscribe(t,e){this.observers[t]=this.observers[t].filter((t=>t!==e))}getNextTetrominos(){return this.blockQueue.slice(0,5)}createNewBlock(){this.block=this.blockQueue.shift(),this.blockQueue.length<5&&(this.blockQueue=this.blockQueue.concat(j(L)));const t=((t,e)=>{const i=e.findIndex((t=>t.some((t=>0!==t))));return{x:Math.floor((10-e[0].length)/2),y:-i}})(0,this.block);this.x=t.x,this.y=t.y,this.notify(M)}rotate(){const t=this.block[0].map(((t,e)=>this.block.map((t=>t[e])).reverse())),e=t[0].length,i=t.length;let s=this.x,n=this.y;s+e>T&&(s=T-e),s<0&&(s=0),n+i>20&&(n=20-i),n<0&&(n=0),this.canMove(s,n,t)&&(this.block=t,this.x=s,this.y=n)}moveLeft(){this.canMove(this.x-1,this.y,this.block)&&(this.x-=1)}moveRight(){this.canMove(this.x+1,this.y,this.block)&&(this.x+=1)}moveDown(){this.canMove(this.x,this.y+1,this.block)?this.y+=1:0===this.y?(this.freeze(),this.$board.stopGame()):(this.freeze(),this.createNewBlock())}freeze(){const{block:t,x:e,y:i}=this;t.forEach(((t,s)=>{t.forEach(((t,n)=>{0!==t&&(this.$board.data[i+s][e+n]=10*t)}))})),this.notify(F)}canMove(t,e,i){for(let s=0;s<i.length;s+=1)for(let n=0;n<i[s].length;n+=1)if(0!==i[s][n]){const i=t+n,o=e+s;if(i<0||i>=T||o<0||o>=20||this.$board.data[o][i]>=10)return!1}return!0}clone(){const t=new H(this.$playground,!1);return t.block=this.block.map((t=>[...t])),t.x=this.x,t.y=this.y,t}}class N extends s{constructor(){super(),this.data=A(T,20),this.$playground=null,this.start=!1,this.tetromino=null,this.lastTime=null,this.dropInterval=1e3,this.tetrominoCounter=0,this.animationId=null,this.keyState=new Set,this.bindMethods("startGame","dropBlock","increaseDropSpeed","removeFullRows","keyupHandler","keydownHandler","handleKeys","render")}connectedCallback(){super.connectedCallback()}disconnectedCallback(){this.tetromino.unsubscribe(M,this.increaseDropSpeed),this.tetromino.unsubscribe(F,this.removeFullRows)}injectHTML(){return i`
      ${this.data.map((t=>i`
            <ul>
              ${t.map((t=>i`<li class="cell-${$[t]}"></li>`)).join("")}
            </ul>
          `)).join("")}
    `}increaseDropSpeed(){10===this.tetrominoCounter&&(this.tetrominoCounter=0,this.dropInterval*=.9),this.tetrominoCounter+=1}startGame(t,e){this.start||(this.data=A(T,20),this.tetromino=e,this.tetromino.subscribe(M,this.increaseDropSpeed),this.tetromino.subscribe(F,this.removeFullRows),this.start=!0,this.$playground=t,this.updateBoard(),document.addEventListener("keydown",this.keydownHandler),document.addEventListener("keyup",this.keyupHandler),this.lastTime=performance.now(),requestAnimationFrame(this.dropBlock))}stopGame(){this.start=!1,this.tetrominoCounter=0,this.dropInterval=1e3,document.removeEventListener("keydown",this.keydownHandler),document.removeEventListener("keyup",this.keyupHandler)}dropBlock(t){if(t-this.lastTime>this.dropInterval){const e=this.tetromino.clone();this.tetromino.moveDown(),this.updateBoard(e),this.lastTime=t}this.start?this.animationId=requestAnimationFrame(this.dropBlock):cancelAnimationFrame(this.animationId)}keydownHandler(t){this.keyState.add(t.key),this.handleKeys()}keyupHandler(t){this.keyState.delete(t.key)}handleKeys(){const t=this.tetromino.clone();B.get(this.$playground.id).forEach(((t,e)=>{this.keyState.has(e)&&this.tetromino[t]()})),requestAnimationFrame((()=>this.updateBoard(t)))}updateBoard(t=null){t&&this.removeOldBlock(t),this.putNewBlock(this.data),this.render()}removeOldBlock(t){const{block:e,x:i,y:s}=t;e.forEach(((t,e)=>{t.forEach(((t,n)=>{this.data[s+e]?.[i+n]===t&&(this.data[s+e][i+n]=0)}))}))}putNewBlock(){const{x:t,y:e,block:i}=this.tetromino;i.forEach(((i,s)=>{i.forEach(((i,n)=>{0!==i&&(this.data[e+s][t+n]=i)}))}))}removeFullRows(){console.log("removeFullRows");let t=0;this.data.forEach(((e,i)=>{e.every((t=>t>=10))&&(t+=1,this.data.splice(i,1),this.data.unshift(Array(T).fill(0)))})),t>0&&this.$playground.scoreUp(D[t])}}class P extends s{constructor(){super(),this.$playground=null,this.tetromino=null}connectedCallback(){super.connectedCallback()}disconnectedCallback(){this.tetromino.unsubscribe(M,this.render)}injectHTML(){return i`
      ${this.tetromino?.getNextTetrominos().map((t=>i`
            <div class="tetromino-preview">
              ${t.map((t=>i`
                    <ul class="tetromino-preview-row">
                      ${t.map((t=>i` <li class="cell-${$[t]}"></li> `)).join("")}
                    </ul>
                  `)).join("")}
            </div>
          `)).join("")||""}
    `}startGame(t,e){this.$playground=t,this.tetromino=e,this.tetromino.subscribe(M,this.render),this.render()}}class q extends s{constructor(){super(),this.score=0}connectedCallback(){super.connectedCallback()}injectHTML(){return i`
      <div class="container">
        <my-tetris-board class="board"></my-tetris-board>
        <my-tetris-preview class="tetromino-previews"></my-tetris-preview>
      </div>
      <span class="score">${this.score}</span>
    `}startGame(){this.tetromino=new H(this),this.querySelector("my-tetris-board").startGame(this,this.tetromino),this.querySelector("my-tetris-preview").startGame(this,this.tetromino)}scoreUp(t){this.score+=t,this.querySelector(".score").innerText=this.score}}(async()=>{try{await e.openDB()}catch(t){queueMicrotask((()=>alert("IndexedDBÎ•º ÏÇ¨Ïö©Ìï† Ïàò ÏóÜÏäµÎãàÎã§.")))}customElements.define("my-app",n),customElements.define("my-footer",m),customElements.define("my-home",b),customElements.define("my-tetris",y),customElements.define("my-tetris-playground",q),customElements.define("my-tetris-board",N),customElements.define("my-tetris-preview",P),customElements.define("my-flappybird",k),customElements.define("my-icons",v),customElements.define("my-icon",g),customElements.define("my-notepad",w),customElements.define("my-notepad-header",E)})(),window.addEventListener("load",(()=>h.render())),window.addEventListener("popstate",(()=>h.render()))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFPLGFBQWN6SyxHQUNwQ3dLLGVBQWVDLE9BQU8sb0JBQXFCakksRUFDNUMsRUFuQkQsR0FxQkF0SyxPQUFPbUYsaUJBQWlCLFFBQVEsSUFBTSxhQUN0Q25GLE9BQU9tRixpQkFBaUIsWUFBWSxJQUFNLFkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9qYXZhc2NyaXB0LXNhbmRib3gvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vamF2YXNjcmlwdC1zYW5kYm94L3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL2phdmFzY3JpcHQtc2FuZGJveC8uL3NyYy9jb3JlL0luZGV4ZWREQi5qcyIsIndlYnBhY2s6Ly9qYXZhc2NyaXB0LXNhbmRib3gvLi9zcmMvdXRpbHMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vamF2YXNjcmlwdC1zYW5kYm94Ly4vc3JjL2NvcmUvV2ViQ29tcG9uZW50LmpzIiwid2VicGFjazovL2phdmFzY3JpcHQtc2FuZGJveC8uL3NyYy9BcHAuanMiLCJ3ZWJwYWNrOi8vamF2YXNjcmlwdC1zYW5kYm94Ly4vc3JjL3V0aWxzL3JvdXRlcy5qcyIsIndlYnBhY2s6Ly9qYXZhc2NyaXB0LXNhbmRib3gvLi9zcmMvY29yZS9Sb3V0ZXIuanMiLCJ3ZWJwYWNrOi8vamF2YXNjcmlwdC1zYW5kYm94Ly4vc3JjL3ZpZXcvQ29tbW9uL0Zvb3Rlci5qcyIsIndlYnBhY2s6Ly9qYXZhc2NyaXB0LXNhbmRib3gvLi9zcmMvdmlldy9Ib21lL2luZGV4LmpzIiwid2VicGFjazovL2phdmFzY3JpcHQtc2FuZGJveC8uL3NyYy92aWV3L1RldHJpcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9qYXZhc2NyaXB0LXNhbmRib3gvLi9zcmMvdmlldy9GbGFwcHlCaXJkL2luZGV4LmpzIiwid2VicGFjazovL2phdmFzY3JpcHQtc2FuZGJveC8uL3NyYy92aWV3L0NvbW1vbi9JY29ucy5qcyIsIndlYnBhY2s6Ly9qYXZhc2NyaXB0LXNhbmRib3gvLi9zcmMvdmlldy9Db21tb24vSWNvbi5qcyIsIndlYnBhY2s6Ly9qYXZhc2NyaXB0LXNhbmRib3gvLi9zcmMvdmlldy9Ob3RlUGFkL2luZGV4LmpzIiwid2VicGFjazovL2phdmFzY3JpcHQtc2FuZGJveC8uL3NyYy92aWV3L05vdGVQYWQvY29uc3QvYnV0dG9ucy5qcyIsIndlYnBhY2s6Ly9qYXZhc2NyaXB0LXNhbmRib3gvLi9zcmMvdmlldy9Ob3RlUGFkL2NvbXBvbmVudHMvTm90ZVBhZEhlYWRlci5qcyIsIndlYnBhY2s6Ly9qYXZhc2NyaXB0LXNhbmRib3gvLi9zcmMvdmlldy9UZXRyaXMvY29uc3QvaW5kZXguanMiLCJ3ZWJwYWNrOi8vamF2YXNjcmlwdC1zYW5kYm94Ly4vc3JjL3ZpZXcvVGV0cmlzL3V0aWxzL2luZGV4LmpzIiwid2VicGFjazovL2phdmFzY3JpcHQtc2FuZGJveC8uL3NyYy92aWV3L1RldHJpcy9jbGFzcy9UZXRyb21pbm8uanMiLCJ3ZWJwYWNrOi8vamF2YXNjcmlwdC1zYW5kYm94Ly4vc3JjL3ZpZXcvVGV0cmlzL2NvbXBvbmVudHMvVGV0cmlzQm9hcmQuanMiLCJ3ZWJwYWNrOi8vamF2YXNjcmlwdC1zYW5kYm94Ly4vc3JjL3ZpZXcvVGV0cmlzL2NvbXBvbmVudHMvVGV0cmlzUHJldmlldy5qcyIsIndlYnBhY2s6Ly9qYXZhc2NyaXB0LXNhbmRib3gvLi9zcmMvdmlldy9UZXRyaXMvY29tcG9uZW50cy9UZXRyaXNQbGF5Z3JvdW5kLmpzIiwid2VicGFjazovL2phdmFzY3JpcHQtc2FuZGJveC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCIuL2pzLXNhbmRib3gvXCI7IiwiY2xhc3MgSW5kZXhlZERCIHtcclxuICBkYjtcclxuXHJcbiAgLyoqXHJcbiAgICog7IOd7ISx7J6QXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGRiTmFtZVxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkYlZlcnNpb25cclxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBzdG9yZXNcclxuICAgKi9cclxuICBjb25zdHJ1Y3RvcihkYk5hbWUsIGRiVmVyc2lvbiwgc3RvcmVzKSB7XHJcbiAgICB0aGlzLmRiTmFtZSA9IGRiTmFtZTtcclxuICAgIHRoaXMuZGJWZXJzaW9uID0gZGJWZXJzaW9uO1xyXG4gICAgdGhpcy5zdG9yZXMgPSBzdG9yZXM7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBEQiDsmKTtlIgg66mU7ISc65OcXHJcbiAgICogQHJldHVybnMge1Byb21pc2U8dm9pZD59XHJcbiAgICovXHJcbiAgYXN5bmMgb3BlbkRCKCkge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgY29uc3QgcmVxdWVzdCA9IHdpbmRvdy5pbmRleGVkREIub3Blbih0aGlzLmRiTmFtZSwgdGhpcy5kYlZlcnNpb24pO1xyXG5cclxuICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5kYiA9IHJlcXVlc3QucmVzdWx0O1xyXG4gICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHJlcXVlc3Qub25lcnJvciA9IChlKSA9PiB7XHJcbiAgICAgICAgcmVqZWN0KGUpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgcmVxdWVzdC5vbnVwZ3JhZGVuZWVkZWQgPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5kYiA9IHJlcXVlc3QucmVzdWx0O1xyXG5cclxuICAgICAgICB0aGlzLnN0b3Jlcy5mb3JFYWNoKChzdG9yZSkgPT4ge1xyXG4gICAgICAgICAgaWYgKHRoaXMuZGIub2JqZWN0U3RvcmVOYW1lcy5jb250YWlucyhzdG9yZSkpIHtcclxuICAgICAgICAgICAgdGhpcy5kYi5kZWxldGVPYmplY3RTdG9yZShzdG9yZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB0aGlzLmRiLmNyZWF0ZU9iamVjdFN0b3JlKHN0b3JlLCB7IGtleVBhdGg6ICdpZCcgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH07XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOuNsOydtO2EsCDsobDtmowg66mU7ISc65OcXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHN0b3JlTmFtZVxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpZFxyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPG9iamVjdD59XHJcbiAgICovXHJcbiAgYXN5bmMgZ2V0RGF0YShzdG9yZU5hbWUsIGlkKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5kYi50cmFuc2FjdGlvbihzdG9yZU5hbWUsICdyZWFkb25seScpLm9iamVjdFN0b3JlKHN0b3JlTmFtZSkuZ2V0KGlkKTtcclxuXHJcbiAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gKCkgPT4ge1xyXG4gICAgICAgIHJlc29sdmUocmVxdWVzdC5yZXN1bHQpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgcmVxdWVzdC5vbmVycm9yID0gKGUpID0+IHtcclxuICAgICAgICByZWplY3QoZSk7XHJcbiAgICAgIH07XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOuNsOydtO2EsCDsoITssrQg7KGw7ZqMIOuplOyEnOuTnFxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzdG9yZU5hbWVcclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxvYmplY3RbXT59XHJcbiAgICovXHJcbiAgYXN5bmMgZ2V0QWxsRGF0YShzdG9yZU5hbWUpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLmRiLnRyYW5zYWN0aW9uKHN0b3JlTmFtZSwgJ3JlYWRvbmx5Jykub2JqZWN0U3RvcmUoc3RvcmVOYW1lKS5nZXRBbGwoKTtcclxuXHJcbiAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gKCkgPT4ge1xyXG4gICAgICAgIHJlc29sdmUocmVxdWVzdC5yZXN1bHQpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgcmVxdWVzdC5vbmVycm9yID0gKGUpID0+IHtcclxuICAgICAgICByZWplY3QoZSk7XHJcbiAgICAgIH07XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOuNsOydtO2EsCDstpTqsIAg66mU7ISc65OcXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHN0b3JlTmFtZVxyXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBkYXRhXHJcbiAgICogQHJldHVybnMge1Byb21pc2U8b2JqZWN0Pn1cclxuICAgKi9cclxuICBhc3luYyB1cHNlcnREYXRhKHN0b3JlTmFtZSwgZGF0YSkge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgY29uc3Qgb2JqZWN0U3RvcmUgPSB0aGlzLmRiLnRyYW5zYWN0aW9uKHN0b3JlTmFtZSwgJ3JlYWR3cml0ZScpLm9iamVjdFN0b3JlKHN0b3JlTmFtZSk7XHJcbiAgICAgIGNvbnN0IG1vZGlmaWVkRGF0YSA9IHsgLi4uZGF0YSwgaWQ6IGRhdGEuaWQgfHwgbmV3IERhdGUoKS5nZXRUaW1lKCkgfTtcclxuICAgICAgY29uc3QgcmVxdWVzdCA9IG9iamVjdFN0b3JlLnB1dChtb2RpZmllZERhdGEpO1xyXG5cclxuICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSAoKSA9PiB7XHJcbiAgICAgICAgcmVzb2x2ZShyZXF1ZXN0LnJlc3VsdCk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICByZXF1ZXN0Lm9uZXJyb3IgPSAoKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2cocmVxdWVzdC5lcnJvcik7XHJcbiAgICAgICAgcmVqZWN0KHJlcXVlc3QuZXJyb3IpO1xyXG4gICAgICB9O1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDrjbDsnbTthLAg7IKt7KCcIOuplOyEnOuTnFxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzdG9yZU5hbWVcclxuICAgKiBAcGFyYW0ge251bWJlcn0gaWRcclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxvYmplY3Q+fVxyXG4gICAqL1xyXG4gIGFzeW5jIGRlbGV0ZURhdGEoc3RvcmVOYW1lLCBpZCkge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgY29uc3QgcmVxdWVzdCA9IHRoaXMuZGIudHJhbnNhY3Rpb24oc3RvcmVOYW1lLCAncmVhZHdyaXRlJykub2JqZWN0U3RvcmUoc3RvcmVOYW1lKS5kZWxldGUoaWQpO1xyXG5cclxuICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSAoKSA9PiB7XHJcbiAgICAgICAgcmVzb2x2ZSh0cnVlKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHJlcXVlc3Qub25lcnJvciA9IChlKSA9PiB7XHJcbiAgICAgICAgcmVqZWN0KGUpO1xyXG4gICAgICB9O1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5jb25zdCBzYW5kYm94REIgPSBuZXcgSW5kZXhlZERCKCdzYW5kYm94REInLCAyLCBbJ25vdGVwYWQnXSk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBzYW5kYm94REI7XHJcbiIsImNvbnN0IHJlbmRlclJhdyA9IChzdHJpbmcsIC4uLnZhbHVlcykgPT4ge1xyXG4gIHJldHVybiBTdHJpbmcucmF3KHN0cmluZywgLi4udmFsdWVzKTtcclxufTtcclxuXHJcbmNvbnN0IHNodWZmbGUgPSAoYXJyYXkpID0+IHtcclxuICByZXR1cm4gYXJyYXkuc29ydCgoKSA9PiBNYXRoLnJhbmRvbSgpIC0gMC41KTtcclxufTtcclxuXHJcbmV4cG9ydCB7IHJlbmRlclJhdyBhcyBodG1sLCByZW5kZXJSYXcgYXMgY3NzLCBzaHVmZmxlIH07XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFdlYkNvbXBvbmVudCBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLnJlbmRlciA9IHRoaXMucmVuZGVyLmJpbmQodGhpcyk7XG4gIH1cblxuICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICB0aGlzLnJlbmRlcigpO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHRoaXMuaW5uZXJIVE1MID0gdGhpcy5pbmplY3RIVE1MKCk7XG4gIH1cblxuICBpbmplY3RIVE1MKCkge1xuICAgIHJldHVybiBgYDtcbiAgfVxuXG4gIGJpbmRNZXRob2RzKC4uLm1ldGhvZHMpIHtcbiAgICBtZXRob2RzLmZvckVhY2goKG1ldGhvZCkgPT4ge1xuICAgICAgdGhpc1ttZXRob2RdID0gdGhpc1ttZXRob2RdLmJpbmQodGhpcyk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCB7IGh0bWwgfSBmcm9tICcuL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IFdlYkNvbXBvbmVudCBmcm9tICcuL2NvcmUvV2ViQ29tcG9uZW50JztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwcCBleHRlbmRzIFdlYkNvbXBvbmVudCB7XHJcbiAgaW5qZWN0SFRNTCgpIHtcclxuICAgIHJldHVybiBodG1sYFxyXG4gICAgICA8ZGl2IGlkPVwicGFnZVwiPjwvZGl2PlxyXG4gICAgICA8bXktaWNvbnMgdGFiaW5kZXg9XCItMVwiPjwvbXktaWNvbnM+XHJcbiAgICAgIDxteS1mb290ZXI+PC9teS1mb290ZXI+XHJcbiAgICBgO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBodG1sIH0gZnJvbSAnLi91dGlscyc7XHJcbmltcG9ydCB0ZXRyaXMgZnJvbSAnLi4vLi4vcHVibGljL3RldHJpcy5wbmcnO1xyXG5pbXBvcnQgZmxhcHB5QmlyZCBmcm9tICcuLi8uLi9wdWJsaWMvZmxhcHB5QmlyZC5wbmcnO1xyXG5pbXBvcnQgbm90ZXBhZCBmcm9tICcuLi8uLi9wdWJsaWMvbm90ZXBhZC5wbmcnO1xyXG5pbXBvcnQgc2FuZGJveERCIGZyb20gJy4uL2NvcmUvSW5kZXhlZERCJztcclxuXHJcbmNvbnN0IEJBU0VfVVJMID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgPyAnJyA6ICcvanMtc2FuZGJveCc7XHJcblxyXG5jb25zdCByb3V0ZXMgPSBbXHJcbiAge1xyXG4gICAgcGF0aDogYC9gLFxyXG4gICAgaHRtbDogaHRtbGA8bXktaG9tZT48L215LWhvbWU+YCxcclxuICAgIGxhYmVsOiAnSG9tZScsXHJcbiAgICBpY29uU3JjOiBudWxsLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgcGF0aDogYC90ZXRyaXNgLFxyXG4gICAgaHRtbDogaHRtbGA8bXktdGV0cmlzPjwvbXktdGV0cmlzPmAsXHJcbiAgICBsYWJlbDogJ1RldHJpcycsXHJcbiAgICBpY29uU3JjOiB0ZXRyaXMsXHJcbiAgfSxcclxuICB7XHJcbiAgICBwYXRoOiBgL2ZsYXBweWJpcmRgLFxyXG4gICAgaHRtbDogaHRtbGA8bXktZmxhcHB5YmlyZD48L215LWZsYXBweWJpcmQ+YCxcclxuICAgIGxhYmVsOiAnRmxhcHB5Jm5ic3A7QmlyZCcsXHJcbiAgICBpY29uU3JjOiBmbGFwcHlCaXJkLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgcGF0aDogYC9ub3RlcGFkYCxcclxuICAgIGh0bWw6IGh0bWxgPG15LW5vdGVwYWQ+PC9teS1ub3RlcGFkPmAsXHJcbiAgICBsYWJlbDogJ05vdGUmbmJzcDtQYWQnLFxyXG4gICAgaWNvblNyYzogbm90ZXBhZCxcclxuICB9LFxyXG4gIHtcclxuICAgIHBhdGg6IGAvbm90ZXBhZC86aWRgLFxyXG4gICAgaHRtbDogaHRtbGA8bXktbm90ZXBhZCBkYXRhLWlkPVwiOmlkXCI+PC9teS1ub3RlcGFkPmAsXHJcbiAgICBsYWJlbDogJ05vdGUmbmJzcDtQYWQnLFxyXG4gICAgaWNvblNyYzogbnVsbCxcclxuICB9LFxyXG5dO1xyXG5cclxuY29uc3QgbWFpbkljb25zID0gcm91dGVzLnJlZHVjZSgocHJldiwgcm91dGVyKSA9PiB7XHJcbiAgY29uc3QgeyBwYXRoLCBsYWJlbCwgaWNvblNyYyB9ID0gcm91dGVyO1xyXG4gIGlmICghcm91dGVyLmljb25TcmMpIHJldHVybiBwcmV2O1xyXG4gIHJldHVybiBbLi4ucHJldiwgeyBwYXRoLCBsYWJlbCwgaWNvblNyYyB9XTtcclxufSwgW10pO1xyXG5cclxuY29uc3QgZ2V0TG9jYWxJY29ucyA9IGFzeW5jICgpID0+IHtcclxuICBjb25zdCBub3RlcGFkRGF0YSA9IGF3YWl0IHNhbmRib3hEQi5nZXRBbGxEYXRhKCdub3RlcGFkJyk7XHJcbiAgY29uc3Qgbm90ZXBhZEljb25zID0gbm90ZXBhZERhdGEucmVkdWNlKChwcmV2LCBpY29uKSA9PiB7XHJcbiAgICBjb25zdCB7IGlkLCB0aXRsZSB9ID0gaWNvbjtcclxuICAgIHJldHVybiBbLi4ucHJldiwgeyBwYXRoOiBgL25vdGVwYWQvJHtpZH1gLCBsYWJlbDogdGl0bGUsIGljb25TcmM6IG5vdGVwYWQgfV07XHJcbiAgfSwgW10pO1xyXG5cclxuICByZXR1cm4gWy4uLm5vdGVwYWRJY29uc107XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCByb3V0ZXM7XHJcbmV4cG9ydCB7IG1haW5JY29ucywgZ2V0TG9jYWxJY29ucywgQkFTRV9VUkwgfTtcclxuIiwiaW1wb3J0IHJvdXRlcywgeyBCQVNFX1VSTCB9IGZyb20gJy4uL3V0aWxzL3JvdXRlcyc7XHJcblxyXG5jbGFzcyBSb3V0ZXIge1xyXG4gIGNvbnN0cnVjdG9yKHJvdXRlKSB7XHJcbiAgICB0aGlzLnJvdXRlcyA9IHJvdXRlO1xyXG4gIH1cclxuXHJcbiAgcGF0aFRvUmVnZXhwKHBhdGgpIHtcclxuICAgIHJldHVybiBuZXcgUmVnRXhwKGBeJHtwYXRoLnJlcGxhY2UoL1xcLy9nLCAnXFxcXC8nKS5yZXBsYWNlKC86XFx3Ky9nLCAnKC4rKScpfSRgKTtcclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IGN1cnJlbnRQYXRoID0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lO1xyXG4gICAgY29uc3Qgcm91dGUgPSB0aGlzLnJvdXRlcy5maW5kKCh2YWx1ZSkgPT4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5wYXRoVG9SZWdleHAodGhpcy5nZXRVcmxGcm9tKHZhbHVlLnBhdGgpKS50ZXN0KGN1cnJlbnRQYXRoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGlmICghcm91dGUpIHtcclxuICAgICAgdGhpcy5yZXBsYWNlVG8oJy8nKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwYWdlJykuaW5uZXJIVE1MID0gcm91dGUuaHRtbC5yZXBsYWNlKCc6aWQnLCB0aGlzLmdldElkRnJvbVBhdGgoY3VycmVudFBhdGgpKTtcclxuICB9XHJcblxyXG4gIGdldElkRnJvbVBhdGgocGF0aCkge1xyXG4gICAgcmV0dXJuIHBhdGgubWF0Y2goL1xcZCsvKT8uWzBdO1xyXG4gIH1cclxuXHJcbiAgbmF2aWdhdGVUbyh1cmwpIHtcclxuICAgIGlmICh0aGlzLmdldFVybEZyb20odXJsKSA9PT0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lKSByZXR1cm47XHJcbiAgICB3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUobnVsbCwgbnVsbCwgQkFTRV9VUkwgKyB1cmwpO1xyXG4gICAgdGhpcy5yZW5kZXIoKTtcclxuICB9XHJcblxyXG4gIHJlcGxhY2VUbyh1cmwpIHtcclxuICAgIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZShudWxsLCBudWxsLCBCQVNFX1VSTCArIHVybCk7XHJcbiAgICB0aGlzLnJlbmRlcigpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXJsRnJvbSh1cmwpIHtcclxuICAgIHJldHVybiBgJHtCQVNFX1VSTH0ke3VybH1gO1xyXG4gIH1cclxuXHJcbiAgYmFjaygpIHtcclxuICAgIHdpbmRvdy5oaXN0b3J5LmJhY2soKTtcclxuICAgIHRoaXMucmVuZGVyKCk7XHJcbiAgfVxyXG59XHJcblxyXG5jb25zdCByb3V0ZXIgPSBuZXcgUm91dGVyKHJvdXRlcyk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCByb3V0ZXI7XHJcbiIsImltcG9ydCBXZWJDb21wb25lbnQgZnJvbSAnLi4vLi4vY29yZS9XZWJDb21wb25lbnQnO1xyXG5pbXBvcnQgeyBodG1sIH0gZnJvbSAnLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBtYWluSWNvbnMgfSBmcm9tICcuLi8uLi91dGlscy9yb3V0ZXMnO1xyXG5pbXBvcnQgcm91dGVyIGZyb20gJy4uLy4uL2NvcmUvUm91dGVyJztcclxuaW1wb3J0IHdpbmRvd0xvZ28gZnJvbSAnLi4vLi4vLi4vcHVibGljL3dpbmRvd0xvZ28ucG5nJztcclxuaW1wb3J0IHNlYXJjaEljb24gZnJvbSAnLi4vLi4vLi4vcHVibGljL3NlYXJjaEljb24ucG5nJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvb3RlciBleHRlbmRzIFdlYkNvbXBvbmVudCB7XHJcbiAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XHJcbiAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xyXG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGFuZGxlQ2xpY2suYmluZCh0aGlzKSk7XHJcbiAgfVxyXG5cclxuICBpbmplY3RIVE1MKCkge1xyXG4gICAgcmV0dXJuIGh0bWxgXHJcbiAgICAgIDxpbWcgYWx0PVwid2luZG93X2xvZ29cIiBzcmM9JHt3aW5kb3dMb2dvfSBjbGFzcz1cIndpbmRvd19pY29uXCIgLz5cclxuICAgICAgPGRpdiBjbGFzcz1cImlucHV0X2JveFwiPlxyXG4gICAgICAgIDxpbWcgYWx0PVwic2VhcmNoXCIgc3JjPSR7c2VhcmNoSWNvbn0gY2xhc3M9XCJ3aW5kb3dfaWNvblwiIC8+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgcGxhY2Vob2xkZXI9XCLssL7quLBcIiAvPlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgJHttYWluSWNvbnNcclxuICAgICAgICAubWFwKChpY29uKSA9PiB7XHJcbiAgICAgICAgICByZXR1cm4gaHRtbGAgPG15LWljb24gZGF0YS1wYXRoPVwiJHtpY29uLnBhdGh9XCIgZGF0YS1pY29uU3JjPVwiJHtpY29uLmljb25TcmN9XCI+PC9teS1pY29uPiBgO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmpvaW4oJycpfVxyXG4gICAgYDtcclxuICB9XHJcblxyXG4gIGhhbmRsZUNsaWNrKGUpIHtcclxuICAgIGlmICghZS50YXJnZXQuY2xvc2VzdCgnbXktaWNvbicpKSByZXR1cm47XHJcblxyXG4gICAgY29uc3QgaWNvbiA9IGUudGFyZ2V0LmNsb3Nlc3QoJ215LWljb24nKTtcclxuICAgIHJvdXRlci5uYXZpZ2F0ZVRvKGljb24uZGF0YXNldC5wYXRoKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFdlYkNvbXBvbmVudCBmcm9tICcuLi8uLi9jb3JlL1dlYkNvbXBvbmVudCc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIb21lIGV4dGVuZHMgV2ViQ29tcG9uZW50IHt9XHJcbiIsImltcG9ydCBXZWJDb21wb25lbnQgZnJvbSAnLi4vLi4vY29yZS9XZWJDb21wb25lbnQnO1xuaW1wb3J0IHsgaHRtbCB9IGZyb20gJy4uLy4uL3V0aWxzL3V0aWxzJztcbmltcG9ydCAnLi9zdHlsZXMuc2Nzcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRldHJpcyBleHRlbmRzIFdlYkNvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5zY29yZSA9IDA7XG4gICAgdGhpcy5oYW5kbGVTdGFydCA9IHRoaXMuaGFuZGxlU3RhcnQuYmluZCh0aGlzKTtcbiAgfVxuXG4gIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgdGhpcy5xdWVyeVNlbGVjdG9yKCcjc3RhcnQtYnV0dG9uJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmhhbmRsZVN0YXJ0KTtcbiAgfVxuXG4gIGluamVjdEhUTUwoKSB7XG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8bXktdGV0cmlzLXBsYXlncm91bmQgaWQ9XCIxXCI+PC9teS10ZXRyaXMtcGxheWdyb3VuZD5cbiAgICAgIDxidXR0b24gaWQ9XCJzdGFydC1idXR0b25cIj7qsozsnoQg7Iuc7J6RPC9idXR0b24+XG4gICAgICA8bXktdGV0cmlzLXBsYXlncm91bmQgaWQ9XCIyXCI+PC9teS10ZXRyaXMtcGxheWdyb3VuZD5cbiAgICBgO1xuICB9XG5cbiAgaGFuZGxlU3RhcnQoKSB7XG4gICAgdGhpcy5xdWVyeVNlbGVjdG9yQWxsKCdteS10ZXRyaXMtcGxheWdyb3VuZCcpLmZvckVhY2goKG5vZGUpID0+IG5vZGUuc3RhcnRHYW1lKCkpO1xuICB9XG59XG4iLCJpbXBvcnQgV2ViQ29tcG9uZW50IGZyb20gJy4uLy4uL2NvcmUvV2ViQ29tcG9uZW50JztcclxuaW1wb3J0IHsgaHRtbCB9IGZyb20gJy4uLy4uL3V0aWxzL3V0aWxzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZsYXBweUJpcmQgZXh0ZW5kcyBXZWJDb21wb25lbnQge1xyXG4gIGluamVjdEhUTUwoKSB7XHJcbiAgICByZXR1cm4gaHRtbGBcclxuICAgICAgPGgxPkZsYXBweSBCaXJkPC9oMT5cclxuICAgICAgPHA+WW91IGFyZSB2aWV3aW5nIHRoZSBGbGFwcHkgQmlyZCBjb21wb25lbnQhPC9wPlxyXG4gICAgICA8cD5Zb3UgYXJlIHZpZXdpbmcgdGhlIEZsYXBweSBCaXJkIGNvbXBvbmVudCE8L3A+XHJcbiAgICAgIDxwPllvdSBhcmUgdmlld2luZyB0aGUgRmxhcHB5IEJpcmQgY29tcG9uZW50ITwvcD5cclxuICAgICAgPHA+WW91IGFyZSB2aWV3aW5nIHRoZSBGbGFwcHkgQmlyZCBjb21wb25lbnQhPC9wPlxyXG4gICAgICA8cD5Zb3UgYXJlIHZpZXdpbmcgdGhlIEZsYXBweSBCaXJkIGNvbXBvbmVudCE8L3A+XHJcbiAgICAgIDxwPllvdSBhcmUgdmlld2luZyB0aGUgRmxhcHB5IEJpcmQgY29tcG9uZW50ITwvcD5cclxuICAgIGA7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IGh0bWwgfSBmcm9tICcuLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCByb3V0ZXIgZnJvbSAnLi4vLi4vY29yZS9Sb3V0ZXInO1xyXG5pbXBvcnQgV2ViQ29tcG9uZW50IGZyb20gJy4uLy4uL2NvcmUvV2ViQ29tcG9uZW50JztcclxuaW1wb3J0IHsgZ2V0TG9jYWxJY29ucywgbWFpbkljb25zIH0gZnJvbSAnLi4vLi4vdXRpbHMvcm91dGVzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEljb25zIGV4dGVuZHMgV2ViQ29tcG9uZW50IHtcclxuICBhc3luYyBjb25uZWN0ZWRDYWxsYmFjaygpIHtcclxuICAgIHRoaXMuaWNvbnMgPSBbLi4ubWFpbkljb25zLCAuLi4oYXdhaXQgZ2V0TG9jYWxJY29ucygpKV07XHJcbiAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xyXG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGFuZGxlQ2xpY2spO1xyXG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdkYmxjbGljaycsIHRoaXMuaGFuZGxlRG91YmxlQ2xpY2spO1xyXG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5oYW5kbGVLZXlEb3duKTtcclxuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcignaWNvbkNoYW5nZScsIHRoaXMuaGFuZGxlSWNvbkNoYW5nZSk7XHJcbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ2ljb25EZWxldGUnLCB0aGlzLmhhbmRsZUljb25EZWxldGUpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldCBvYnNlcnZlZEF0dHJpYnV0ZXMoKSB7XHJcbiAgICByZXR1cm4gWydpY29ucyddO1xyXG4gIH1cclxuXHJcbiAgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKG5hbWUsIG9sZFZhbHVlLCBuZXdWYWx1ZSkge1xyXG4gICAgaWYgKG9sZFZhbHVlID09PSBuZXdWYWx1ZSkgcmV0dXJuO1xyXG4gICAgdGhpcy5yZW5kZXIoKTtcclxuICB9XHJcblxyXG4gIGluamVjdEhUTUwoKSB7XHJcbiAgICByZXR1cm4gaHRtbGBcclxuICAgICAgJHt0aGlzLmljb25zXHJcbiAgICAgICAgLm1hcCgoaWNvbikgPT4ge1xyXG4gICAgICAgICAgcmV0dXJuIGh0bWxgXHJcbiAgICAgICAgICAgIDxteS1pY29uIGRhdGEtcGF0aD0ke2ljb24ucGF0aH0gZGF0YS1sYWJlbD0ke2ljb24ubGFiZWx9IGRhdGEtaWNvblNyYz0ke2ljb24uaWNvblNyY30+PC9teS1pY29uPlxyXG4gICAgICAgICAgYDtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5qb2luKCcnKX1cclxuICAgIGA7XHJcbiAgfVxyXG5cclxuICBnZXQgaWNvbnMoKSB7XHJcbiAgICByZXR1cm4gSlNPTi5wYXJzZSh0aGlzLmdldEF0dHJpYnV0ZSgnaWNvbnMnKSk7XHJcbiAgfVxyXG5cclxuICBzZXQgaWNvbnModmFsdWUpIHtcclxuICAgIHRoaXMuc2V0QXR0cmlidXRlKCdpY29ucycsIEpTT04uc3RyaW5naWZ5KHZhbHVlKSk7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVDbGljayhlKSB7XHJcbiAgICBpZiAoIWUudGFyZ2V0LmNsb3Nlc3QoJ215LWljb24nKSkgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IGljb24gPSBlLnRhcmdldC5jbG9zZXN0KCdteS1pY29uJyk7XHJcbiAgICBpY29uLnRvZ2dsZUF0dHJpYnV0ZSgnY2hlY2tlZCcpO1xyXG4gICAgdGhpcy5xdWVyeVNlbGVjdG9yQWxsKCdteS1pY29uJykuZm9yRWFjaCgobm9kZSkgPT4ge1xyXG4gICAgICBpZiAobm9kZSAhPT0gaWNvbikge1xyXG4gICAgICAgIG5vZGUucmVtb3ZlQXR0cmlidXRlKCdjaGVja2VkJyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgaGFuZGxlRG91YmxlQ2xpY2soZSkge1xyXG4gICAgaWYgKCFlLnRhcmdldC5jbG9zZXN0KCdteS1pY29uJykpIHJldHVybjtcclxuXHJcbiAgICBjb25zdCBpY29uID0gZS50YXJnZXQuY2xvc2VzdCgnbXktaWNvbicpO1xyXG4gICAgcm91dGVyLm5hdmlnYXRlVG8oaWNvbi5kYXRhc2V0LnBhdGgpO1xyXG4gIH1cclxuXHJcbiAgaGFuZGxlS2V5RG93bihlKSB7XHJcbiAgICBjb25zdCBjaGVja2VkRWwgPSB0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoJ215LWljb25bY2hlY2tlZF0nKTtcclxuICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJykge1xyXG4gICAgICBpZiAoY2hlY2tlZEVsLmxlbmd0aCA+IDEpIHJldHVybjtcclxuICAgICAgaWYgKCFjaGVja2VkRWwpIHJldHVybjtcclxuICAgICAgcm91dGVyLm5hdmlnYXRlVG8oY2hlY2tlZEVsWzBdLmRhdGFzZXQucGF0aCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBoYW5kbGVJY29uQ2hhbmdlKGUpIHtcclxuICAgIGNvbnN0IHsgcGF0aCwgbGFiZWwsIGljb25TcmMgfSA9IGUuZGV0YWlsO1xyXG4gICAgY29uc3QgcHJldkljb25JbmRleCA9IHRoaXMuaWNvbnMuZmluZEluZGV4KChpY29uKSA9PiBpY29uLnBhdGggPT09IHBhdGgpO1xyXG5cclxuICAgIGlmIChwcmV2SWNvbkluZGV4ID09PSAtMSkge1xyXG4gICAgICB0aGlzLmljb25zID0gWy4uLnRoaXMuaWNvbnMsIHsgcGF0aCwgbGFiZWwsIGljb25TcmMgfV07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCBuZXdJY29ucyA9IFsuLi50aGlzLmljb25zXTtcclxuICAgICAgbmV3SWNvbnNbcHJldkljb25JbmRleF0gPSB7IHBhdGgsIGxhYmVsLCBpY29uU3JjIH07XHJcbiAgICAgIHRoaXMuaWNvbnMgPSBuZXdJY29ucztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGhhbmRsZUljb25EZWxldGUoZSkge1xyXG4gICAgY29uc3QgeyBwYXRoIH0gPSBlLmRldGFpbDtcclxuICAgIHRoaXMuaWNvbnMgPSB0aGlzLmljb25zLmZpbHRlcigoaWNvbikgPT4gaWNvbi5wYXRoICE9PSBwYXRoKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgaHRtbCB9IGZyb20gJy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IFdlYkNvbXBvbmVudCBmcm9tICcuLi8uLi9jb3JlL1dlYkNvbXBvbmVudCc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJY29uIGV4dGVuZHMgV2ViQ29tcG9uZW50IHtcclxuICBpbmplY3RIVE1MKCkge1xyXG4gICAgY29uc3QgeyBsYWJlbCwgaWNvbnNyYyB9ID0gdGhpcy5kYXRhc2V0O1xyXG4gICAgcmV0dXJuIGh0bWxgXHJcbiAgICAgIDxpbWcgYWx0PVwiJHtsYWJlbH1faWNvblwiIHNyYz0ke2ljb25zcmN9IC8+XHJcbiAgICAgICR7bGFiZWwgPyBgPHNwYW4gY2xhc3M9XCJpY29uX25hbWVcIj4ke2xhYmVsfTwvc3Bhbj5gIDogJyd9XHJcbiAgICBgO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgV2ViQ29tcG9uZW50IGZyb20gJy4uLy4uL2NvcmUvV2ViQ29tcG9uZW50JztcclxuaW1wb3J0IHsgaHRtbCB9IGZyb20gJy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0ICcuL3N0eWxlcy5zY3NzJztcclxuaW1wb3J0IHNhbmRib3hEQiBmcm9tICcuLi8uLi9jb3JlL0luZGV4ZWREQic7XHJcbmltcG9ydCBOb3RlUGFkSWNvbiBmcm9tICcuLi8uLi8uLi9wdWJsaWMvbm90ZXBhZC5wbmcnO1xyXG5pbXBvcnQgcm91dGVyIGZyb20gJy4uLy4uL2NvcmUvUm91dGVyJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5vdGVQYWQgZXh0ZW5kcyBXZWJDb21wb25lbnQge1xyXG4gIGFzeW5jIGNvbm5lY3RlZENhbGxiYWNrKCkge1xyXG4gICAgdGhpcy5kYXRhID0gKGF3YWl0IHNhbmRib3hEQi5nZXREYXRhKCdub3RlcGFkJywgdGhpcy5pZCkpID8/IHtcclxuICAgICAgdGl0bGU6ICfsoJzrqqnsl4bsnYwnLFxyXG4gICAgICBjb250ZW50OiAnJyxcclxuICAgIH07XHJcbiAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xyXG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdzYXZlJywgdGhpcy5oYW5kbGVTYXZlKTtcclxuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcignbG9jYWxTYXZlJywgdGhpcy5oYW5kbGVMb2NhbFNhdmUpO1xyXG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdkZWxldGUnLCB0aGlzLmhhbmRsZURlbGV0ZSk7XHJcbiAgfVxyXG5cclxuICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcclxuICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2F2ZScsIHRoaXMuaGFuZGxlU2F2ZSk7XHJcbiAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2xvY2FsU2F2ZScsIHRoaXMuaGFuZGxlTG9jYWxTYXZlKTtcclxuICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcignZGVsZXRlJywgdGhpcy5oYW5kbGVEZWxldGUpO1xyXG4gIH1cclxuXHJcbiAgaW5qZWN0SFRNTCgpIHtcclxuICAgIGNvbnN0IHsgdGl0bGUsIGNvbnRlbnQgfSA9IHRoaXMuZGF0YTtcclxuICAgIHJldHVybiBodG1sYFxyXG4gICAgICA8bXktbm90ZXBhZC1oZWFkZXIgdGl0bGU9JHt0aXRsZX0+PC9teS1ub3RlcGFkLWhlYWRlcj5cclxuICAgICAgPHRleHRhcmVhPiR7Y29udGVudH08L3RleHRhcmVhPlxyXG4gICAgYDtcclxuICB9XHJcblxyXG4gIGhhbmRsZUxvY2FsU2F2ZShlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBjb25zdCBub3RlUGFkRGF0YSA9IHRoaXMuZ2V0Tm90ZVBhZERhdGEoKTtcclxuICAgIGlmICghbm90ZVBhZERhdGEpIHJldHVybjtcclxuICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbbm90ZVBhZERhdGEuY29udGVudF0sIHsgdHlwZTogJ3RleHQvcGxhaW4nIH0pO1xyXG4gICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcclxuICAgIGxpbmsuaHJlZiA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XHJcbiAgICBsaW5rLmRvd25sb2FkID0gYCR7bm90ZVBhZERhdGEudGl0bGV9LnR4dGA7XHJcbiAgICBsaW5rLmNsaWNrKCk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBoYW5kbGVTYXZlKGUpIHtcclxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICBjb25zdCBub3RlUGFkRGF0YSA9IHRoaXMuZ2V0Tm90ZVBhZERhdGEoKTtcclxuICAgIGlmICghbm90ZVBhZERhdGEpIHJldHVybjtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzYW5kYm94REIudXBzZXJ0RGF0YSgnbm90ZXBhZCcsIG5vdGVQYWREYXRhKTtcclxuXHJcbiAgICAgIGNvbnN0IHBhdGggPSBgL25vdGVwYWQvJHtyZXN1bHR9YDtcclxuXHJcbiAgICAgIGFsZXJ0KCfsoIDsnqXrkJjsl4jsirXri4jri6QuJyk7XHJcbiAgICAgIGNvbnN0IGljb25DaGFuZ2VFdmVudCA9IG5ldyBDdXN0b21FdmVudCgnaWNvbkNoYW5nZScsIHtcclxuICAgICAgICBkZXRhaWw6IHtcclxuICAgICAgICAgIHBhdGgsXHJcbiAgICAgICAgICBsYWJlbDogbm90ZVBhZERhdGEudGl0bGUsXHJcbiAgICAgICAgICBpY29uU3JjOiBOb3RlUGFkSWNvbixcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbXktaWNvbnMnKS5kaXNwYXRjaEV2ZW50KGljb25DaGFuZ2VFdmVudCk7XHJcblxyXG4gICAgICBpZiAodGhpcy5pZCA9PT0gcmVzdWx0KSB7XHJcbiAgICAgICAgdGhpcy50aXRsZSA9IG5vdGVQYWREYXRhLnRpdGxlLnJlcGxhY2UoLyZuYnNwOy9nLCAnICcpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJvdXRlci5uYXZpZ2F0ZVRvKHBhdGgpO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgYWxlcnQoJ+yggOyepeyXkCDsi6TtjKjtlojsirXri4jri6QuJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBoYW5kbGVEZWxldGUoZSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgY29uc3QgY29uZmlybVJlc3VsdCA9IHdpbmRvdy5jb25maXJtKCfsoJXrp5Ag7IKt7KCc7ZWY7Iuc6rKg7Iq164uI6rmMPycpO1xyXG4gICAgICBpZiAoIWNvbmZpcm1SZXN1bHQpIHJldHVybjtcclxuXHJcbiAgICAgIGF3YWl0IHNhbmRib3hEQi5kZWxldGVEYXRhKCdub3RlcGFkJywgdGhpcy5pZCk7XHJcblxyXG4gICAgICBhbGVydCgn7IKt7KCc65CY7JeI7Iq164uI64ukLicpO1xyXG4gICAgICBjb25zdCBpY29uRGVsZXRlRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ2ljb25EZWxldGUnLCB7XHJcbiAgICAgICAgZGV0YWlsOiB7XHJcbiAgICAgICAgICBwYXRoOiBgL25vdGVwYWQvJHt0aGlzLmlkfWAsXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ215LWljb25zJykuZGlzcGF0Y2hFdmVudChpY29uRGVsZXRlRXZlbnQpO1xyXG4gICAgICByb3V0ZXIucmVwbGFjZVRvKCcvbm90ZXBhZCcpO1xyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgIGFsZXJ0KCfsgq3soJzsl5Ag7Iuk7Yyo7ZaI7Iq164uI64ukLicpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0Tm90ZVBhZERhdGEoKSB7XHJcbiAgICBjb25zdCBjb250ZW50RWwgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoJ3RleHRhcmVhJyk7XHJcbiAgICBjb25zdCBjb250ZW50ID0gY29udGVudEVsLnZhbHVlLnRyaW0oKTtcclxuICAgIGlmICghY29udGVudCkge1xyXG4gICAgICBhbGVydCgn64K07Jqp7J20IOyXhuyKteuLiOuLpC4nKTtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHRpdGxlO1xyXG4gICAgd2hpbGUgKCF0aXRsZSkge1xyXG4gICAgICB0aXRsZSA9IHByb21wdCgn7YyM7J2866qF7J2EIOyeheugpe2VmOyEuOyalC4nLCB0aGlzLmRhdGEudGl0bGUucmVwbGFjZSgvJm5ic3A7L2csICcgJykpO1xyXG4gICAgICBpZiAoIXRpdGxlKSB7XHJcbiAgICAgICAgY29uc3QgY29uZmlybVJlc3VsdCA9IHdpbmRvdy5jb25maXJtKCfsoJzrqqnsnYAg7ZWE7IiY7J6F64uI64ukLicpO1xyXG4gICAgICAgIGlmICghY29uZmlybVJlc3VsdCkgcmV0dXJuIG51bGw7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBpZDogdGhpcy5pZCxcclxuICAgICAgdGl0bGU6IHRpdGxlLnRyaW0oKS5yZXBsYWNlKC8gL2csICcmbmJzcDsnKSxcclxuICAgICAgY29udGVudDogY29udGVudC5yZXBsYWNlKC8gL2csICcmbmJzcDsnKSxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBnZXQgaWQoKSB7XHJcbiAgICByZXR1cm4gTnVtYmVyKHRoaXMuZ2V0QXR0cmlidXRlKCdkYXRhLWlkJykpO1xyXG4gIH1cclxuXHJcbiAgc2V0IHRpdGxlKHRpdGxlKSB7XHJcbiAgICB0aGlzLnF1ZXJ5U2VsZWN0b3IoJ215LW5vdGVwYWQtaGVhZGVyJykuc2V0QXR0cmlidXRlKCd0aXRsZScsIHRpdGxlKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHJvdXRlciBmcm9tICcuLi8uLi8uLi9jb3JlL1JvdXRlcic7XHJcblxyXG5jb25zdCBkaXNhYmxlID0gdHJ1ZTtcclxuXHJcbmNvbnN0IGJ1dHRvbnMgPSBbXHJcbiAge1xyXG4gICAgaWQ6ICdmaWxlJyxcclxuICAgIHRpdGxlOiAn7YyM7J28JyxcclxuICAgIGtleTogJ0YnLFxyXG4gICAgc2xvdHM6IFtcclxuICAgICAgeyBpZDogMSwgdGV4dDogJ+yDiOuhnCDrp4zrk6TquLAoTiknLCBrZXk6IFsnQ3RybCcsICdOJ10sIG9uQ2xpY2s6IGhhbmRsZU5ld0NsaWNrIH0sXHJcbiAgICAgIHsgaWQ6IDIsIHRleHQ6ICfrgrQg7Lu07ZOo7YSw7JeQIOyggOyepShXKScsIGtleTogWydDdHJsJywgJ1NoaWZ0JywgJ04nXSwgb25DbGljazogaGFuZGxlTG9jYWxTYXZlQ2xpY2sgfSxcclxuICAgICAgeyBpZDogMywgdGV4dDogJ+yggOyepShTKScsIGtleTogWydDdHJsJywgJ1MnXSwgb25DbGljazogaGFuZGxlU2F2ZUNsaWNrIH0sXHJcbiAgICAgIHsgaWQ6IDQsIHRleHQ6ICfsgq3soJwoRCknLCBrZXk6IFsnQ3RybCcsICdTaGlmdCcsICdTJ10sIG9uQ2xpY2s6IGhhbmRsZURlbGV0ZUNsaWNrIH0sXHJcbiAgICAgIHsgaWQ6IDUsIHRleHQ6ICftjpjsnbTsp4Ag7ISk7KCVKFUpLi4uJywga2V5OiBbXSwgZGlzYWJsZSB9LFxyXG4gICAgICB7IGlkOiA2LCB0ZXh0OiAn7J247IeEKFApLi4uJywga2V5OiBbJ0N0cmwnLCAnUCddLCBkaXNhYmxlIH0sXHJcbiAgICAgIHsgaWQ6IDcsIHRleHQ6ICfrgZ3rgrTquLAoWCknLCBrZXk6IFtdLCBkaXNhYmxlIH0sXHJcbiAgICBdLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgaWQ6ICdlZGl0JyxcclxuICAgIHRpdGxlOiAn7Y647KeRJyxcclxuICAgIGtleTogJ0UnLFxyXG4gICAgc2xvdHM6IFtcclxuICAgICAgeyBpZDogOCwgdGV4dDogJ+yLpO2WiSDst6jshowoVSknLCBrZXk6IFsnQ3RybCcsICdaJ10sIGRpc2FibGUgfSxcclxuICAgICAgeyBpZDogOSwgdGV4dDogJ+yemOudvOuCtOq4sChUKScsIGtleTogWydDdHJsJywgJ1gnXSwgZGlzYWJsZSB9LFxyXG4gICAgICB7IGlkOiAxMCwgdGV4dDogJ+uzteyCrChDKScsIGtleTogWydDdHJsJywgJ0MnXSwgZGlzYWJsZSB9LFxyXG4gICAgICB7IGlkOiAxMSwgdGV4dDogJ+u2meyXrOuEo+q4sChQKScsIGtleTogWydDdHJsJywgJ1YnXSwgZGlzYWJsZSB9LFxyXG4gICAgICB7IGlkOiAxMiwgdGV4dDogJ+yCreygnChEKScsIGtleTogWydEZWwnXSwgZGlzYWJsZSB9LFxyXG4gICAgICB7IGlkOiAxMywgdGV4dDogJ0JpbmfsnLzroZwg6rKA7IOJKFMpLi4uJywga2V5OiBbJ0N0cmwnLCAnRSddLCBkaXNhYmxlIH0sXHJcbiAgICAgIHsgaWQ6IDE0LCB0ZXh0OiAn7LC+6riwKEYpLi4uJywga2V5OiBbJ0N0cmwnLCAnRiddLCBkaXNhYmxlIH0sXHJcbiAgICAgIHsgaWQ6IDE1LCB0ZXh0OiAn64uk7J2MIOywvuq4sChOKScsIGtleTogWydGMyddLCBkaXNhYmxlIH0sXHJcbiAgICAgIHsgaWQ6IDE2LCB0ZXh0OiAn7J207KCEIOywvuq4sChWKScsIGtleTogWydTaGlmdCcsICdGMyddLCBkaXNhYmxlIH0sXHJcbiAgICAgIHsgaWQ6IDE3LCB0ZXh0OiAn67CU6r646riwKFIpLi4uJywga2V5OiBbJ0N0cmwnLCAnSCddLCBkaXNhYmxlIH0sXHJcbiAgICAgIHsgaWQ6IDE4LCB0ZXh0OiAn7J2064+ZKEcpLi4uJywga2V5OiBbJ0N0cmwnLCAnRyddLCBkaXNhYmxlIH0sXHJcbiAgICAgIHsgaWQ6IDE5LCB0ZXh0OiAn66qo65GQIOyEoO2DnShBKScsIGtleTogWydDdHJsJywgJ0EnXSwgZGlzYWJsZSB9LFxyXG4gICAgICB7IGlkOiAyMCwgdGV4dDogJ+yLnOqwhC/rgqDsp5woRCknLCBrZXk6IFsnRjUnXSwgZGlzYWJsZSB9LFxyXG4gICAgXSxcclxuICB9LFxyXG4gIHtcclxuICAgIGlkOiAnZm9ybWF0JyxcclxuICAgIHRpdGxlOiAn7ISc7IudJyxcclxuICAgIGtleTogJ08nLFxyXG4gICAgc2xvdHM6IFtcclxuICAgICAgeyBpZDogMjEsIHRleHQ6ICfsnpDrj5kg7KSEIOuwlOq/iChXKScsIGtleTogW10sIGRpc2FibGUgfSxcclxuICAgICAgeyBpZDogMjIsIHRleHQ6ICfquIDqvLQoRikuLi4nLCBrZXk6IFtdLCBkaXNhYmxlIH0sXHJcbiAgICBdLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgaWQ6ICd2aWV3JyxcclxuICAgIHRpdGxlOiAn67O06riwJyxcclxuICAgIGtleTogJ1YnLFxyXG4gICAgc2xvdHM6IFtcclxuICAgICAgeyBpZDogMjMsIHRleHQ6ICftmZXrjIDtlZjquLAoWiknLCBrZXk6IFsnQ3RybCcsICcrJ10sIGRpc2FibGUgfSxcclxuICAgICAgeyBpZDogMjQsIHRleHQ6ICfstpXshoztlZjquLAoWCknLCBrZXk6IFsnQ3RybCcsICctJ10sIGRpc2FibGUgfSxcclxuICAgICAgeyBpZDogMjUsIHRleHQ6ICfsg4Htg5wg7ZGc7Iuc7KSEKFMpJywga2V5OiBbXSwgZGlzYWJsZSB9LFxyXG4gICAgXSxcclxuICB9LFxyXG4gIHtcclxuICAgIGlkOiAnaGVscCcsXHJcbiAgICB0aXRsZTogJ+uPhOybgOunkCcsXHJcbiAgICBrZXk6ICdIJyxcclxuICAgIHNsb3RzOiBbXHJcbiAgICAgIHsgaWQ6IDI2LCB0ZXh0OiAn64+E7JuA66eQIOuztOq4sChIKScsIGtleTogW10sIGRpc2FibGUgfSxcclxuICAgICAgeyBpZDogMjcsIHRleHQ6ICftlLzrk5zrsLEg67O064K06riwKEYpJywga2V5OiBbXSwgZGlzYWJsZSB9LFxyXG4gICAgICB7IGlkOiAyOCwgdGV4dDogJ+uplOuqqOyepSDsoJXrs7QoQSknLCBrZXk6IFtdLCBkaXNhYmxlIH0sXHJcbiAgICBdLFxyXG4gIH0sXHJcbl07XHJcblxyXG5jb25zdCBzbG90cyA9IGJ1dHRvbnMucmVkdWNlKChhY2MsIGN1cikgPT4ge1xyXG4gIHJldHVybiBbLi4uYWNjLCAuLi5jdXIuc2xvdHNdO1xyXG59LCBbXSk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBidXR0b25zO1xyXG5leHBvcnQgeyBzbG90cyB9O1xyXG5cclxuZnVuY3Rpb24gaGFuZGxlU2F2ZUNsaWNrKCkge1xyXG4gIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ3NhdmUnLCB7IGJ1YmJsZXM6IHRydWUgfSkpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVMb2NhbFNhdmVDbGljaygpIHtcclxuICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdsb2NhbFNhdmUnLCB7IGJ1YmJsZXM6IHRydWUgfSkpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVEZWxldGVDbGljaygpIHtcclxuICBjb25zdCBub3RlcGFkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbXktbm90ZXBhZCcpO1xyXG4gIGlmICghbm90ZXBhZC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnKSkgcmV0dXJuO1xyXG4gIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ2RlbGV0ZScsIHsgYnViYmxlczogdHJ1ZSB9KSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZU5ld0NsaWNrKCkge1xyXG4gIGNvbnN0IG5vdGVwYWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdteS1ub3RlcGFkJyk7XHJcbiAgaWYgKCFub3RlcGFkLmdldEF0dHJpYnV0ZSgnZGF0YS1pZCcpKSB7XHJcbiAgICBub3RlcGFkLnJlbmRlcigpO1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuICByb3V0ZXIubmF2aWdhdGVUbygnL25vdGVwYWQnKTtcclxufVxyXG4iLCJpbXBvcnQgeyBodG1sIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgV2ViQ29tcG9uZW50IGZyb20gJy4uLy4uLy4uL2NvcmUvV2ViQ29tcG9uZW50JztcclxuaW1wb3J0IGJ1dHRvbnMsIHsgc2xvdHMgfSBmcm9tICcuLi9jb25zdC9idXR0b25zJztcclxuaW1wb3J0IE5vdGVQYWRJY29uIGZyb20gJy4uLy4uLy4uLy4uL3B1YmxpYy9ub3RlcGFkLnBuZyc7XHJcbmltcG9ydCByb3V0ZXIgZnJvbSAnLi4vLi4vLi4vY29yZS9Sb3V0ZXInO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTm90ZVBhZEhlYWRlciBleHRlbmRzIFdlYkNvbXBvbmVudCB7XHJcbiAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XHJcbiAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xyXG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGFuZGxlQ2xpY2spO1xyXG4gIH1cclxuXHJcbiAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XHJcbiAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5oYW5kbGVDbGljayk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0IG9ic2VydmVkQXR0cmlidXRlcygpIHtcclxuICAgIHJldHVybiBbJ3RpdGxlJ107XHJcbiAgfVxyXG5cclxuICBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2sobmFtZSwgb2xkVmFsdWUsIG5ld1ZhbHVlKSB7XHJcbiAgICBpZiAobmFtZSA9PT0gJ3RpdGxlJyAmJiBvbGRWYWx1ZSkge1xyXG4gICAgICB0aGlzLnF1ZXJ5U2VsZWN0b3IoJyN0aXRsZScpLmlubmVyVGV4dCA9IG5ld1ZhbHVlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaW5qZWN0SFRNTCgpIHtcclxuICAgIHJldHVybiBodG1sYFxyXG4gICAgICA8aGVhZGVyPlxyXG4gICAgICAgIDxzcGFuPlxyXG4gICAgICAgICAgPGltZyBhbHQ9XCJub3RlcGFkX2ljb25cIiBzcmM9JHtOb3RlUGFkSWNvbn0gLz5cclxuICAgICAgICAgIDxzcGFuIGlkPVwidGl0bGVcIj4ke3RoaXMudGl0bGV9PC9zcGFuPiAtIFdpbmRvd3Mg66mU66qo7J6lXHJcbiAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJ2aWV3X2J1dHRvbnNcIj5cclxuICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJ2aWV3X2J1dHRvblwiIGlkPVwibWluaVwiPvCfl5U8L2J1dHRvbj5cclxuICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJ2aWV3X2J1dHRvblwiIGlkPVwiZnVsbFwiPvCfl5Y8L2J1dHRvbj5cclxuICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJ2aWV3X2J1dHRvblwiIGlkPVwiY2xvc2VcIj7ihak8L2J1dHRvbj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9oZWFkZXI+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJlZGl0X2J1dHRvbnNcIj5cclxuICAgICAgICAke2J1dHRvbnNcclxuICAgICAgICAgIC5tYXAoXHJcbiAgICAgICAgICAgIChidXR0b24pID0+IGh0bWxgXHJcbiAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImVkaXRfYnV0dG9uXCI+XHJcbiAgICAgICAgICAgICAgICAke2J1dHRvbi50aXRsZX0oPHU+JHtidXR0b24ua2V5fTwvdT4pXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicG9wdXBcIj5cclxuICAgICAgICAgICAgICAgICAgJHtidXR0b24uc2xvdHNcclxuICAgICAgICAgICAgICAgICAgICAubWFwKFxyXG4gICAgICAgICAgICAgICAgICAgICAgKHNsb3QpID0+IGh0bWxgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzdWJcIiBkYXRhLWlkPVwiJHtzbG90LmlkfVwiIGRhdGEtZGlzYWJsZT1cIiR7ISFzbG90LmRpc2FibGV9XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4ke3Nsb3QudGV4dH08L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAke3Nsb3Qua2V5Lmxlbmd0aCA+IDAgPyBgPGRpdj4ke3Nsb3Qua2V5LmpvaW4oJyArICcpfTwvZGl2PmAgOiAnJ31cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICBgXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgIC5qb2luKCcnKX1cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICBgXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgICAuam9pbignJyl9XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgYDtcclxuICB9XHJcblxyXG4gIGhhbmRsZUNsaWNrKGUpIHtcclxuICAgIGNvbnN0IHZpZXdCdXR0b24gPSBlLnRhcmdldC5jbG9zZXN0KCcudmlld19idXR0b24nKTtcclxuICAgIGNvbnN0IGVkaXRCdXR0b24gPSBlLnRhcmdldC5jbG9zZXN0KCcuZWRpdF9idXR0b24nKTtcclxuICAgIGNvbnN0IHN1YiA9IGUudGFyZ2V0LmNsb3Nlc3QoJy5zdWInKTtcclxuXHJcbiAgICBpZiAodmlld0J1dHRvbikge1xyXG4gICAgICB0aGlzLmNsaWNrVmlld0J1dHRvbih2aWV3QnV0dG9uKTtcclxuICAgIH0gZWxzZSBpZiAoZWRpdEJ1dHRvbikge1xyXG4gICAgICB0aGlzLmNsaWNrRWRpdEJ1dHRvbihlZGl0QnV0dG9uLCBzdWIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5jbG9zZVBvcHVwKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjbGlja1ZpZXdCdXR0b24odmlld0J1dHRvbikge1xyXG4gICAgc3dpdGNoICh2aWV3QnV0dG9uLmlkKSB7XHJcbiAgICAgIGNhc2UgJ2Z1bGwnOlxyXG4gICAgICAgIHRoaXMucGFyZW50RWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKCdmdWxsc2NyZWVuJyk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ21pbmknOlxyXG4gICAgICBjYXNlICdjbG9zZSc6XHJcbiAgICAgICAgcm91dGVyLmJhY2soKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNsaWNrRWRpdEJ1dHRvbihlZGl0QnV0dG9uLCBzdWIpIHtcclxuICAgIGlmIChzdWIpIHtcclxuICAgICAgY29uc3Qgc2xvdElkID0gTnVtYmVyKHN1Yi5kYXRhc2V0LmlkKTtcclxuICAgICAgY29uc3QgeyBvbkNsaWNrIH0gPSBzbG90cy5maW5kKChzbG90KSA9PiBzbG90LmlkID09PSBzbG90SWQpIHx8IHt9O1xyXG4gICAgICBpZiAob25DbGljaykge1xyXG4gICAgICAgIG9uQ2xpY2suY2FsbCh0aGlzKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy50b2dnbGVQb3B1cChlZGl0QnV0dG9uKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHRvZ2dsZVBvcHVwKGVkaXRCdXR0b24pIHtcclxuICAgIGNvbnN0IHBvcHVwID0gZWRpdEJ1dHRvbi5xdWVyeVNlbGVjdG9yKCcucG9wdXAnKTtcclxuICAgIGlmIChwb3B1cC5jbGFzc0xpc3QuY29udGFpbnMoJ3Nob3cnKSkge1xyXG4gICAgICBwb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmNsb3NlUG9wdXAoKTtcclxuICAgICAgcG9wdXAuY2xhc3NMaXN0LmFkZCgnc2hvdycpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY2xvc2VQb3B1cCgpIHtcclxuICAgIGNvbnN0IHBvcHVwID0gdGhpcy5xdWVyeVNlbGVjdG9yKCcucG9wdXAuc2hvdycpO1xyXG4gICAgcG9wdXA/LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcclxuICB9XHJcblxyXG4gIGdldCB0aXRsZSgpIHtcclxuICAgIHJldHVybiB0aGlzLmdldEF0dHJpYnV0ZSgndGl0bGUnKTtcclxuICB9XHJcbn1cclxuIiwiY29uc3QgQkxPQ0tTID0ge1xuICBJOiBbXG4gICAgWzAsIDAsIDAsIDBdLFxuICAgIFsxLCAxLCAxLCAxXSxcbiAgICBbMCwgMCwgMCwgMF0sXG4gICAgWzAsIDAsIDAsIDBdLFxuICBdLFxuICBKOiBbXG4gICAgWzIsIDAsIDBdLFxuICAgIFsyLCAyLCAyXSxcbiAgICBbMCwgMCwgMF0sXG4gIF0sXG4gIEw6IFtcbiAgICBbMCwgMCwgM10sXG4gICAgWzMsIDMsIDNdLFxuICAgIFswLCAwLCAwXSxcbiAgXSxcbiAgTzogW1xuICAgIFs0LCA0XSxcbiAgICBbNCwgNF0sXG4gIF0sXG4gIFM6IFtcbiAgICBbMCwgNSwgNV0sXG4gICAgWzUsIDUsIDBdLFxuICAgIFswLCAwLCAwXSxcbiAgXSxcbiAgVDogW1xuICAgIFswLCA2LCAwXSxcbiAgICBbNiwgNiwgNl0sXG4gICAgWzAsIDAsIDBdLFxuICBdLFxuICBaOiBbXG4gICAgWzcsIDcsIDBdLFxuICAgIFswLCA3LCA3XSxcbiAgICBbMCwgMCwgMF0sXG4gIF0sXG59O1xuXG5jb25zdCBCTE9DS19DTEFTU0VTID0ge1xuICAwOiAnZW1wdHknLFxuICAxOiAnSScsXG4gIDI6ICdKJyxcbiAgMzogJ0wnLFxuICA0OiAnTycsXG4gIDU6ICdTJyxcbiAgNjogJ1QnLFxuICA3OiAnWicsXG4gIDEwOiAnSSBmcmVlemUnLFxuICAyMDogJ0ogZnJlZXplJyxcbiAgMzA6ICdMIGZyZWV6ZScsXG4gIDQwOiAnTyBmcmVlemUnLFxuICA1MDogJ1MgZnJlZXplJyxcbiAgNjA6ICdUIGZyZWV6ZScsXG4gIDcwOiAnWiBmcmVlemUnLFxufTtcblxuY29uc3QgU0NPUkVTID0ge1xuICAxOiAxMDAsXG4gIDI6IDMwMCxcbiAgMzogNTAwLFxuICA0OiA4MDAsXG59O1xuXG5jb25zdCBCT0FSRF9XSURUSCA9IDEwO1xuY29uc3QgQk9BUkRfSEVJR0hUID0gMjA7XG5cbmNvbnN0IEtFWV9BQ1RJT05TID0gbmV3IE1hcChbXG4gIFtcbiAgICAnMScsXG4gICAgbmV3IE1hcChbXG4gICAgICBbJ3MnLCAnbW92ZURvd24nXSxcbiAgICAgIFsnYScsICdtb3ZlTGVmdCddLFxuICAgICAgWydkJywgJ21vdmVSaWdodCddLFxuICAgICAgWyd3JywgJ3JvdGF0ZSddLFxuICAgICAgWydTJywgJ21vdmVEb3duJ10sXG4gICAgICBbJ0EnLCAnbW92ZUxlZnQnXSxcbiAgICAgIFsnRCcsICdtb3ZlUmlnaHQnXSxcbiAgICAgIFsnVycsICdyb3RhdGUnXSxcbiAgICBdKSxcbiAgXSxcbiAgW1xuICAgICcyJyxcbiAgICBuZXcgTWFwKFtcbiAgICAgIFsnQXJyb3dEb3duJywgJ21vdmVEb3duJ10sXG4gICAgICBbJ0Fycm93TGVmdCcsICdtb3ZlTGVmdCddLFxuICAgICAgWydBcnJvd1JpZ2h0JywgJ21vdmVSaWdodCddLFxuICAgICAgWydBcnJvd1VwJywgJ3JvdGF0ZSddLFxuICAgIF0pLFxuICBdLFxuXSk7XG5cbmV4cG9ydCB7IEJMT0NLUywgQk9BUkRfSEVJR0hULCBCT0FSRF9XSURUSCwgQkxPQ0tfQ0xBU1NFUywgU0NPUkVTLCBLRVlfQUNUSU9OUyB9O1xuIiwiaW1wb3J0IHsgc2h1ZmZsZSB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcblxuY29uc3QgY3JlYXRlU2h1ZmZsZUJsb2NrUXVldWUgPSAoYmxvY2tzKSA9PiB7XG4gIHJldHVybiBzaHVmZmxlKE9iamVjdC52YWx1ZXMoYmxvY2tzKSk7XG59O1xuXG5jb25zdCBnZXRJbml0aWFsQmxvY2tQb3MgPSAod2lkdGgsIGJsb2NrKSA9PiB7XG4gIGNvbnN0IGZpcnN0Tm9uRW1wdHlSb3dJbmRleCA9IGJsb2NrLmZpbmRJbmRleCgocm93KSA9PiByb3cuc29tZSgoY2VsbCkgPT4gY2VsbCAhPT0gMCkpO1xuXG4gIHJldHVybiB7XG4gICAgeDogTWF0aC5mbG9vcigod2lkdGggLSBibG9ja1swXS5sZW5ndGgpIC8gMiksXG4gICAgeTogLWZpcnN0Tm9uRW1wdHlSb3dJbmRleCxcbiAgfTtcbn07XG5cbmNvbnN0IGdldEluaXRpYWxEYXRhID0gKHdpZHRoLCBoZWlnaHQpID0+IHtcbiAgcmV0dXJuIEFycmF5LmZyb20oQXJyYXkoaGVpZ2h0KSwgKCkgPT4gQXJyYXkod2lkdGgpLmZpbGwoMCkpO1xufTtcblxuZXhwb3J0IHsgY3JlYXRlU2h1ZmZsZUJsb2NrUXVldWUsIGdldEluaXRpYWxCbG9ja1BvcywgZ2V0SW5pdGlhbERhdGEgfTtcbiIsImltcG9ydCB7IEJMT0NLUywgQk9BUkRfSEVJR0hULCBCT0FSRF9XSURUSCB9IGZyb20gJy4uL2NvbnN0JztcbmltcG9ydCB7IGNyZWF0ZVNodWZmbGVCbG9ja1F1ZXVlLCBnZXRJbml0aWFsQmxvY2tQb3MgfSBmcm9tICcuLi91dGlscyc7XG5cbmV4cG9ydCBjb25zdCBGUkVFWkUgPSAnZnJlZXplJztcbmV4cG9ydCBjb25zdCBDUkVBVEVfTkVXX0JMT0NLID0gJ2NyZWF0ZU5ld0Jsb2NrJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGV0cm9taW5vIHtcbiAgc3RhdGljIG9ic2VydmVycyA9IHsgW0NSRUFURV9ORVdfQkxPQ0tdOiBbXSwgW0ZSRUVaRV06IFtdIH07XG5cbiAgY29uc3RydWN0b3IoJHBsYXlncm91bmQsIGNyZWF0ZUJsb2NrID0gdHJ1ZSkge1xuICAgIHRoaXMuJHBsYXlncm91bmQgPSAkcGxheWdyb3VuZDtcbiAgICB0aGlzLiRib2FyZCA9ICRwbGF5Z3JvdW5kLnF1ZXJ5U2VsZWN0b3IoJ215LXRldHJpcy1ib2FyZCcpO1xuICAgIHRoaXMuYmxvY2tRdWV1ZSA9IGNyZWF0ZVNodWZmbGVCbG9ja1F1ZXVlKEJMT0NLUyk7XG4gICAgdGhpcy5vYnNlcnZlcnMgPSB7IFtDUkVBVEVfTkVXX0JMT0NLXTogW10sIFtGUkVFWkVdOiBbXSB9O1xuICAgIGlmIChjcmVhdGVCbG9jaykge1xuICAgICAgdGhpcy5jcmVhdGVOZXdCbG9jaygpO1xuICAgIH1cbiAgfVxuXG4gIHN1YnNjcmliZShldmVudCwgb2JzZXJ2ZXIpIHtcbiAgICB0aGlzLm9ic2VydmVyc1tldmVudF0ucHVzaChvYnNlcnZlcik7XG4gIH1cblxuICBub3RpZnkoZXZlbnQpIHtcbiAgICB0aGlzLm9ic2VydmVyc1tldmVudF0uZm9yRWFjaCgob2JzZXJ2ZXIpID0+IG9ic2VydmVyKCkpO1xuICB9XG5cbiAgdW5zdWJzY3JpYmUoZXZlbnQsIG9ic2VydmVyKSB7XG4gICAgdGhpcy5vYnNlcnZlcnNbZXZlbnRdID0gdGhpcy5vYnNlcnZlcnNbZXZlbnRdLmZpbHRlcigobykgPT4gbyAhPT0gb2JzZXJ2ZXIpO1xuICB9XG5cbiAgZ2V0TmV4dFRldHJvbWlub3MoKSB7XG4gICAgcmV0dXJuIHRoaXMuYmxvY2tRdWV1ZS5zbGljZSgwLCA1KTtcbiAgfVxuXG4gIGNyZWF0ZU5ld0Jsb2NrKCkge1xuICAgIHRoaXMuYmxvY2sgPSB0aGlzLmJsb2NrUXVldWUuc2hpZnQoKTtcblxuICAgIGlmICh0aGlzLmJsb2NrUXVldWUubGVuZ3RoIDwgNSkge1xuICAgICAgdGhpcy5ibG9ja1F1ZXVlID0gdGhpcy5ibG9ja1F1ZXVlLmNvbmNhdChjcmVhdGVTaHVmZmxlQmxvY2tRdWV1ZShCTE9DS1MpKTtcbiAgICB9XG5cbiAgICBjb25zdCBpbml0aWFsQmxvY2tQb3MgPSBnZXRJbml0aWFsQmxvY2tQb3MoQk9BUkRfV0lEVEgsIHRoaXMuYmxvY2spO1xuICAgIHRoaXMueCA9IGluaXRpYWxCbG9ja1Bvcy54O1xuICAgIHRoaXMueSA9IGluaXRpYWxCbG9ja1Bvcy55O1xuXG4gICAgdGhpcy5ub3RpZnkoQ1JFQVRFX05FV19CTE9DSyk7XG4gIH1cblxuICByb3RhdGUoKSB7XG4gICAgY29uc3Qgcm90YXRlZEJsb2NrID0gdGhpcy5ibG9ja1swXS5tYXAoKF8sIGkpID0+IHRoaXMuYmxvY2subWFwKChyb3cpID0+IHJvd1tpXSkucmV2ZXJzZSgpKTtcbiAgICBjb25zdCByb3RhdGVkV2lkdGggPSByb3RhdGVkQmxvY2tbMF0ubGVuZ3RoO1xuICAgIGNvbnN0IHJvdGF0ZWRIZWlnaHQgPSByb3RhdGVkQmxvY2subGVuZ3RoO1xuICAgIGxldCBuZXdYID0gdGhpcy54O1xuICAgIGxldCBuZXdZID0gdGhpcy55O1xuXG4gICAgaWYgKG5ld1ggKyByb3RhdGVkV2lkdGggPiBCT0FSRF9XSURUSCkge1xuICAgICAgbmV3WCA9IEJPQVJEX1dJRFRIIC0gcm90YXRlZFdpZHRoO1xuICAgIH1cbiAgICBpZiAobmV3WCA8IDApIHtcbiAgICAgIG5ld1ggPSAwO1xuICAgIH1cbiAgICBpZiAobmV3WSArIHJvdGF0ZWRIZWlnaHQgPiBCT0FSRF9IRUlHSFQpIHtcbiAgICAgIG5ld1kgPSBCT0FSRF9IRUlHSFQgLSByb3RhdGVkSGVpZ2h0O1xuICAgIH1cbiAgICBpZiAobmV3WSA8IDApIHtcbiAgICAgIG5ld1kgPSAwO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmNhbk1vdmUobmV3WCwgbmV3WSwgcm90YXRlZEJsb2NrKSkge1xuICAgICAgdGhpcy5ibG9jayA9IHJvdGF0ZWRCbG9jaztcbiAgICAgIHRoaXMueCA9IG5ld1g7XG4gICAgICB0aGlzLnkgPSBuZXdZO1xuICAgIH1cbiAgfVxuXG4gIG1vdmVMZWZ0KCkge1xuICAgIGlmICh0aGlzLmNhbk1vdmUodGhpcy54IC0gMSwgdGhpcy55LCB0aGlzLmJsb2NrKSkge1xuICAgICAgdGhpcy54IC09IDE7XG4gICAgfVxuICB9XG5cbiAgbW92ZVJpZ2h0KCkge1xuICAgIGlmICh0aGlzLmNhbk1vdmUodGhpcy54ICsgMSwgdGhpcy55LCB0aGlzLmJsb2NrKSkge1xuICAgICAgdGhpcy54ICs9IDE7XG4gICAgfVxuICB9XG5cbiAgbW92ZURvd24oKSB7XG4gICAgaWYgKHRoaXMuY2FuTW92ZSh0aGlzLngsIHRoaXMueSArIDEsIHRoaXMuYmxvY2spKSB7XG4gICAgICB0aGlzLnkgKz0gMTtcbiAgICB9IGVsc2UgaWYgKHRoaXMueSA9PT0gMCkge1xuICAgICAgdGhpcy5mcmVlemUoKTtcbiAgICAgIHRoaXMuJGJvYXJkLnN0b3BHYW1lKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZnJlZXplKCk7XG4gICAgICB0aGlzLmNyZWF0ZU5ld0Jsb2NrKCk7XG4gICAgfVxuICB9XG5cbiAgZnJlZXplKCkge1xuICAgIGNvbnN0IHsgYmxvY2ssIHgsIHkgfSA9IHRoaXM7XG4gICAgYmxvY2suZm9yRWFjaCgocm93LCBpKSA9PiB7XG4gICAgICByb3cuZm9yRWFjaCgoY29sLCBqKSA9PiB7XG4gICAgICAgIGlmIChjb2wgIT09IDApIHtcbiAgICAgICAgICB0aGlzLiRib2FyZC5kYXRhW3kgKyBpXVt4ICsgal0gPSBjb2wgKiAxMDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLm5vdGlmeShGUkVFWkUpO1xuICB9XG5cbiAgY2FuTW92ZSh4LCB5LCBibG9jaykge1xuICAgIGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IGJsb2NrLmxlbmd0aDsgcm93ICs9IDEpIHtcbiAgICAgIGZvciAobGV0IGNvbCA9IDA7IGNvbCA8IGJsb2NrW3Jvd10ubGVuZ3RoOyBjb2wgKz0gMSkge1xuICAgICAgICBpZiAoYmxvY2tbcm93XVtjb2xdICE9PSAwKSB7XG4gICAgICAgICAgY29uc3QgbmV4dFggPSB4ICsgY29sO1xuICAgICAgICAgIGNvbnN0IG5leHRZID0geSArIHJvdztcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBuZXh0WCA8IDAgfHxcbiAgICAgICAgICAgIG5leHRYID49IEJPQVJEX1dJRFRIIHx8XG4gICAgICAgICAgICBuZXh0WSA8IDAgfHxcbiAgICAgICAgICAgIG5leHRZID49IEJPQVJEX0hFSUdIVCB8fFxuICAgICAgICAgICAgdGhpcy4kYm9hcmQuZGF0YVtuZXh0WV1bbmV4dFhdID49IDEwXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBjbG9uZSgpIHtcbiAgICBjb25zdCBjbG9uZWQgPSBuZXcgVGV0cm9taW5vKHRoaXMuJHBsYXlncm91bmQsIGZhbHNlKTtcbiAgICBjbG9uZWQuYmxvY2sgPSB0aGlzLmJsb2NrLm1hcCgocm93KSA9PiBbLi4ucm93XSk7XG4gICAgY2xvbmVkLnggPSB0aGlzLng7XG4gICAgY2xvbmVkLnkgPSB0aGlzLnk7XG4gICAgcmV0dXJuIGNsb25lZDtcbiAgfVxufVxuIiwiaW1wb3J0IFdlYkNvbXBvbmVudCBmcm9tICcuLi8uLi8uLi9jb3JlL1dlYkNvbXBvbmVudCc7XG5pbXBvcnQgeyBCTE9DS19DTEFTU0VTLCBCT0FSRF9IRUlHSFQsIEJPQVJEX1dJRFRILCBLRVlfQUNUSU9OUywgU0NPUkVTIH0gZnJvbSAnLi4vY29uc3QnO1xuaW1wb3J0IHsgaHRtbCB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcbmltcG9ydCB7IENSRUFURV9ORVdfQkxPQ0ssIEZSRUVaRSB9IGZyb20gJy4uL2NsYXNzL1RldHJvbWlubyc7XG5pbXBvcnQgeyBnZXRJbml0aWFsRGF0YSB9IGZyb20gJy4uL3V0aWxzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGV0cmlzQm9hcmQgZXh0ZW5kcyBXZWJDb21wb25lbnQge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuZGF0YSA9IGdldEluaXRpYWxEYXRhKEJPQVJEX1dJRFRILCBCT0FSRF9IRUlHSFQpO1xuICAgIHRoaXMuJHBsYXlncm91bmQgPSBudWxsO1xuICAgIHRoaXMuc3RhcnQgPSBmYWxzZTtcbiAgICB0aGlzLnRldHJvbWlubyA9IG51bGw7XG4gICAgdGhpcy5sYXN0VGltZSA9IG51bGw7XG4gICAgdGhpcy5kcm9wSW50ZXJ2YWwgPSAxMDAwO1xuICAgIHRoaXMudGV0cm9taW5vQ291bnRlciA9IDA7XG4gICAgdGhpcy5hbmltYXRpb25JZCA9IG51bGw7XG4gICAgdGhpcy5rZXlTdGF0ZSA9IG5ldyBTZXQoKTtcbiAgICB0aGlzLmJpbmRNZXRob2RzKFxuICAgICAgJ3N0YXJ0R2FtZScsXG4gICAgICAnZHJvcEJsb2NrJyxcbiAgICAgICdpbmNyZWFzZURyb3BTcGVlZCcsXG4gICAgICAncmVtb3ZlRnVsbFJvd3MnLFxuICAgICAgJ2tleXVwSGFuZGxlcicsXG4gICAgICAna2V5ZG93bkhhbmRsZXInLFxuICAgICAgJ2hhbmRsZUtleXMnLFxuICAgICAgJ3JlbmRlcidcbiAgICApO1xuICB9XG5cbiAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgfVxuXG4gIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHRoaXMudGV0cm9taW5vLnVuc3Vic2NyaWJlKENSRUFURV9ORVdfQkxPQ0ssIHRoaXMuaW5jcmVhc2VEcm9wU3BlZWQpO1xuICAgIHRoaXMudGV0cm9taW5vLnVuc3Vic2NyaWJlKEZSRUVaRSwgdGhpcy5yZW1vdmVGdWxsUm93cyk7XG4gIH1cblxuICBpbmplY3RIVE1MKCkge1xuICAgIHJldHVybiBodG1sYFxuICAgICAgJHt0aGlzLmRhdGFcbiAgICAgICAgLm1hcChcbiAgICAgICAgICAocm93KSA9PiBodG1sYFxuICAgICAgICAgICAgPHVsPlxuICAgICAgICAgICAgICAke3Jvdy5tYXAoKGNlbGwpID0+IGh0bWxgPGxpIGNsYXNzPVwiY2VsbC0ke0JMT0NLX0NMQVNTRVNbY2VsbF19XCI+PC9saT5gKS5qb2luKCcnKX1cbiAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgYFxuICAgICAgICApXG4gICAgICAgIC5qb2luKCcnKX1cbiAgICBgO1xuICB9XG5cbiAgaW5jcmVhc2VEcm9wU3BlZWQoKSB7XG4gICAgaWYgKHRoaXMudGV0cm9taW5vQ291bnRlciA9PT0gMTApIHtcbiAgICAgIHRoaXMudGV0cm9taW5vQ291bnRlciA9IDA7XG4gICAgICB0aGlzLmRyb3BJbnRlcnZhbCAqPSAwLjk7XG4gICAgfVxuICAgIHRoaXMudGV0cm9taW5vQ291bnRlciArPSAxO1xuICB9XG5cbiAgc3RhcnRHYW1lKCRwbGF5Z3JvdW5kLCB0ZXRyb21pbm8pIHtcbiAgICBpZiAodGhpcy5zdGFydCkgcmV0dXJuO1xuICAgIHRoaXMuZGF0YSA9IGdldEluaXRpYWxEYXRhKEJPQVJEX1dJRFRILCBCT0FSRF9IRUlHSFQpO1xuICAgIHRoaXMudGV0cm9taW5vID0gdGV0cm9taW5vO1xuICAgIHRoaXMudGV0cm9taW5vLnN1YnNjcmliZShDUkVBVEVfTkVXX0JMT0NLLCB0aGlzLmluY3JlYXNlRHJvcFNwZWVkKTtcbiAgICB0aGlzLnRldHJvbWluby5zdWJzY3JpYmUoRlJFRVpFLCB0aGlzLnJlbW92ZUZ1bGxSb3dzKTtcbiAgICB0aGlzLnN0YXJ0ID0gdHJ1ZTtcbiAgICB0aGlzLiRwbGF5Z3JvdW5kID0gJHBsYXlncm91bmQ7XG4gICAgdGhpcy51cGRhdGVCb2FyZCgpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLmtleWRvd25IYW5kbGVyKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMua2V5dXBIYW5kbGVyKTtcbiAgICB0aGlzLmxhc3RUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuZHJvcEJsb2NrKTtcbiAgfVxuXG4gIHN0b3BHYW1lKCkge1xuICAgIHRoaXMuc3RhcnQgPSBmYWxzZTtcbiAgICB0aGlzLnRldHJvbWlub0NvdW50ZXIgPSAwO1xuICAgIHRoaXMuZHJvcEludGVydmFsID0gMTAwMDtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5rZXlkb3duSGFuZGxlcik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLmtleXVwSGFuZGxlcik7XG4gIH1cblxuICBkcm9wQmxvY2sodGltZXN0YW1wKSB7XG4gICAgY29uc3QgZGVsdGFUaW1lID0gdGltZXN0YW1wIC0gdGhpcy5sYXN0VGltZTtcblxuICAgIGlmIChkZWx0YVRpbWUgPiB0aGlzLmRyb3BJbnRlcnZhbCkge1xuICAgICAgY29uc3QgcHJldlRldHJvbWlubyA9IHRoaXMudGV0cm9taW5vLmNsb25lKCk7XG4gICAgICB0aGlzLnRldHJvbWluby5tb3ZlRG93bigpO1xuICAgICAgdGhpcy51cGRhdGVCb2FyZChwcmV2VGV0cm9taW5vKTtcbiAgICAgIHRoaXMubGFzdFRpbWUgPSB0aW1lc3RhbXA7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc3RhcnQpIHtcbiAgICAgIHRoaXMuYW5pbWF0aW9uSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5kcm9wQmxvY2spO1xuICAgIH0gZWxzZSB7XG4gICAgICBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLmFuaW1hdGlvbklkKTtcbiAgICB9XG4gIH1cblxuICBrZXlkb3duSGFuZGxlcihlKSB7XG4gICAgdGhpcy5rZXlTdGF0ZS5hZGQoZS5rZXkpO1xuICAgIHRoaXMuaGFuZGxlS2V5cygpO1xuICB9XG5cbiAga2V5dXBIYW5kbGVyKGUpIHtcbiAgICB0aGlzLmtleVN0YXRlLmRlbGV0ZShlLmtleSk7XG4gIH1cblxuICBoYW5kbGVLZXlzKCkge1xuICAgIGNvbnN0IHByZXZUZXRyb21pbm8gPSB0aGlzLnRldHJvbWluby5jbG9uZSgpO1xuICAgIGNvbnN0IGtleXMgPSBLRVlfQUNUSU9OUy5nZXQodGhpcy4kcGxheWdyb3VuZC5pZCk7XG5cbiAgICBrZXlzLmZvckVhY2goKGtleSwgdmFsdWUpID0+IHtcbiAgICAgIGlmICh0aGlzLmtleVN0YXRlLmhhcyh2YWx1ZSkpIHtcbiAgICAgICAgdGhpcy50ZXRyb21pbm9ba2V5XSgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHRoaXMudXBkYXRlQm9hcmQocHJldlRldHJvbWlubykpO1xuICB9XG5cbiAgdXBkYXRlQm9hcmQocHJldlRldHJvbWlubyA9IG51bGwpIHtcbiAgICBpZiAocHJldlRldHJvbWlubykge1xuICAgICAgdGhpcy5yZW1vdmVPbGRCbG9jayhwcmV2VGV0cm9taW5vKTtcbiAgICB9XG5cbiAgICB0aGlzLnB1dE5ld0Jsb2NrKHRoaXMuZGF0YSk7XG4gICAgdGhpcy5yZW5kZXIoKTtcbiAgfVxuXG4gIHJlbW92ZU9sZEJsb2NrKHRldHJvbWlubykge1xuICAgIGNvbnN0IHsgYmxvY2ssIHgsIHkgfSA9IHRldHJvbWlubztcblxuICAgIGJsb2NrLmZvckVhY2goKHJvdywgaSkgPT4ge1xuICAgICAgcm93LmZvckVhY2goKGNvbCwgaikgPT4ge1xuICAgICAgICBpZiAodGhpcy5kYXRhW3kgKyBpXT8uW3ggKyBqXSA9PT0gY29sKSB7XG4gICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICAgICAgdGhpcy5kYXRhW3kgKyBpXVt4ICsgal0gPSAwO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHB1dE5ld0Jsb2NrKCkge1xuICAgIGNvbnN0IHsgeCwgeSwgYmxvY2sgfSA9IHRoaXMudGV0cm9taW5vO1xuXG4gICAgYmxvY2suZm9yRWFjaCgocm93LCBpKSA9PiB7XG4gICAgICByb3cuZm9yRWFjaCgoY29sLCBqKSA9PiB7XG4gICAgICAgIGlmIChjb2wgIT09IDApIHtcbiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICB0aGlzLmRhdGFbeSArIGldW3ggKyBqXSA9IGNvbDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICByZW1vdmVGdWxsUm93cygpIHtcbiAgICBjb25zb2xlLmxvZygncmVtb3ZlRnVsbFJvd3MnKTtcbiAgICBsZXQgcmVzdWx0ID0gMDtcbiAgICB0aGlzLmRhdGEuZm9yRWFjaCgocm93LCBpKSA9PiB7XG4gICAgICBpZiAocm93LmV2ZXJ5KChjZWxsKSA9PiBjZWxsID49IDEwKSkge1xuICAgICAgICByZXN1bHQgKz0gMTtcbiAgICAgICAgdGhpcy5kYXRhLnNwbGljZShpLCAxKTtcbiAgICAgICAgdGhpcy5kYXRhLnVuc2hpZnQoQXJyYXkoQk9BUkRfV0lEVEgpLmZpbGwoMCkpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKHJlc3VsdCA+IDApIHtcbiAgICAgIHRoaXMuJHBsYXlncm91bmQuc2NvcmVVcChTQ09SRVNbcmVzdWx0XSk7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgeyBodG1sIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xuaW1wb3J0IHsgQkxPQ0tfQ0xBU1NFUyB9IGZyb20gJy4uL2NvbnN0JztcbmltcG9ydCBXZWJDb21wb25lbnQgZnJvbSAnLi4vLi4vLi4vY29yZS9XZWJDb21wb25lbnQnO1xuaW1wb3J0IHsgQ1JFQVRFX05FV19CTE9DSyB9IGZyb20gJy4uL2NsYXNzL1RldHJvbWlubyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRldHJpc1ByZXZpZXcgZXh0ZW5kcyBXZWJDb21wb25lbnQge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuJHBsYXlncm91bmQgPSBudWxsO1xuICAgIHRoaXMudGV0cm9taW5vID0gbnVsbDtcbiAgfVxuXG4gIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gIH1cblxuICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICB0aGlzLnRldHJvbWluby51bnN1YnNjcmliZShDUkVBVEVfTkVXX0JMT0NLLCB0aGlzLnJlbmRlcik7XG4gIH1cblxuICBpbmplY3RIVE1MKCkge1xuICAgIHJldHVybiBodG1sYFxuICAgICAgJHt0aGlzLnRldHJvbWlub1xuICAgICAgICA/LmdldE5leHRUZXRyb21pbm9zKClcbiAgICAgICAgLm1hcChcbiAgICAgICAgICAodGV0cm9taW5vKSA9PiBodG1sYFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRldHJvbWluby1wcmV2aWV3XCI+XG4gICAgICAgICAgICAgICR7dGV0cm9taW5vXG4gICAgICAgICAgICAgICAgLm1hcChcbiAgICAgICAgICAgICAgICAgIChyb3cpID0+IGh0bWxgXG4gICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzcz1cInRldHJvbWluby1wcmV2aWV3LXJvd1wiPlxuICAgICAgICAgICAgICAgICAgICAgICR7cm93Lm1hcCgoY2VsbCkgPT4gaHRtbGAgPGxpIGNsYXNzPVwiY2VsbC0ke0JMT0NLX0NMQVNTRVNbY2VsbF19XCI+PC9saT4gYCkuam9pbignJyl9XG4gICAgICAgICAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgICAgICAgICBgXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIC5qb2luKCcnKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIGBcbiAgICAgICAgKVxuICAgICAgICAuam9pbignJykgfHwgJyd9XG4gICAgYDtcbiAgfVxuXG4gIHN0YXJ0R2FtZSgkcGxheWdyb3VuZCwgdGV0cm9taW5vKSB7XG4gICAgdGhpcy4kcGxheWdyb3VuZCA9ICRwbGF5Z3JvdW5kO1xuICAgIHRoaXMudGV0cm9taW5vID0gdGV0cm9taW5vO1xuICAgIHRoaXMudGV0cm9taW5vLnN1YnNjcmliZShDUkVBVEVfTkVXX0JMT0NLLCB0aGlzLnJlbmRlcik7XG4gICAgdGhpcy5yZW5kZXIoKTtcbiAgfVxufVxuIiwiaW1wb3J0IFdlYkNvbXBvbmVudCBmcm9tICcuLi8uLi8uLi9jb3JlL1dlYkNvbXBvbmVudCc7XG5pbXBvcnQgeyBodG1sIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xuaW1wb3J0IFRldHJvbWlubyBmcm9tICcuLi9jbGFzcy9UZXRyb21pbm8nO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUZXRyaXNQbGF5Z3JvdW5kIGV4dGVuZHMgV2ViQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLnNjb3JlID0gMDtcbiAgfVxuXG4gIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gIH1cblxuICBpbmplY3RIVE1MKCkge1xuICAgIHJldHVybiBodG1sYFxuICAgICAgPGRpdiBjbGFzcz1cImNvbnRhaW5lclwiPlxuICAgICAgICA8bXktdGV0cmlzLWJvYXJkIGNsYXNzPVwiYm9hcmRcIj48L215LXRldHJpcy1ib2FyZD5cbiAgICAgICAgPG15LXRldHJpcy1wcmV2aWV3IGNsYXNzPVwidGV0cm9taW5vLXByZXZpZXdzXCI+PC9teS10ZXRyaXMtcHJldmlldz5cbiAgICAgIDwvZGl2PlxuICAgICAgPHNwYW4gY2xhc3M9XCJzY29yZVwiPiR7dGhpcy5zY29yZX08L3NwYW4+XG4gICAgYDtcbiAgfVxuXG4gIHN0YXJ0R2FtZSgpIHtcbiAgICB0aGlzLnRldHJvbWlubyA9IG5ldyBUZXRyb21pbm8odGhpcyk7XG4gICAgdGhpcy5xdWVyeVNlbGVjdG9yKCdteS10ZXRyaXMtYm9hcmQnKS5zdGFydEdhbWUodGhpcywgdGhpcy50ZXRyb21pbm8pO1xuICAgIHRoaXMucXVlcnlTZWxlY3RvcignbXktdGV0cmlzLXByZXZpZXcnKS5zdGFydEdhbWUodGhpcywgdGhpcy50ZXRyb21pbm8pO1xuICB9XG5cbiAgc2NvcmVVcChzY29yZSkge1xuICAgIHRoaXMuc2NvcmUgKz0gc2NvcmU7XG4gICAgdGhpcy5xdWVyeVNlbGVjdG9yKCcuc2NvcmUnKS5pbm5lclRleHQgPSB0aGlzLnNjb3JlO1xuICB9XG59XG4iLCJpbXBvcnQgJy4vc3R5bGUuc2Nzcyc7XG5pbXBvcnQgc2FuZGJveERCIGZyb20gJy4vY29yZS9JbmRleGVkREInO1xuaW1wb3J0IEFwcCBmcm9tICcuL0FwcCc7XG5pbXBvcnQgRm9vdGVyIGZyb20gJy4vdmlldy9Db21tb24vRm9vdGVyJztcbmltcG9ydCBIb21lIGZyb20gJy4vdmlldy9Ib21lJztcbmltcG9ydCBUZXRyaXMgZnJvbSAnLi92aWV3L1RldHJpcyc7XG5pbXBvcnQgRmxhcHB5QmlyZCBmcm9tICcuL3ZpZXcvRmxhcHB5QmlyZCc7XG5pbXBvcnQgSWNvbnMgZnJvbSAnLi92aWV3L0NvbW1vbi9JY29ucyc7XG5pbXBvcnQgSWNvbiBmcm9tICcuL3ZpZXcvQ29tbW9uL0ljb24nO1xuaW1wb3J0IE5vdGVQYWQgZnJvbSAnLi92aWV3L05vdGVQYWQnO1xuaW1wb3J0IE5vdGVQYWRIZWFkZXIgZnJvbSAnLi92aWV3L05vdGVQYWQvY29tcG9uZW50cy9Ob3RlUGFkSGVhZGVyJztcbmltcG9ydCByb3V0ZXIgZnJvbSAnLi9jb3JlL1JvdXRlcic7XG5pbXBvcnQgVGV0cmlzQm9hcmQgZnJvbSAnLi92aWV3L1RldHJpcy9jb21wb25lbnRzL1RldHJpc0JvYXJkJztcbmltcG9ydCBUZXRyaXNQcmV2aWV3IGZyb20gJy4vdmlldy9UZXRyaXMvY29tcG9uZW50cy9UZXRyaXNQcmV2aWV3JztcbmltcG9ydCBUZXRyaXNQbGF5Z3JvdW5kIGZyb20gJy4vdmlldy9UZXRyaXMvY29tcG9uZW50cy9UZXRyaXNQbGF5Z3JvdW5kJztcblxuKGFzeW5jICgpID0+IHtcbiAgdHJ5IHtcbiAgICBhd2FpdCBzYW5kYm94REIub3BlbkRCKCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBxdWV1ZU1pY3JvdGFzaygoKSA9PiBhbGVydCgnSW5kZXhlZERC66W8IOyCrOyaqe2VoCDsiJgg7JeG7Iq164uI64ukLicpKTtcbiAgfVxuXG4gIGN1c3RvbUVsZW1lbnRzLmRlZmluZSgnbXktYXBwJywgQXBwKTtcbiAgY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdteS1mb290ZXInLCBGb290ZXIpO1xuICBjdXN0b21FbGVtZW50cy5kZWZpbmUoJ215LWhvbWUnLCBIb21lKTtcbiAgY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdteS10ZXRyaXMnLCBUZXRyaXMpO1xuICBjdXN0b21FbGVtZW50cy5kZWZpbmUoJ215LXRldHJpcy1wbGF5Z3JvdW5kJywgVGV0cmlzUGxheWdyb3VuZCk7XG4gIGN1c3RvbUVsZW1lbnRzLmRlZmluZSgnbXktdGV0cmlzLWJvYXJkJywgVGV0cmlzQm9hcmQpO1xuICBjdXN0b21FbGVtZW50cy5kZWZpbmUoJ215LXRldHJpcy1wcmV2aWV3JywgVGV0cmlzUHJldmlldyk7XG4gIGN1c3RvbUVsZW1lbnRzLmRlZmluZSgnbXktZmxhcHB5YmlyZCcsIEZsYXBweUJpcmQpO1xuICBjdXN0b21FbGVtZW50cy5kZWZpbmUoJ215LWljb25zJywgSWNvbnMpO1xuICBjdXN0b21FbGVtZW50cy5kZWZpbmUoJ215LWljb24nLCBJY29uKTtcbiAgY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdteS1ub3RlcGFkJywgTm90ZVBhZCk7XG4gIGN1c3RvbUVsZW1lbnRzLmRlZmluZSgnbXktbm90ZXBhZC1oZWFkZXInLCBOb3RlUGFkSGVhZGVyKTtcbn0pKCk7XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4gcm91dGVyLnJlbmRlcigpKTtcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdwb3BzdGF0ZScsICgpID0+IHJvdXRlci5yZW5kZXIoKSk7XG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImRiIiwiY29uc3RydWN0b3IiLCJkYk5hbWUiLCJkYlZlcnNpb24iLCJzdG9yZXMiLCJ0aGlzIiwiYXN5bmMiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInJlcXVlc3QiLCJ3aW5kb3ciLCJpbmRleGVkREIiLCJvcGVuIiwib25zdWNjZXNzIiwicmVzdWx0Iiwib25lcnJvciIsImUiLCJvbnVwZ3JhZGVuZWVkZWQiLCJmb3JFYWNoIiwic3RvcmUiLCJvYmplY3RTdG9yZU5hbWVzIiwiY29udGFpbnMiLCJkZWxldGVPYmplY3RTdG9yZSIsImNyZWF0ZU9iamVjdFN0b3JlIiwia2V5UGF0aCIsInN0b3JlTmFtZSIsImlkIiwidHJhbnNhY3Rpb24iLCJvYmplY3RTdG9yZSIsImdldCIsImdldEFsbCIsImRhdGEiLCJtb2RpZmllZERhdGEiLCJEYXRlIiwiZ2V0VGltZSIsInB1dCIsImNvbnNvbGUiLCJsb2ciLCJlcnJvciIsImRlbGV0ZSIsInJlbmRlclJhdyIsInN0cmluZyIsInZhbHVlcyIsIlN0cmluZyIsInJhdyIsIldlYkNvbXBvbmVudCIsIkhUTUxFbGVtZW50Iiwic3VwZXIiLCJyZW5kZXIiLCJiaW5kIiwiY29ubmVjdGVkQ2FsbGJhY2siLCJpbm5lckhUTUwiLCJpbmplY3RIVE1MIiwiYmluZE1ldGhvZHMiLCJtZXRob2RzIiwibWV0aG9kIiwiQXBwIiwiQkFTRV9VUkwiLCJyb3V0ZXMiLCJwYXRoIiwiaHRtbCIsImxhYmVsIiwiaWNvblNyYyIsIm1haW5JY29ucyIsInJlZHVjZSIsInByZXYiLCJyb3V0ZXIiLCJnZXRMb2NhbEljb25zIiwiaWNvbiIsInRpdGxlIiwicm91dGUiLCJwYXRoVG9SZWdleHAiLCJSZWdFeHAiLCJyZXBsYWNlIiwiY3VycmVudFBhdGgiLCJsb2NhdGlvbiIsInBhdGhuYW1lIiwiZmluZCIsInZhbHVlIiwiZ2V0VXJsRnJvbSIsInRlc3QiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJnZXRJZEZyb21QYXRoIiwicmVwbGFjZVRvIiwibWF0Y2giLCJuYXZpZ2F0ZVRvIiwidXJsIiwiaGlzdG9yeSIsInB1c2hTdGF0ZSIsInJlcGxhY2VTdGF0ZSIsImJhY2siLCJGb290ZXIiLCJhZGRFdmVudExpc3RlbmVyIiwiaGFuZGxlQ2xpY2siLCJqb2luIiwidGFyZ2V0IiwiY2xvc2VzdCIsImRhdGFzZXQiLCJIb21lIiwiVGV0cmlzIiwic2NvcmUiLCJoYW5kbGVTdGFydCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJub2RlIiwic3RhcnRHYW1lIiwiRmxhcHB5QmlyZCIsIkljb25zIiwiaWNvbnMiLCJoYW5kbGVEb3VibGVDbGljayIsImhhbmRsZUtleURvd24iLCJoYW5kbGVJY29uQ2hhbmdlIiwiaGFuZGxlSWNvbkRlbGV0ZSIsIm9ic2VydmVkQXR0cmlidXRlcyIsImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayIsIm5hbWUiLCJvbGRWYWx1ZSIsIm5ld1ZhbHVlIiwibWFwIiwiSlNPTiIsInBhcnNlIiwiZ2V0QXR0cmlidXRlIiwic2V0QXR0cmlidXRlIiwic3RyaW5naWZ5IiwidG9nZ2xlQXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwiY2hlY2tlZEVsIiwia2V5IiwibGVuZ3RoIiwiZGV0YWlsIiwicHJldkljb25JbmRleCIsImZpbmRJbmRleCIsIm5ld0ljb25zIiwiZmlsdGVyIiwiSWNvbiIsImljb25zcmMiLCJOb3RlUGFkIiwiY29udGVudCIsImhhbmRsZVNhdmUiLCJoYW5kbGVMb2NhbFNhdmUiLCJoYW5kbGVEZWxldGUiLCJkaXNjb25uZWN0ZWRDYWxsYmFjayIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJwcmV2ZW50RGVmYXVsdCIsIm5vdGVQYWREYXRhIiwiZ2V0Tm90ZVBhZERhdGEiLCJibG9iIiwiQmxvYiIsInR5cGUiLCJsaW5rIiwiY3JlYXRlRWxlbWVudCIsImhyZWYiLCJVUkwiLCJjcmVhdGVPYmplY3RVUkwiLCJkb3dubG9hZCIsImNsaWNrIiwic3RvcFByb3BhZ2F0aW9uIiwiYWxlcnQiLCJpY29uQ2hhbmdlRXZlbnQiLCJDdXN0b21FdmVudCIsImRpc3BhdGNoRXZlbnQiLCJlcnIiLCJjb25maXJtIiwiaWNvbkRlbGV0ZUV2ZW50IiwidHJpbSIsInByb21wdCIsIk51bWJlciIsImRpc2FibGUiLCJidXR0b25zIiwic2xvdHMiLCJ0ZXh0Iiwib25DbGljayIsIm5vdGVwYWQiLCJidWJibGVzIiwiYWNjIiwiY3VyIiwiTm90ZVBhZEhlYWRlciIsImlubmVyVGV4dCIsImJ1dHRvbiIsInNsb3QiLCJ2aWV3QnV0dG9uIiwiZWRpdEJ1dHRvbiIsInN1YiIsImNsaWNrVmlld0J1dHRvbiIsImNsaWNrRWRpdEJ1dHRvbiIsImNsb3NlUG9wdXAiLCJwYXJlbnRFbGVtZW50IiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwic2xvdElkIiwiY2FsbCIsInRvZ2dsZVBvcHVwIiwicG9wdXAiLCJyZW1vdmUiLCJhZGQiLCJCTE9DS1MiLCJJIiwiSiIsIkwiLCJPIiwiUyIsIlQiLCJaIiwiQkxPQ0tfQ0xBU1NFUyIsIlNDT1JFUyIsIkJPQVJEX1dJRFRIIiwiS0VZX0FDVElPTlMiLCJNYXAiLCJjcmVhdGVTaHVmZmxlQmxvY2tRdWV1ZSIsImJsb2NrcyIsIk9iamVjdCIsInNvcnQiLCJNYXRoIiwicmFuZG9tIiwiZ2V0SW5pdGlhbERhdGEiLCJ3aWR0aCIsImhlaWdodCIsIkFycmF5IiwiZnJvbSIsImZpbGwiLCJGUkVFWkUiLCJDUkVBVEVfTkVXX0JMT0NLIiwiVGV0cm9taW5vIiwic3RhdGljIiwiJHBsYXlncm91bmQiLCJjcmVhdGVCbG9jayIsIiRib2FyZCIsImJsb2NrUXVldWUiLCJvYnNlcnZlcnMiLCJjcmVhdGVOZXdCbG9jayIsInN1YnNjcmliZSIsImV2ZW50Iiwib2JzZXJ2ZXIiLCJwdXNoIiwibm90aWZ5IiwidW5zdWJzY3JpYmUiLCJvIiwiZ2V0TmV4dFRldHJvbWlub3MiLCJzbGljZSIsImJsb2NrIiwic2hpZnQiLCJjb25jYXQiLCJpbml0aWFsQmxvY2tQb3MiLCJmaXJzdE5vbkVtcHR5Um93SW5kZXgiLCJyb3ciLCJzb21lIiwiY2VsbCIsIngiLCJmbG9vciIsInkiLCJnZXRJbml0aWFsQmxvY2tQb3MiLCJyb3RhdGUiLCJyb3RhdGVkQmxvY2siLCJfIiwiaSIsInJldmVyc2UiLCJyb3RhdGVkV2lkdGgiLCJyb3RhdGVkSGVpZ2h0IiwibmV3WCIsIm5ld1kiLCJjYW5Nb3ZlIiwibW92ZUxlZnQiLCJtb3ZlUmlnaHQiLCJtb3ZlRG93biIsImZyZWV6ZSIsInN0b3BHYW1lIiwiY29sIiwiaiIsIm5leHRYIiwibmV4dFkiLCJjbG9uZSIsImNsb25lZCIsIlRldHJpc0JvYXJkIiwic3RhcnQiLCJ0ZXRyb21pbm8iLCJsYXN0VGltZSIsImRyb3BJbnRlcnZhbCIsInRldHJvbWlub0NvdW50ZXIiLCJhbmltYXRpb25JZCIsImtleVN0YXRlIiwiU2V0IiwiaW5jcmVhc2VEcm9wU3BlZWQiLCJyZW1vdmVGdWxsUm93cyIsInVwZGF0ZUJvYXJkIiwia2V5ZG93bkhhbmRsZXIiLCJrZXl1cEhhbmRsZXIiLCJwZXJmb3JtYW5jZSIsIm5vdyIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImRyb3BCbG9jayIsInRpbWVzdGFtcCIsInByZXZUZXRyb21pbm8iLCJjYW5jZWxBbmltYXRpb25GcmFtZSIsImhhbmRsZUtleXMiLCJoYXMiLCJyZW1vdmVPbGRCbG9jayIsInB1dE5ld0Jsb2NrIiwiZXZlcnkiLCJzcGxpY2UiLCJ1bnNoaWZ0Iiwic2NvcmVVcCIsIlRldHJpc1ByZXZpZXciLCJUZXRyaXNQbGF5Z3JvdW5kIiwicXVldWVNaWNyb3Rhc2siLCJjdXN0b21FbGVtZW50cyIsImRlZmluZSJdLCJzb3VyY2VSb290IjoiIn0=