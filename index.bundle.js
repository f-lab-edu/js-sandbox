(()=>{"use strict";var e="/js-sandbox/";const t=new class{db;constructor(e,t,i){this.dbName=e,this.dbVersion=t,this.stores=i}async openDB(){return new Promise(((e,t)=>{const i=window.indexedDB.open(this.dbName,this.dbVersion);i.onsuccess=()=>{this.db=i.result,e()},i.onerror=e=>{t(e)},i.onupgradeneeded=()=>{this.db=i.result,this.stores.forEach((e=>{this.db.objectStoreNames.contains(e)&&this.db.deleteObjectStore(e),this.db.createObjectStore(e,{keyPath:"id",autoIncrement:!0})}))}}))}async getData(e,t){return new Promise(((i,n)=>{const s=this.db.transaction(e,"readonly").objectStore(e).get(t);s.onsuccess=()=>{i(s.result)},s.onerror=e=>{n(e)}}))}async getAllData(e){return new Promise(((t,i)=>{const n=this.db.transaction(e,"readonly").objectStore(e).getAll();n.onsuccess=()=>{t(n.result)},n.onerror=e=>{i(e)}}))}async upsertData(e,t){return new Promise(((i,n)=>{const s=this.db.transaction(e,"readwrite").objectStore(e).put(t);s.onsuccess=()=>{i(s.result)},s.onerror=e=>{n(e)}}))}async deleteData(e,t){return new Promise(((i,n)=>{const s=this.db.transaction(e,"readwrite").objectStore(e).delete(t);s.onsuccess=()=>{i(s.result)},s.onerror=e=>{n(e)}}))}}("sandboxDB",2,["notepad"]),i=(e,...t)=>String.raw(e,...t);class n extends HTMLElement{connectedCallback(){this.render()}render(){this.innerHTML=this.injectHTML()}injectHTML(){return""}}class s extends n{injectHTML(){return i`
      <div id="page"></div>
      <my-icons tabindex="-1"></my-icons>
      <my-footer></my-footer>
    `}}const a=e+"2a583f97b153f7da7d41.png",o=[{path:"/",html:i`<my-home></my-home>`,label:"Home",iconSrc:null},{path:"/tetris",html:i`<my-tetris></my-tetris>`,label:"Tetris",iconSrc:e+"71c0bea6462001116fcf.png"},{path:"/flappybird",html:i`<my-flappybird></my-flappybird>`,label:"Flappy&nbsp;Bird",iconSrc:e+"39b884119b49599495ed.png"},{path:"/notepad",html:i`<my-notepad></my-notepad>`,label:"Note&nbsp;Pad",iconSrc:a}],l=o.reduce(((e,t)=>{const{path:i,label:n,iconSrc:s}=t;return"/"===t.path?e:[...e,{path:i,label:n,iconSrc:s}]}),[]),c=async()=>[...(await t.getAllData("notepad")).reduce(((e,t)=>{const{id:i,title:n}=t;return[...e,{path:`/notepad/${i}`,label:n,iconSrc:a}]}),[])],r=o,d=new class{constructor(e){this.routes=e}render(){const e=this.routes.find((e=>e.path===window.location.pathname.replace("/js-sandbox","")));e?document.querySelector("#page").innerHTML=e.html:this.replaceTo("/")}navigateTo(e){window.history.pushState(null,null,e),this.render()}replaceTo(e){window.history.replaceState(null,null,e),this.render()}back(){window.history.back(),this.render()}}(r),h=e+"59cb65e4f8f2627d6c2c.png",p=e+"bc8d31a2338dd0b3f68a.png";class u extends n{connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.handleClick.bind(this))}injectHTML(){return i`
      <img alt="window_logo" src=${h} class="window_icon" />
      <div class="input_box">
        <img alt="search" src=${p} class="window_icon" /><input type="text" placeholder="Ï∞æÍ∏∞" />
      </div>
      ${l.map((e=>i` <my-icon data-path="${e.path}" data-iconSrc="${e.iconSrc}"></my-icon> `)).join("")}
    `}handleClick(e){if(!e.target.closest("my-icon"))return;const t=e.target.closest("my-icon");d.navigateTo(t.dataset.path)}}class b extends n{}class y extends n{injectHTML(){return i`
      <h1>Tetris</h1>
      <p>You are viewing the Tetris component!</p>
    `}}class m extends n{injectHTML(){return i`
      <h1>Flappy Bird</h1>
      <p>You are viewing the Flappy Bird component!</p>
      <p>You are viewing the Flappy Bird component!</p>
      <p>You are viewing the Flappy Bird component!</p>
      <p>You are viewing the Flappy Bird component!</p>
      <p>You are viewing the Flappy Bird component!</p>
      <p>You are viewing the Flappy Bird component!</p>
    `}}class k extends n{async connectedCallback(){this.icons=[...l,...await c()],super.connectedCallback(),this.addEventListener("click",this.handleClick.bind(this)),this.addEventListener("dblclick",this.handleDoubleClick.bind(this)),this.addEventListener("keydown",this.handleKeyDown.bind(this)),this.addEventListener("iconChange",(e=>{this.icons=[...this.icons,e.detail]}))}static get observedAttributes(){return["icons"]}attributeChangedCallback(e,t,i){t!==i&&this.render()}injectHTML(){return i`
      ${this.icons.map((e=>i`
            <my-icon data-path=${e.path} data-label=${e.label} data-iconSrc=${e.iconSrc}></my-icon>
          `)).join("")}
    `}get icons(){return JSON.parse(this.getAttribute("icons"))}set icons(e){this.setAttribute("icons",JSON.stringify(e))}handleClick(e){if(!e.target.closest("my-icon"))return;const t=e.target.closest("my-icon");t.toggleAttribute("checked"),this.querySelectorAll("my-icon").forEach((e=>{e!==t&&e.removeAttribute("checked")}))}handleDoubleClick(e){if(!e.target.closest("my-icon"))return;const t=e.target.closest("my-icon");d.navigateTo(t.dataset.path)}handleKeyDown(e){const t=this.querySelectorAll("my-icon[checked]");if("Enter"===e.key){if(t.length>1)return;if(!t)return;d.navigateTo(t[0].dataset.path)}}}class v extends n{injectHTML(){const{label:e,iconsrc:t}=this.dataset;return i`
      <img alt="${e}_icon" src=${t} />
      ${e?`<span class="icon_name">${e}</span>`:""}
    `}}class f extends n{connectedCallback(){super.connectedCallback(),this.addEventListener("save",this.handleSave),this.addEventListener("localSave",this.handleLocalSave)}disconnectedCallback(){this.removeEventListener("save",this.handleSave),this.removeEventListener("localSave",this.handleLocalSave)}injectHTML(){return i`
      <my-notepad-header></my-notepad-header>
      <textarea></textarea>
    `}handleLocalSave(){const e=this.getNotePadData();if("fail"!==e)try{const t=new Blob([e.content],{type:"text/plain"}),i=document.createElement("a");i.href=URL.createObjectURL(t),i.download=`${e.title}.txt`,i.click()}catch(e){alert("Ï†ÄÏû•Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§."),console.error(e)}finally{this.querySelector("textarea").value=""}}async handleSave(e){e.stopPropagation();const i=this.getNotePadData();if("fail"!==i)try{const e=await t.upsertData("notepad",{title:i.title,content:i.content});e&&alert("Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§."),document.querySelector("my-icons").dispatchEvent(new CustomEvent("iconChange",{detail:{path:`/notepad/${e}`,label:i.title,iconSrc:a}}))}catch(e){alert("Ï†ÄÏû•Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§."),console.error(e)}finally{this.querySelector("textarea").value=""}}getNotePadData(){const e=this.querySelector("textarea").value;if(!e)return alert("ÎÇ¥Ïö©Ïù¥ ÏóÜÏäµÎãàÎã§."),"fail";let t=prompt("Ï†ÄÏû•Ìï† ÌååÏùºÎ™ÖÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî","Ï†úÎ™©ÏóÜÏùå");for(;null==t||""===t;){if(null===t)return"fail";t=prompt("ÌååÏùºÎ™ÖÏùÄ ÌïÑÏàòÏûÖÎãàÎã§.","Ï†úÎ™©ÏóÜÏùå")}return{title:t,content:e}}}const g=[{id:"file",title:"ÌååÏùº",key:"F",slots:[{id:1,text:"ÏÉàÎ°ú ÎßåÎì§Í∏∞(N)",key:["Ctrl","N"],disable:!0},{id:2,text:"ÎÇ¥ Ïª¥Ìì®ÌÑ∞Ïóê Ï†ÄÏû•(W)",key:["Ctrl","Shift","N"],onClick:function(){this.dispatchEvent(new CustomEvent("localSave",{bubbles:!0}))}},{id:3,text:"Ï†ÄÏû•(S)",key:["Ctrl","S"],onClick:function(){this.dispatchEvent(new CustomEvent("save",{bubbles:!0}))}},{id:4,text:"ÏÇ≠Ï†ú(D)",key:["Ctrl","Shift","S"],disable:!0},{id:5,text:"ÌéòÏù¥ÏßÄ ÏÑ§Ï†ï(U)...",key:[],disable:!0},{id:6,text:"Ïù∏ÏáÑ(P)...",key:["Ctrl","P"],disable:!0},{id:7,text:"ÎÅùÎÇ¥Í∏∞(X)",key:[],disable:!0}]},{id:"edit",title:"Ìé∏Ïßë",key:"E",slots:[{id:8,text:"Ïã§Ìñâ Ï∑®ÏÜå(U)",key:["Ctrl","Z"],disable:!0},{id:9,text:"ÏûòÎùºÎÇ¥Í∏∞(T)",key:["Ctrl","X"],disable:!0},{id:10,text:"Î≥µÏÇ¨(C)",key:["Ctrl","C"],disable:!0},{id:11,text:"Î∂ôÏó¨ÎÑ£Í∏∞(P)",key:["Ctrl","V"],disable:!0},{id:12,text:"ÏÇ≠Ï†ú(D)",key:["Del"],disable:!0},{id:13,text:"BingÏúºÎ°ú Í≤ÄÏÉâ(S)...",key:["Ctrl","E"],disable:!0},{id:14,text:"Ï∞æÍ∏∞(F)...",key:["Ctrl","F"],disable:!0},{id:15,text:"Îã§Ïùå Ï∞æÍ∏∞(N)",key:["F3"],disable:!0},{id:16,text:"Ïù¥Ï†Ñ Ï∞æÍ∏∞(V)",key:["Shift","F3"],disable:!0},{id:17,text:"Î∞îÍæ∏Í∏∞(R)...",key:["Ctrl","H"],disable:!0},{id:18,text:"Ïù¥Îèô(G)...",key:["Ctrl","G"],disable:!0},{id:19,text:"Î™®Îëê ÏÑ†ÌÉù(A)",key:["Ctrl","A"],disable:!0},{id:20,text:"ÏãúÍ∞Ñ/ÎÇ†Ïßú(D)",key:["F5"],disable:!0}]},{id:"format",title:"ÏÑúÏãù",key:"O",slots:[{id:21,text:"ÏûêÎèô Ï§Ñ Î∞îÍøà(W)",key:[],disable:!0},{id:22,text:"Í∏ÄÍº¥(F)...",key:[],disable:!0}]},{id:"view",title:"Î≥¥Í∏∞",key:"V",slots:[{id:23,text:"ÌôïÎåÄÌïòÍ∏∞(Z)",key:["Ctrl","+"],disable:!0},{id:24,text:"Ï∂ïÏÜåÌïòÍ∏∞(X)",key:["Ctrl","-"],disable:!0},{id:25,text:"ÏÉÅÌÉú ÌëúÏãúÏ§Ñ(S)",key:[],disable:!0}]},{id:"help",title:"ÎèÑÏõÄÎßê",key:"H",slots:[{id:26,text:"ÎèÑÏõÄÎßê Î≥¥Í∏∞(H)",key:[],disable:!0},{id:27,text:"ÌîºÎìúÎ∞± Î≥¥ÎÇ¥Í∏∞(F)",key:[],disable:!0},{id:28,text:"Î©îÎ™®Ïû• Ï†ïÎ≥¥(A)",key:[],disable:!0}]}],w=g.reduce(((e,t)=>[...e,...t.slots]),[]),x=g;class S extends n{connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.handleClick)}disconnectedCallback(){this.removeEventListener("click",this.handleClick)}injectHTML(){return i`
      <header>
        <span><img alt="notepad_icon" src=${a} />Ï†úÎ™©ÏóÜÏùå - Windows Î©îÎ™®Ïû•</span>
        <div class="view_buttons">
          <button class="view_button" id="mini">üóï</button>
          <button class="view_button" id="full">üóñ</button>
          <button class="view_button" id="close">‚Ö©</button>
        </div>
      </header>
      <div class="edit_buttons">
        ${x.map((e=>i`
              <button class="edit_button">
                ${e.title}(<u>${e.key}</u>)
                <div class="popup">
                  ${e.slots.map((e=>i`
                        <div class="sub" data-id="${e.id}" data-disable="${!!e.disable}">
                          <div>${e.text}</div>
                          ${e.key.length>0?`<div>${e.key.join(" + ")}</div>`:""}
                        </div>
                      `)).join("")}
                </div>
              </button>
            `)).join("")}
      </div>
    `}handleClick(e){const t=e.target.closest(".sub");if(t){const e=Number(t.dataset.id),{onClick:i}=w.find((t=>t.id===e))||{};i&&i.call(this)}else switch(e.target.className){case"view_button":(function(e){switch(e.id){case"full":this.parentElement.classList.toggle("fullscreen");break;case"mini":case"close":d.back()}}).call(this,e.target);break;case"edit_button":(function(e){e.querySelector(".popup").classList.toggle("show"),this.querySelectorAll(".popup").forEach((t=>{t!==e.querySelector(".popup")&&t.classList.remove("show")}))}).call(this,e.target)}}}(async()=>{await t.openDB(),customElements.define("my-app",s),customElements.define("my-footer",u),customElements.define("my-home",b),customElements.define("my-tetris",y),customElements.define("my-flappybird",m),customElements.define("my-icons",k),customElements.define("my-icon",v),customElements.define("my-notepad",f),customElements.define("my-notepad-header",S)})(),window.addEventListener("popstate",(()=>d.render()))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguYnVuZGxlLmpzIiwibWFwcGluZ3MiOiJtQkFDQSxJQUFJQSxFQ0RvQixlQzZIeEIsTUFFQSxFQUZrQixJQTdIbEIsTUFDRUMsR0FRQUMsWUFBWUMsRUFBUUMsRUFBV0MsR0FDN0JDLEtBQUtILE9BQVNBLEVBQ2RHLEtBQUtGLFVBQVlBLEVBQ2pCRSxLQUFLRCxPQUFTQSxDQUNoQixDQU1BRSxlQUNFLE9BQU8sSUFBSUMsU0FBUSxDQUFDQyxFQUFTQyxLQUMzQixNQUFNQyxFQUFVQyxPQUFPQyxVQUFVQyxLQUFLUixLQUFLSCxPQUFRRyxLQUFLRixXQUV4RE8sRUFBUUksVUFBWSxLQUNsQlQsS0FBS0wsR0FBS1UsRUFBUUssT0FDbEJQLEdBQVMsRUFHWEUsRUFBUU0sUUFBV0MsSUFDakJSLEVBQU9RLEVBQUUsRUFHWFAsRUFBUVEsZ0JBQWtCLEtBQ3hCYixLQUFLTCxHQUFLVSxFQUFRSyxPQUVsQlYsS0FBS0QsT0FBT2UsU0FBU0MsSUFDZmYsS0FBS0wsR0FBR3FCLGlCQUFpQkMsU0FBU0YsSUFDcENmLEtBQUtMLEdBQUd1QixrQkFBa0JILEdBRTVCZixLQUFLTCxHQUFHd0Isa0JBQWtCSixFQUFPLENBQUVLLFFBQVMsS0FBTUMsZUFBZSxHQUFPLEdBQ3hFLENBQ0gsR0FFTCxDQVFBcEIsY0FBY3FCLEVBQVdDLEdBQ3ZCLE9BQU8sSUFBSXJCLFNBQVEsQ0FBQ0MsRUFBU0MsS0FDM0IsTUFBTUMsRUFBVUwsS0FBS0wsR0FBRzZCLFlBQVlGLEVBQVcsWUFBWUcsWUFBWUgsR0FBV0ksSUFBSUgsR0FFdEZsQixFQUFRSSxVQUFZLEtBQ2xCTixFQUFRRSxFQUFRSyxPQUFPLEVBR3pCTCxFQUFRTSxRQUFXQyxJQUNqQlIsRUFBT1EsRUFBRSxDQUNWLEdBRUwsQ0FPQVgsaUJBQWlCcUIsR0FDZixPQUFPLElBQUlwQixTQUFRLENBQUNDLEVBQVNDLEtBQzNCLE1BQU1DLEVBQVVMLEtBQUtMLEdBQUc2QixZQUFZRixFQUFXLFlBQVlHLFlBQVlILEdBQVdLLFNBRWxGdEIsRUFBUUksVUFBWSxLQUNsQk4sRUFBUUUsRUFBUUssT0FBTyxFQUd6QkwsRUFBUU0sUUFBV0MsSUFDakJSLEVBQU9RLEVBQUUsQ0FDVixHQUVMLENBUUFYLGlCQUFpQnFCLEVBQVdNLEdBQzFCLE9BQU8sSUFBSTFCLFNBQVEsQ0FBQ0MsRUFBU0MsS0FDM0IsTUFBTUMsRUFBVUwsS0FBS0wsR0FBRzZCLFlBQVlGLEVBQVcsYUFBYUcsWUFBWUgsR0FBV08sSUFBSUQsR0FFdkZ2QixFQUFRSSxVQUFZLEtBQ2xCTixFQUFRRSxFQUFRSyxPQUFPLEVBR3pCTCxFQUFRTSxRQUFXQyxJQUNqQlIsRUFBT1EsRUFBRSxDQUNWLEdBRUwsQ0FRQVgsaUJBQWlCcUIsRUFBV0MsR0FDMUIsT0FBTyxJQUFJckIsU0FBUSxDQUFDQyxFQUFTQyxLQUMzQixNQUFNQyxFQUFVTCxLQUFLTCxHQUFHNkIsWUFBWUYsRUFBVyxhQUFhRyxZQUFZSCxHQUFXUSxPQUFPUCxHQUUxRmxCLEVBQVFJLFVBQVksS0FDbEJOLEVBQVFFLEVBQVFLLE9BQU8sRUFHekJMLEVBQVFNLFFBQVdDLElBQ2pCUixFQUFPUSxFQUFFLENBQ1YsR0FFTCxHQUc4QixZQUFhLEVBQUcsQ0FBQyxZQzdIM0NtQixFQUFZLENBQUNDLEtBQVdDLElBQ3JCQyxPQUFPQyxJQUFJSCxLQUFXQyxHQ0RoQixNQUFNRyxVQUFxQkMsWUFDeENDLG9CQUNFdEMsS0FBS3VDLFFBQ1AsQ0FFQUEsU0FDRXZDLEtBQUt3QyxVQUFZeEMsS0FBS3lDLFlBQ3hCLENBRUFBLGFBQ0UsTUFBTyxFQUNULEVDUmEsTUFBTUMsVUFBWU4sRUFDL0JLLGFBQ0UsT0FBTyxDQUFJOzs7O0tBS2IsRSxxQ0NKSUUsRUFBUyxDQUNiLENBQ0VDLEtBQU0sSUFDTkMsS0FBTSxDQUFJLHNCQUNWQyxNQUFPLE9BQ1BDLFFBQVMsTUFFWCxDQUNFSCxLQUFNLFVBQ05DLEtBQU0sQ0FBSSwwQkFDVkMsTUFBTyxTQUNQQyxRLDhCQUVGLENBQ0VILEtBQU0sY0FDTkMsS0FBTSxDQUFJLGtDQUNWQyxNQUFPLG1CQUNQQyxRLDhCQUVGLENBQ0VILEtBQU0sV0FDTkMsS0FBTSxDQUFJLDRCQUNWQyxNQUFPLGdCQUNQQyxRQUFTLElBSVBDLEVBQVlMLEVBQU9NLFFBQU8sQ0FBQ0MsRUFBTUMsS0FDckMsTUFBTSxLQUFFUCxFQUFJLE1BQUVFLEVBQUssUUFBRUMsR0FBWUksRUFDakMsTUFBb0IsTUFBaEJBLEVBQU9QLEtBQXFCTSxFQUN6QixJQUFJQSxFQUFNLENBQUVOLE9BQU1FLFFBQU9DLFdBQVUsR0FDekMsSUFFR0ssRUFBZ0JuRCxTQU9iLFdBTm1CLGFBQXFCLFlBQ2RnRCxRQUFPLENBQUNDLEVBQU1HLEtBQzdDLE1BQU0sR0FBRTlCLEVBQUUsTUFBRStCLEdBQVVELEVBQ3RCLE1BQU8sSUFBSUgsRUFBTSxDQUFFTixLQUFNLFlBQVlyQixJQUFNdUIsTUFBT1EsRUFBT1AsUUFBUyxHQUFVLEdBQzNFLEtBS0wsSUNYQSxFQUZlLElBaENmLE1BQ0VuRCxZQUFZMkQsR0FDVnZELEtBQUsyQyxPQUFTWSxDQUNoQixDQUVBaEIsU0FDRSxNQUFNZ0IsRUFBUXZELEtBQUsyQyxPQUFPYSxNQUFNQyxHQUFVQSxFQUFNYixPQUFTdEMsT0FBT29ELFNBQVNDLFNBQVNDLFFBUnJFLGNBUXVGLE1BRS9GTCxFQUtMTSxTQUFTQyxjQUFjLFNBQVN0QixVQUFZZSxFQUFNVixLQUpoRDdDLEtBQUsrRCxVQUFVLElBS25CLENBRUFDLFdBQVdDLEdBQ1QzRCxPQUFPNEQsUUFBUUMsVUFBVSxLQUFNLEtBQU1GLEdBQ3JDakUsS0FBS3VDLFFBQ1AsQ0FFQXdCLFVBQVVFLEdBQ1IzRCxPQUFPNEQsUUFBUUUsYUFBYSxLQUFNLEtBQU1ILEdBQ3hDakUsS0FBS3VDLFFBQ1AsQ0FFQThCLE9BQ0UvRCxPQUFPNEQsUUFBUUcsT0FDZnJFLEtBQUt1QyxRQUNQLEdBR3dCLEcsOERDN0JYLE1BQU0rQixVQUFlbEMsRUFDbENFLG9CQUNFaUMsTUFBTWpDLG9CQUNOdEMsS0FBS3dFLGlCQUFpQixRQUFTeEUsS0FBS3lFLFlBQVlDLEtBQUsxRSxNQUN2RCxDQUVBeUMsYUFDRSxPQUFPLENBQUk7bUNBQ29COztnQ0FFSDs7UUFFeEJPLEVBQUEsS0FDTUssR0FDRyxDQUFJLHdCQUF3QkEsRUFBS1QsdUJBQXVCUyxFQUFLTix5QkFFckU0QixLQUFLO0tBRVosQ0FFQUYsWUFBWTdELEdBQ1YsSUFBS0EsRUFBRWdFLE9BQU9DLFFBQVEsV0FBWSxPQUVsQyxNQUFNeEIsRUFBT3pDLEVBQUVnRSxPQUFPQyxRQUFRLFdBQzlCLGFBQWtCeEIsRUFBS3lCLFFBQVFsQyxLQUNqQyxFQzlCYSxNQUFNbUMsVUFBYTNDLEdDQ25CLE1BQU00QyxVQUFlNUMsRUFDbENLLGFBQ0UsT0FBTyxDQUFJOzs7S0FJYixFQ05hLE1BQU13QyxVQUFtQjdDLEVBQ3RDSyxhQUNFLE9BQU8sQ0FBSTs7Ozs7Ozs7S0FTYixFQ1RhLE1BQU15QyxVQUFjOUMsRUFDakNuQywwQkFDRUQsS0FBS21GLE1BQVEsSUFBSW5DLFdBQXFCSSxLQUN0Q21CLE1BQU1qQyxvQkFDTnRDLEtBQUt3RSxpQkFBaUIsUUFBU3hFLEtBQUt5RSxZQUFZQyxLQUFLMUUsT0FDckRBLEtBQUt3RSxpQkFBaUIsV0FBWXhFLEtBQUtvRixrQkFBa0JWLEtBQUsxRSxPQUM5REEsS0FBS3dFLGlCQUFpQixVQUFXeEUsS0FBS3FGLGNBQWNYLEtBQUsxRSxPQUN6REEsS0FBS3dFLGlCQUFpQixjQUFlNUQsSUFDbkNaLEtBQUttRixNQUFRLElBQUluRixLQUFLbUYsTUFBT3ZFLEVBQUUwRSxPQUFPLEdBRTFDLENBRVdDLGdDQUNULE1BQU8sQ0FBQyxRQUNWLENBRUFDLHlCQUF5QkMsRUFBTUMsRUFBVUMsR0FDbkNELElBQWFDLEdBQ2pCM0YsS0FBS3VDLFFBQ1AsQ0FFQUUsYUFDRSxPQUFPLENBQUk7UUFDUHpDLEtBQUttRixNQUNKUyxLQUFLdkMsR0FDRyxDQUFJO2lDQUNZQSxFQUFLVCxtQkFBbUJTLEVBQUtQLHNCQUFzQk8sRUFBS047Y0FHaEY0QixLQUFLO0tBRVosQ0FFSVEsWUFDRixPQUFPVSxLQUFLQyxNQUFNOUYsS0FBSytGLGFBQWEsU0FDdEMsQ0FFSVosVUFBTTFCLEdBQ1J6RCxLQUFLZ0csYUFBYSxRQUFTSCxLQUFLSSxVQUFVeEMsR0FDNUMsQ0FFQWdCLFlBQVk3RCxHQUNWLElBQUtBLEVBQUVnRSxPQUFPQyxRQUFRLFdBQVksT0FFbEMsTUFBTXhCLEVBQU96QyxFQUFFZ0UsT0FBT0MsUUFBUSxXQUM5QnhCLEVBQUs2QyxnQkFBZ0IsV0FDckJsRyxLQUFLbUcsaUJBQWlCLFdBQVdyRixTQUFTc0YsSUFDcENBLElBQVMvQyxHQUNYK0MsRUFBS0MsZ0JBQWdCLFVBQ3ZCLEdBRUosQ0FFQWpCLGtCQUFrQnhFLEdBQ2hCLElBQUtBLEVBQUVnRSxPQUFPQyxRQUFRLFdBQVksT0FFbEMsTUFBTXhCLEVBQU96QyxFQUFFZ0UsT0FBT0MsUUFBUSxXQUM5QixhQUFrQnhCLEVBQUt5QixRQUFRbEMsS0FDakMsQ0FFQXlDLGNBQWN6RSxHQUNaLE1BQU0wRixFQUFZdEcsS0FBS21HLGlCQUFpQixvQkFDeEMsR0FBYyxVQUFWdkYsRUFBRTJGLElBQWlCLENBQ3JCLEdBQUlELEVBQVVFLE9BQVMsRUFBRyxPQUMxQixJQUFLRixFQUFXLE9BQ2hCLGFBQWtCQSxFQUFVLEdBQUd4QixRQUFRbEMsS0FDekMsQ0FDRixFQ3JFYSxNQUFNNkQsVUFBYXJFLEVBQ2hDSyxhQUNFLE1BQU0sTUFBRUssRUFBSyxRQUFFNEQsR0FBWTFHLEtBQUs4RSxRQUNoQyxPQUFPLENBQUk7a0JBQ0doQyxlQUFtQjREO1FBQzdCNUQsRUFBUSwyQkFBMkJBLFdBQWlCO0tBRTFELEVDSmEsTUFBTTZELFVBQWdCdkUsRUFDbkNFLG9CQUNFaUMsTUFBTWpDLG9CQUNOdEMsS0FBS3dFLGlCQUFpQixPQUFReEUsS0FBSzRHLFlBQ25DNUcsS0FBS3dFLGlCQUFpQixZQUFheEUsS0FBSzZHLGdCQUMxQyxDQUVBQyx1QkFDRTlHLEtBQUsrRyxvQkFBb0IsT0FBUS9HLEtBQUs0RyxZQUN0QzVHLEtBQUsrRyxvQkFBb0IsWUFBYS9HLEtBQUs2RyxnQkFDN0MsQ0FFQXBFLGFBQ0UsT0FBTyxDQUFJOzs7S0FJYixDQUVBb0Usa0JBQ0UsTUFBTUcsRUFBY2hILEtBQUtpSCxpQkFDekIsR0FBb0IsU0FBaEJELEVBRUosSUFDRSxNQUFNRSxFQUFPLElBQUlDLEtBQUssQ0FBQ0gsRUFBWUksU0FBVSxDQUFFQyxLQUFNLGVBQy9DQyxFQUFPekQsU0FBUzBELGNBQWMsS0FDcENELEVBQUtFLEtBQU9DLElBQUlDLGdCQUFnQlIsR0FDaENJLEVBQUtLLFNBQVcsR0FBR1gsRUFBWTFELFlBQy9CZ0UsRUFBS00sT0FDUCxDQUFFLE1BQU9DLEdBQ1BDLE1BQU0sZUFDTkMsUUFBUUMsTUFBTUgsRUFDaEIsQ0FBRSxRQUNBN0gsS0FBSzhELGNBQWMsWUFBWUwsTUFBUSxFQUN6QyxDQUNGLENBRUF4RCxpQkFBaUJXLEdBQ2ZBLEVBQUVxSCxrQkFDRixNQUFNakIsRUFBY2hILEtBQUtpSCxpQkFDekIsR0FBb0IsU0FBaEJELEVBRUosSUFDRSxNQUFNdEcsUUFBZSxhQUFxQixVQUFXLENBQ25ENEMsTUFBTzBELEVBQVkxRCxNQUNuQjhELFFBQVNKLEVBQVlJLFVBRW5CMUcsR0FDRm9ILE1BQU0sWUFFUmpFLFNBQVNDLGNBQWMsWUFBWW9FLGNBQ2pDLElBQUlDLFlBQVksYUFBYyxDQUM1QjdDLE9BQVEsQ0FDTjFDLEtBQU0sWUFBWWxDLElBQ2xCb0MsTUFBT2tFLEVBQVkxRCxNQUNuQlAsUUFBUyxLQUlqQixDQUFFLE1BQU84RSxHQUNQQyxNQUFNLGVBQ05DLFFBQVFDLE1BQU1ILEVBQ2hCLENBQUUsUUFDQTdILEtBQUs4RCxjQUFjLFlBQVlMLE1BQVEsRUFDekMsQ0FDRixDQUVBd0QsaUJBQ0UsTUFBTUcsRUFBVXBILEtBQUs4RCxjQUFjLFlBQVlMLE1BQy9DLElBQUsyRCxFQUVILE9BREFVLE1BQU0sYUFDQyxPQUVULElBQUl4RSxFQUFROEUsT0FBTyxpQkFBa0IsUUFDckMsS0FBTzlFLFNBQW1ELEtBQVZBLEdBQWMsQ0FDNUQsR0FBYyxPQUFWQSxFQUFnQixNQUFPLE9BQzNCQSxFQUFROEUsT0FBTyxjQUFlLE9BQ2hDLENBRUEsTUFBTyxDQUFFOUUsUUFBTzhELFVBQ2xCLEVDdEZGLE1BQU1pQixFQUFVLENBQ2QsQ0FDRTlHLEdBQUksT0FDSitCLE1BQU8sS0FDUGlELElBQUssSUFDTCtCLE1BQU8sQ0FDTCxDQUFFL0csR0FBSSxFQUFHZ0gsS0FBTSxZQUFhaEMsSUFBSyxDQUFDLE9BQVEsS0FBTWlDLFNBQVMsR0FDekQsQ0FBRWpILEdBQUksRUFBR2dILEtBQU0sZUFBZ0JoQyxJQUFLLENBQUMsT0FBUSxRQUFTLEtBQU1rQyxRQXNFbEUsV0FDRXpJLEtBQUtrSSxjQUFjLElBQUlDLFlBQVksWUFBYSxDQUFFTyxTQUFTLElBQzdELEdBdkVNLENBQUVuSCxHQUFJLEVBQUdnSCxLQUFNLFFBQVNoQyxJQUFLLENBQUMsT0FBUSxLQUFNa0MsUUFpRWxELFdBQ0V6SSxLQUFLa0ksY0FBYyxJQUFJQyxZQUFZLE9BQVEsQ0FBRU8sU0FBUyxJQUN4RCxHQWxFTSxDQUFFbkgsR0FBSSxFQUFHZ0gsS0FBTSxRQUFTaEMsSUFBSyxDQUFDLE9BQVEsUUFBUyxLQUFNaUMsU0FBUyxHQUM5RCxDQUFFakgsR0FBSSxFQUFHZ0gsS0FBTSxlQUFnQmhDLElBQUssR0FBSWlDLFNBQVMsR0FDakQsQ0FBRWpILEdBQUksRUFBR2dILEtBQU0sV0FBWWhDLElBQUssQ0FBQyxPQUFRLEtBQU1pQyxTQUFTLEdBQ3hELENBQUVqSCxHQUFJLEVBQUdnSCxLQUFNLFNBQVVoQyxJQUFLLEdBQUlpQyxTQUFTLEtBRy9DLENBQ0VqSCxHQUFJLE9BQ0orQixNQUFPLEtBQ1BpRCxJQUFLLElBQ0wrQixNQUFPLENBQ0wsQ0FBRS9HLEdBQUksRUFBR2dILEtBQU0sV0FBWWhDLElBQUssQ0FBQyxPQUFRLEtBQU1pQyxTQUFTLEdBQ3hELENBQUVqSCxHQUFJLEVBQUdnSCxLQUFNLFVBQVdoQyxJQUFLLENBQUMsT0FBUSxLQUFNaUMsU0FBUyxHQUN2RCxDQUFFakgsR0FBSSxHQUFJZ0gsS0FBTSxRQUFTaEMsSUFBSyxDQUFDLE9BQVEsS0FBTWlDLFNBQVMsR0FDdEQsQ0FBRWpILEdBQUksR0FBSWdILEtBQU0sVUFBV2hDLElBQUssQ0FBQyxPQUFRLEtBQU1pQyxTQUFTLEdBQ3hELENBQUVqSCxHQUFJLEdBQUlnSCxLQUFNLFFBQVNoQyxJQUFLLENBQUMsT0FBUWlDLFNBQVMsR0FDaEQsQ0FBRWpILEdBQUksR0FBSWdILEtBQU0sa0JBQW1CaEMsSUFBSyxDQUFDLE9BQVEsS0FBTWlDLFNBQVMsR0FDaEUsQ0FBRWpILEdBQUksR0FBSWdILEtBQU0sV0FBWWhDLElBQUssQ0FBQyxPQUFRLEtBQU1pQyxTQUFTLEdBQ3pELENBQUVqSCxHQUFJLEdBQUlnSCxLQUFNLFdBQVloQyxJQUFLLENBQUMsTUFBT2lDLFNBQVMsR0FDbEQsQ0FBRWpILEdBQUksR0FBSWdILEtBQU0sV0FBWWhDLElBQUssQ0FBQyxRQUFTLE1BQU9pQyxTQUFTLEdBQzNELENBQUVqSCxHQUFJLEdBQUlnSCxLQUFNLFlBQWFoQyxJQUFLLENBQUMsT0FBUSxLQUFNaUMsU0FBUyxHQUMxRCxDQUFFakgsR0FBSSxHQUFJZ0gsS0FBTSxXQUFZaEMsSUFBSyxDQUFDLE9BQVEsS0FBTWlDLFNBQVMsR0FDekQsQ0FBRWpILEdBQUksR0FBSWdILEtBQU0sV0FBWWhDLElBQUssQ0FBQyxPQUFRLEtBQU1pQyxTQUFTLEdBQ3pELENBQUVqSCxHQUFJLEdBQUlnSCxLQUFNLFdBQVloQyxJQUFLLENBQUMsTUFBT2lDLFNBQVMsS0FHdEQsQ0FDRWpILEdBQUksU0FDSitCLE1BQU8sS0FDUGlELElBQUssSUFDTCtCLE1BQU8sQ0FDTCxDQUFFL0csR0FBSSxHQUFJZ0gsS0FBTSxhQUFjaEMsSUFBSyxHQUFJaUMsU0FBUyxHQUNoRCxDQUFFakgsR0FBSSxHQUFJZ0gsS0FBTSxXQUFZaEMsSUFBSyxHQUFJaUMsU0FBUyxLQUdsRCxDQUNFakgsR0FBSSxPQUNKK0IsTUFBTyxLQUNQaUQsSUFBSyxJQUNMK0IsTUFBTyxDQUNMLENBQUUvRyxHQUFJLEdBQUlnSCxLQUFNLFVBQVdoQyxJQUFLLENBQUMsT0FBUSxLQUFNaUMsU0FBUyxHQUN4RCxDQUFFakgsR0FBSSxHQUFJZ0gsS0FBTSxVQUFXaEMsSUFBSyxDQUFDLE9BQVEsS0FBTWlDLFNBQVMsR0FDeEQsQ0FBRWpILEdBQUksR0FBSWdILEtBQU0sWUFBYWhDLElBQUssR0FBSWlDLFNBQVMsS0FHbkQsQ0FDRWpILEdBQUksT0FDSitCLE1BQU8sTUFDUGlELElBQUssSUFDTCtCLE1BQU8sQ0FDTCxDQUFFL0csR0FBSSxHQUFJZ0gsS0FBTSxZQUFhaEMsSUFBSyxHQUFJaUMsU0FBUyxHQUMvQyxDQUFFakgsR0FBSSxHQUFJZ0gsS0FBTSxhQUFjaEMsSUFBSyxHQUFJaUMsU0FBUyxHQUNoRCxDQUFFakgsR0FBSSxHQUFJZ0gsS0FBTSxZQUFhaEMsSUFBSyxHQUFJaUMsU0FBUyxNQUsvQ0YsRUFBUUQsRUFBUXBGLFFBQU8sQ0FBQzBGLEVBQUtDLElBQzFCLElBQUlELEtBQVFDLEVBQUlOLFFBQ3RCLElBRUgsSUNoRWUsTUFBTU8sVUFBc0J6RyxFQUN6Q0Usb0JBQ0VpQyxNQUFNakMsb0JBQ050QyxLQUFLd0UsaUJBQWlCLFFBQVN4RSxLQUFLeUUsWUFDdEMsQ0FFQXFDLHVCQUNFOUcsS0FBSytHLG9CQUFvQixRQUFTL0csS0FBS3lFLFlBQ3pDLENBRUFoQyxhQUNFLE9BQU8sQ0FBSTs7NENBRTZCOzs7Ozs7OztVQVFsQyxPQUVHcUcsR0FBVyxDQUFJOztrQkFFVkEsRUFBT3hGLFlBQVl3RixFQUFPdkM7O29CQUV4QnVDLEVBQU9SLE1BQ04xQyxLQUNFbUQsR0FBUyxDQUFJO29EQUNnQkEsRUFBS3hILHVCQUF1QndILEVBQUtQO2lDQUNwRE8sRUFBS1I7NEJBQ1ZRLEVBQUt4QyxJQUFJQyxPQUFTLEVBQUksUUFBUXVDLEVBQUt4QyxJQUFJNUIsS0FBSyxlQUFpQjs7MEJBSXBFQSxLQUFLOzs7Z0JBS2ZBLEtBQUs7O0tBR2QsQ0FFQUYsWUFBWTdELEdBQ1YsTUFBTW9JLEVBQU1wSSxFQUFFZ0UsT0FBT0MsUUFBUSxRQUM3QixHQUFJbUUsRUFBSixDQUNFLE1BQU1DLEVBQVNDLE9BQU9GLEVBQUlsRSxRQUFRdkQsS0FDNUIsUUFBRWtILEdBQVlILEVBQU05RSxNQUFNdUYsR0FBU0EsRUFBS3hILEtBQU8wSCxLQUFXLENBQUMsRUFDN0RSLEdBQVNBLEVBQVFVLEtBQUtuSixLQUU1QixNQUVBLE9BQVFZLEVBQUVnRSxPQUFPd0UsV0FDZixJQUFLLGVBVVAsU0FBeUJDLEdBQ3ZCLE9BQVFBLEVBQVE5SCxJQUNkLElBQUssT0FDSHZCLEtBQUtzSixjQUFjQyxVQUFVQyxPQUFPLGNBQ3BDLE1BQ0YsSUFBSyxPQUNMLElBQUssUUFDSCxTQUtOLEdBckJvQkwsS0FBS25KLEtBQU1ZLEVBQUVnRSxRQUM3QixNQUNGLElBQUssZUFxQlAsU0FBbUI2RSxHQUNqQkEsRUFBUTNGLGNBQWMsVUFBVXlGLFVBQVVDLE9BQU8sUUFDakR4SixLQUFLbUcsaUJBQWlCLFVBQVVyRixTQUFTc0YsSUFDbkNBLElBQVNxRCxFQUFRM0YsY0FBYyxXQUNqQ3NDLEVBQUttRCxVQUFVRyxPQUFPLE9BQ3hCLEdBRUosR0EzQmNQLEtBQUtuSixLQUFNWSxFQUFFZ0UsUUE0QjdCLEVDakZGLGlCQUNRLFdBRU4rRSxlQUFlQyxPQUFPLFNBQVVsSCxHQUNoQ2lILGVBQWVDLE9BQU8sWUFBYXRGLEdBQ25DcUYsZUFBZUMsT0FBTyxVQUFXN0UsR0FDakM0RSxlQUFlQyxPQUFPLFlBQWE1RSxHQUNuQzJFLGVBQWVDLE9BQU8sZ0JBQWlCM0UsR0FDdkMwRSxlQUFlQyxPQUFPLFdBQVkxRSxHQUNsQ3lFLGVBQWVDLE9BQU8sVUFBV25ELEdBQ2pDa0QsZUFBZUMsT0FBTyxhQUFjakQsR0FDcENnRCxlQUFlQyxPQUFPLG9CQUFxQmYsRUFDNUMsRUFaRCxHQWNBdkksT0FBT2tFLGlCQUFpQixZQUFZLElBQU0sWSIsInNvdXJjZXMiOlsid2VicGFjazovL2phdmFzY3JpcHQtc2FuZGJveC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9qYXZhc2NyaXB0LXNhbmRib3gvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vamF2YXNjcmlwdC1zYW5kYm94Ly4vc3JjL2NvcmUvSW5kZXhlZERCLmpzIiwid2VicGFjazovL2phdmFzY3JpcHQtc2FuZGJveC8uL3NyYy91dGlscy91dGlscy5qcyIsIndlYnBhY2s6Ly9qYXZhc2NyaXB0LXNhbmRib3gvLi9zcmMvY29yZS9XZWJDb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vamF2YXNjcmlwdC1zYW5kYm94Ly4vc3JjL0FwcC5qcyIsIndlYnBhY2s6Ly9qYXZhc2NyaXB0LXNhbmRib3gvLi9zcmMvdXRpbHMvcm91dGVzLmpzIiwid2VicGFjazovL2phdmFzY3JpcHQtc2FuZGJveC8uL3NyYy9jb3JlL1JvdXRlci5qcyIsIndlYnBhY2s6Ly9qYXZhc2NyaXB0LXNhbmRib3gvLi9zcmMvdmlldy9Db21tb24vRm9vdGVyLmpzIiwid2VicGFjazovL2phdmFzY3JpcHQtc2FuZGJveC8uL3NyYy92aWV3L0hvbWUvaW5kZXguanMiLCJ3ZWJwYWNrOi8vamF2YXNjcmlwdC1zYW5kYm94Ly4vc3JjL3ZpZXcvVGV0cmlzL2luZGV4LmpzIiwid2VicGFjazovL2phdmFzY3JpcHQtc2FuZGJveC8uL3NyYy92aWV3L0ZsYXBweUJpcmQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vamF2YXNjcmlwdC1zYW5kYm94Ly4vc3JjL3ZpZXcvQ29tbW9uL0ljb25zLmpzIiwid2VicGFjazovL2phdmFzY3JpcHQtc2FuZGJveC8uL3NyYy92aWV3L0NvbW1vbi9JY29uLmpzIiwid2VicGFjazovL2phdmFzY3JpcHQtc2FuZGJveC8uL3NyYy92aWV3L05vdGVQYWQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vamF2YXNjcmlwdC1zYW5kYm94Ly4vc3JjL3ZpZXcvTm90ZVBhZC9jb25zdC9idXR0b25zLmpzIiwid2VicGFjazovL2phdmFzY3JpcHQtc2FuZGJveC8uL3NyYy92aWV3L05vdGVQYWQvY29tcG9uZW50cy9Ob3RlUGFkSGVhZGVyLmpzIiwid2VicGFjazovL2phdmFzY3JpcHQtc2FuZGJveC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCIvanMtc2FuZGJveC9cIjsiLCJjbGFzcyBJbmRleGVkREIge1xyXG4gIGRiO1xyXG5cclxuICAvKipcclxuICAgKiDsg53shLHsnpBcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gZGJOYW1lXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IGRiVmVyc2lvblxyXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHN0b3Jlc1xyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKGRiTmFtZSwgZGJWZXJzaW9uLCBzdG9yZXMpIHtcclxuICAgIHRoaXMuZGJOYW1lID0gZGJOYW1lO1xyXG4gICAgdGhpcy5kYlZlcnNpb24gPSBkYlZlcnNpb247XHJcbiAgICB0aGlzLnN0b3JlcyA9IHN0b3JlcztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIERCIOyYpO2UiCDrqZTshJzrk5xcclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTx2b2lkPn1cclxuICAgKi9cclxuICBhc3luYyBvcGVuREIoKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICBjb25zdCByZXF1ZXN0ID0gd2luZG93LmluZGV4ZWREQi5vcGVuKHRoaXMuZGJOYW1lLCB0aGlzLmRiVmVyc2lvbik7XHJcblxyXG4gICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLmRiID0gcmVxdWVzdC5yZXN1bHQ7XHJcbiAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgcmVxdWVzdC5vbmVycm9yID0gKGUpID0+IHtcclxuICAgICAgICByZWplY3QoZSk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICByZXF1ZXN0Lm9udXBncmFkZW5lZWRlZCA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLmRiID0gcmVxdWVzdC5yZXN1bHQ7XHJcblxyXG4gICAgICAgIHRoaXMuc3RvcmVzLmZvckVhY2goKHN0b3JlKSA9PiB7XHJcbiAgICAgICAgICBpZiAodGhpcy5kYi5vYmplY3RTdG9yZU5hbWVzLmNvbnRhaW5zKHN0b3JlKSkge1xyXG4gICAgICAgICAgICB0aGlzLmRiLmRlbGV0ZU9iamVjdFN0b3JlKHN0b3JlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHRoaXMuZGIuY3JlYXRlT2JqZWN0U3RvcmUoc3RvcmUsIHsga2V5UGF0aDogJ2lkJywgYXV0b0luY3JlbWVudDogdHJ1ZSB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgfTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog642w7J207YSwIOyhsO2ajCDrqZTshJzrk5xcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gc3RvcmVOYW1lXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IGlkXHJcbiAgICogQHJldHVybnMge1Byb21pc2U8b2JqZWN0Pn1cclxuICAgKi9cclxuICBhc3luYyBnZXREYXRhKHN0b3JlTmFtZSwgaWQpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLmRiLnRyYW5zYWN0aW9uKHN0b3JlTmFtZSwgJ3JlYWRvbmx5Jykub2JqZWN0U3RvcmUoc3RvcmVOYW1lKS5nZXQoaWQpO1xyXG5cclxuICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSAoKSA9PiB7XHJcbiAgICAgICAgcmVzb2x2ZShyZXF1ZXN0LnJlc3VsdCk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICByZXF1ZXN0Lm9uZXJyb3IgPSAoZSkgPT4ge1xyXG4gICAgICAgIHJlamVjdChlKTtcclxuICAgICAgfTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog642w7J207YSwIOyghOyytCDsobDtmowg66mU7ISc65OcXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHN0b3JlTmFtZVxyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPG9iamVjdFtdPn1cclxuICAgKi9cclxuICBhc3luYyBnZXRBbGxEYXRhKHN0b3JlTmFtZSkge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgY29uc3QgcmVxdWVzdCA9IHRoaXMuZGIudHJhbnNhY3Rpb24oc3RvcmVOYW1lLCAncmVhZG9ubHknKS5vYmplY3RTdG9yZShzdG9yZU5hbWUpLmdldEFsbCgpO1xyXG5cclxuICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSAoKSA9PiB7XHJcbiAgICAgICAgcmVzb2x2ZShyZXF1ZXN0LnJlc3VsdCk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICByZXF1ZXN0Lm9uZXJyb3IgPSAoZSkgPT4ge1xyXG4gICAgICAgIHJlamVjdChlKTtcclxuICAgICAgfTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog642w7J207YSwIOy2lOqwgCDrqZTshJzrk5xcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gc3RvcmVOYW1lXHJcbiAgICogQHBhcmFtIHtvYmplY3R9IGRhdGFcclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxvYmplY3Q+fVxyXG4gICAqL1xyXG4gIGFzeW5jIHVwc2VydERhdGEoc3RvcmVOYW1lLCBkYXRhKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5kYi50cmFuc2FjdGlvbihzdG9yZU5hbWUsICdyZWFkd3JpdGUnKS5vYmplY3RTdG9yZShzdG9yZU5hbWUpLnB1dChkYXRhKTtcclxuXHJcbiAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gKCkgPT4ge1xyXG4gICAgICAgIHJlc29sdmUocmVxdWVzdC5yZXN1bHQpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgcmVxdWVzdC5vbmVycm9yID0gKGUpID0+IHtcclxuICAgICAgICByZWplY3QoZSk7XHJcbiAgICAgIH07XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOuNsOydtO2EsCDsgq3soJwg66mU7ISc65OcXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHN0b3JlTmFtZVxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpZFxyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPG9iamVjdD59XHJcbiAgICovXHJcbiAgYXN5bmMgZGVsZXRlRGF0YShzdG9yZU5hbWUsIGlkKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5kYi50cmFuc2FjdGlvbihzdG9yZU5hbWUsICdyZWFkd3JpdGUnKS5vYmplY3RTdG9yZShzdG9yZU5hbWUpLmRlbGV0ZShpZCk7XHJcblxyXG4gICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9ICgpID0+IHtcclxuICAgICAgICByZXNvbHZlKHJlcXVlc3QucmVzdWx0KTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHJlcXVlc3Qub25lcnJvciA9IChlKSA9PiB7XHJcbiAgICAgICAgcmVqZWN0KGUpO1xyXG4gICAgICB9O1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5jb25zdCBzYW5kYm94REIgPSBuZXcgSW5kZXhlZERCKCdzYW5kYm94REInLCAyLCBbJ25vdGVwYWQnXSk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBzYW5kYm94REI7XHJcbiIsImNvbnN0IHJlbmRlclJhdyA9IChzdHJpbmcsIC4uLnZhbHVlcykgPT4ge1xyXG4gIHJldHVybiBTdHJpbmcucmF3KHN0cmluZywgLi4udmFsdWVzKTtcclxufTtcclxuXHJcbmV4cG9ydCB7IHJlbmRlclJhdyBhcyBodG1sLCByZW5kZXJSYXcgYXMgY3NzIH07XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFdlYkNvbXBvbmVudCBleHRlbmRzIEhUTUxFbGVtZW50IHtcclxuICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcclxuICAgIHRoaXMucmVuZGVyKCk7XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICB0aGlzLmlubmVySFRNTCA9IHRoaXMuaW5qZWN0SFRNTCgpO1xyXG4gIH1cclxuXHJcbiAgaW5qZWN0SFRNTCgpIHtcclxuICAgIHJldHVybiBgYDtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgaHRtbCB9IGZyb20gJy4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgV2ViQ29tcG9uZW50IGZyb20gJy4vY29yZS9XZWJDb21wb25lbnQnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBwIGV4dGVuZHMgV2ViQ29tcG9uZW50IHtcclxuICBpbmplY3RIVE1MKCkge1xyXG4gICAgcmV0dXJuIGh0bWxgXHJcbiAgICAgIDxkaXYgaWQ9XCJwYWdlXCI+PC9kaXY+XHJcbiAgICAgIDxteS1pY29ucyB0YWJpbmRleD1cIi0xXCI+PC9teS1pY29ucz5cclxuICAgICAgPG15LWZvb3Rlcj48L215LWZvb3Rlcj5cclxuICAgIGA7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IGh0bWwgfSBmcm9tICcuL3V0aWxzJztcclxuaW1wb3J0IHRldHJpcyBmcm9tICcuLi8uLi9wdWJsaWMvdGV0cmlzLnBuZyc7XHJcbmltcG9ydCBmbGFwcHlCaXJkIGZyb20gJy4uLy4uL3B1YmxpYy9mbGFwcHlCaXJkLnBuZyc7XHJcbmltcG9ydCBub3RlcGFkIGZyb20gJy4uLy4uL3B1YmxpYy9ub3RlcGFkLnBuZyc7XHJcbmltcG9ydCBzYW5kYm94REIgZnJvbSAnLi4vY29yZS9JbmRleGVkREInO1xyXG5cclxuY29uc3Qgcm91dGVzID0gW1xyXG4gIHtcclxuICAgIHBhdGg6ICcvJyxcclxuICAgIGh0bWw6IGh0bWxgPG15LWhvbWU+PC9teS1ob21lPmAsXHJcbiAgICBsYWJlbDogJ0hvbWUnLFxyXG4gICAgaWNvblNyYzogbnVsbCxcclxuICB9LFxyXG4gIHtcclxuICAgIHBhdGg6ICcvdGV0cmlzJyxcclxuICAgIGh0bWw6IGh0bWxgPG15LXRldHJpcz48L215LXRldHJpcz5gLFxyXG4gICAgbGFiZWw6ICdUZXRyaXMnLFxyXG4gICAgaWNvblNyYzogdGV0cmlzLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgcGF0aDogJy9mbGFwcHliaXJkJyxcclxuICAgIGh0bWw6IGh0bWxgPG15LWZsYXBweWJpcmQ+PC9teS1mbGFwcHliaXJkPmAsXHJcbiAgICBsYWJlbDogJ0ZsYXBweSZuYnNwO0JpcmQnLFxyXG4gICAgaWNvblNyYzogZmxhcHB5QmlyZCxcclxuICB9LFxyXG4gIHtcclxuICAgIHBhdGg6ICcvbm90ZXBhZCcsXHJcbiAgICBodG1sOiBodG1sYDxteS1ub3RlcGFkPjwvbXktbm90ZXBhZD5gLFxyXG4gICAgbGFiZWw6ICdOb3RlJm5ic3A7UGFkJyxcclxuICAgIGljb25TcmM6IG5vdGVwYWQsXHJcbiAgfSxcclxuXTtcclxuXHJcbmNvbnN0IG1haW5JY29ucyA9IHJvdXRlcy5yZWR1Y2UoKHByZXYsIHJvdXRlcikgPT4ge1xyXG4gIGNvbnN0IHsgcGF0aCwgbGFiZWwsIGljb25TcmMgfSA9IHJvdXRlcjtcclxuICBpZiAocm91dGVyLnBhdGggPT09ICcvJykgcmV0dXJuIHByZXY7XHJcbiAgcmV0dXJuIFsuLi5wcmV2LCB7IHBhdGgsIGxhYmVsLCBpY29uU3JjIH1dO1xyXG59LCBbXSk7XHJcblxyXG5jb25zdCBnZXRMb2NhbEljb25zID0gYXN5bmMgKCkgPT4ge1xyXG4gIGNvbnN0IG5vdGVwYWREYXRhID0gYXdhaXQgc2FuZGJveERCLmdldEFsbERhdGEoJ25vdGVwYWQnKTtcclxuICBjb25zdCBub3RlcGFkSWNvbnMgPSBub3RlcGFkRGF0YS5yZWR1Y2UoKHByZXYsIGljb24pID0+IHtcclxuICAgIGNvbnN0IHsgaWQsIHRpdGxlIH0gPSBpY29uO1xyXG4gICAgcmV0dXJuIFsuLi5wcmV2LCB7IHBhdGg6IGAvbm90ZXBhZC8ke2lkfWAsIGxhYmVsOiB0aXRsZSwgaWNvblNyYzogbm90ZXBhZCB9XTtcclxuICB9LCBbXSk7XHJcblxyXG4gIHJldHVybiBbLi4ubm90ZXBhZEljb25zXTtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHJvdXRlcztcclxuZXhwb3J0IHsgbWFpbkljb25zLCBnZXRMb2NhbEljb25zIH07XHJcbiIsImltcG9ydCByb3V0ZXMgZnJvbSAnLi4vdXRpbHMvcm91dGVzJztcclxuXHJcbmNvbnN0IEJBU0VfVVJMID0gJy9qcy1zYW5kYm94JztcclxuXHJcbmNsYXNzIFJvdXRlciB7XHJcbiAgY29uc3RydWN0b3Iocm91dGUpIHtcclxuICAgIHRoaXMucm91dGVzID0gcm91dGU7XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICBjb25zdCByb3V0ZSA9IHRoaXMucm91dGVzLmZpbmQoKHZhbHVlKSA9PiB2YWx1ZS5wYXRoID09PSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUucmVwbGFjZShCQVNFX1VSTCwgJycpKTtcclxuXHJcbiAgICBpZiAoIXJvdXRlKSB7XHJcbiAgICAgIHRoaXMucmVwbGFjZVRvKCcvJyk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcGFnZScpLmlubmVySFRNTCA9IHJvdXRlLmh0bWw7XHJcbiAgfVxyXG5cclxuICBuYXZpZ2F0ZVRvKHVybCkge1xyXG4gICAgd2luZG93Lmhpc3RvcnkucHVzaFN0YXRlKG51bGwsIG51bGwsIHVybCk7XHJcbiAgICB0aGlzLnJlbmRlcigpO1xyXG4gIH1cclxuXHJcbiAgcmVwbGFjZVRvKHVybCkge1xyXG4gICAgd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKG51bGwsIG51bGwsIHVybCk7XHJcbiAgICB0aGlzLnJlbmRlcigpO1xyXG4gIH1cclxuXHJcbiAgYmFjaygpIHtcclxuICAgIHdpbmRvdy5oaXN0b3J5LmJhY2soKTtcclxuICAgIHRoaXMucmVuZGVyKCk7XHJcbiAgfVxyXG59XHJcblxyXG5jb25zdCByb3V0ZXIgPSBuZXcgUm91dGVyKHJvdXRlcyk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCByb3V0ZXI7XHJcbiIsImltcG9ydCBXZWJDb21wb25lbnQgZnJvbSAnLi4vLi4vY29yZS9XZWJDb21wb25lbnQnO1xyXG5pbXBvcnQgeyBodG1sIH0gZnJvbSAnLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBtYWluSWNvbnMgfSBmcm9tICcuLi8uLi91dGlscy9yb3V0ZXMnO1xyXG5pbXBvcnQgcm91dGVyIGZyb20gJy4uLy4uL2NvcmUvUm91dGVyJztcclxuaW1wb3J0IHdpbmRvd0xvZ28gZnJvbSAnLi4vLi4vLi4vcHVibGljL3dpbmRvd0xvZ28ucG5nJztcclxuaW1wb3J0IHNlYXJjaEljb24gZnJvbSAnLi4vLi4vLi4vcHVibGljL3NlYXJjaEljb24ucG5nJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvb3RlciBleHRlbmRzIFdlYkNvbXBvbmVudCB7XHJcbiAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XHJcbiAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xyXG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGFuZGxlQ2xpY2suYmluZCh0aGlzKSk7XHJcbiAgfVxyXG5cclxuICBpbmplY3RIVE1MKCkge1xyXG4gICAgcmV0dXJuIGh0bWxgXHJcbiAgICAgIDxpbWcgYWx0PVwid2luZG93X2xvZ29cIiBzcmM9JHt3aW5kb3dMb2dvfSBjbGFzcz1cIndpbmRvd19pY29uXCIgLz5cclxuICAgICAgPGRpdiBjbGFzcz1cImlucHV0X2JveFwiPlxyXG4gICAgICAgIDxpbWcgYWx0PVwic2VhcmNoXCIgc3JjPSR7c2VhcmNoSWNvbn0gY2xhc3M9XCJ3aW5kb3dfaWNvblwiIC8+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgcGxhY2Vob2xkZXI9XCLssL7quLBcIiAvPlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgJHttYWluSWNvbnNcclxuICAgICAgICAubWFwKChpY29uKSA9PiB7XHJcbiAgICAgICAgICByZXR1cm4gaHRtbGAgPG15LWljb24gZGF0YS1wYXRoPVwiJHtpY29uLnBhdGh9XCIgZGF0YS1pY29uU3JjPVwiJHtpY29uLmljb25TcmN9XCI+PC9teS1pY29uPiBgO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmpvaW4oJycpfVxyXG4gICAgYDtcclxuICB9XHJcblxyXG4gIGhhbmRsZUNsaWNrKGUpIHtcclxuICAgIGlmICghZS50YXJnZXQuY2xvc2VzdCgnbXktaWNvbicpKSByZXR1cm47XHJcblxyXG4gICAgY29uc3QgaWNvbiA9IGUudGFyZ2V0LmNsb3Nlc3QoJ215LWljb24nKTtcclxuICAgIHJvdXRlci5uYXZpZ2F0ZVRvKGljb24uZGF0YXNldC5wYXRoKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFdlYkNvbXBvbmVudCBmcm9tICcuLi8uLi9jb3JlL1dlYkNvbXBvbmVudCc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIb21lIGV4dGVuZHMgV2ViQ29tcG9uZW50IHt9XHJcbiIsImltcG9ydCBXZWJDb21wb25lbnQgZnJvbSAnLi4vLi4vY29yZS9XZWJDb21wb25lbnQnO1xyXG5pbXBvcnQgeyBodG1sIH0gZnJvbSAnLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGV0cmlzIGV4dGVuZHMgV2ViQ29tcG9uZW50IHtcclxuICBpbmplY3RIVE1MKCkge1xyXG4gICAgcmV0dXJuIGh0bWxgXHJcbiAgICAgIDxoMT5UZXRyaXM8L2gxPlxyXG4gICAgICA8cD5Zb3UgYXJlIHZpZXdpbmcgdGhlIFRldHJpcyBjb21wb25lbnQhPC9wPlxyXG4gICAgYDtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFdlYkNvbXBvbmVudCBmcm9tICcuLi8uLi9jb3JlL1dlYkNvbXBvbmVudCc7XHJcbmltcG9ydCB7IGh0bWwgfSBmcm9tICcuLi8uLi91dGlscy91dGlscyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGbGFwcHlCaXJkIGV4dGVuZHMgV2ViQ29tcG9uZW50IHtcclxuICBpbmplY3RIVE1MKCkge1xyXG4gICAgcmV0dXJuIGh0bWxgXHJcbiAgICAgIDxoMT5GbGFwcHkgQmlyZDwvaDE+XHJcbiAgICAgIDxwPllvdSBhcmUgdmlld2luZyB0aGUgRmxhcHB5IEJpcmQgY29tcG9uZW50ITwvcD5cclxuICAgICAgPHA+WW91IGFyZSB2aWV3aW5nIHRoZSBGbGFwcHkgQmlyZCBjb21wb25lbnQhPC9wPlxyXG4gICAgICA8cD5Zb3UgYXJlIHZpZXdpbmcgdGhlIEZsYXBweSBCaXJkIGNvbXBvbmVudCE8L3A+XHJcbiAgICAgIDxwPllvdSBhcmUgdmlld2luZyB0aGUgRmxhcHB5IEJpcmQgY29tcG9uZW50ITwvcD5cclxuICAgICAgPHA+WW91IGFyZSB2aWV3aW5nIHRoZSBGbGFwcHkgQmlyZCBjb21wb25lbnQhPC9wPlxyXG4gICAgICA8cD5Zb3UgYXJlIHZpZXdpbmcgdGhlIEZsYXBweSBCaXJkIGNvbXBvbmVudCE8L3A+XHJcbiAgICBgO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBodG1sIH0gZnJvbSAnLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgcm91dGVyIGZyb20gJy4uLy4uL2NvcmUvUm91dGVyJztcclxuaW1wb3J0IFdlYkNvbXBvbmVudCBmcm9tICcuLi8uLi9jb3JlL1dlYkNvbXBvbmVudCc7XHJcbmltcG9ydCB7IGdldExvY2FsSWNvbnMsIG1haW5JY29ucyB9IGZyb20gJy4uLy4uL3V0aWxzL3JvdXRlcyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJY29ucyBleHRlbmRzIFdlYkNvbXBvbmVudCB7XHJcbiAgYXN5bmMgY29ubmVjdGVkQ2FsbGJhY2soKSB7XHJcbiAgICB0aGlzLmljb25zID0gWy4uLm1haW5JY29ucywgLi4uKGF3YWl0IGdldExvY2FsSWNvbnMoKSldO1xyXG4gICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcclxuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmhhbmRsZUNsaWNrLmJpbmQodGhpcykpO1xyXG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdkYmxjbGljaycsIHRoaXMuaGFuZGxlRG91YmxlQ2xpY2suYmluZCh0aGlzKSk7XHJcbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLmhhbmRsZUtleURvd24uYmluZCh0aGlzKSk7XHJcbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ2ljb25DaGFuZ2UnLCAoZSkgPT4ge1xyXG4gICAgICB0aGlzLmljb25zID0gWy4uLnRoaXMuaWNvbnMsIGUuZGV0YWlsXTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldCBvYnNlcnZlZEF0dHJpYnV0ZXMoKSB7XHJcbiAgICByZXR1cm4gWydpY29ucyddO1xyXG4gIH1cclxuXHJcbiAgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKG5hbWUsIG9sZFZhbHVlLCBuZXdWYWx1ZSkge1xyXG4gICAgaWYgKG9sZFZhbHVlID09PSBuZXdWYWx1ZSkgcmV0dXJuO1xyXG4gICAgdGhpcy5yZW5kZXIoKTtcclxuICB9XHJcblxyXG4gIGluamVjdEhUTUwoKSB7XHJcbiAgICByZXR1cm4gaHRtbGBcclxuICAgICAgJHt0aGlzLmljb25zXHJcbiAgICAgICAgLm1hcCgoaWNvbikgPT4ge1xyXG4gICAgICAgICAgcmV0dXJuIGh0bWxgXHJcbiAgICAgICAgICAgIDxteS1pY29uIGRhdGEtcGF0aD0ke2ljb24ucGF0aH0gZGF0YS1sYWJlbD0ke2ljb24ubGFiZWx9IGRhdGEtaWNvblNyYz0ke2ljb24uaWNvblNyY30+PC9teS1pY29uPlxyXG4gICAgICAgICAgYDtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5qb2luKCcnKX1cclxuICAgIGA7XHJcbiAgfVxyXG5cclxuICBnZXQgaWNvbnMoKSB7XHJcbiAgICByZXR1cm4gSlNPTi5wYXJzZSh0aGlzLmdldEF0dHJpYnV0ZSgnaWNvbnMnKSk7XHJcbiAgfVxyXG5cclxuICBzZXQgaWNvbnModmFsdWUpIHtcclxuICAgIHRoaXMuc2V0QXR0cmlidXRlKCdpY29ucycsIEpTT04uc3RyaW5naWZ5KHZhbHVlKSk7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVDbGljayhlKSB7XHJcbiAgICBpZiAoIWUudGFyZ2V0LmNsb3Nlc3QoJ215LWljb24nKSkgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IGljb24gPSBlLnRhcmdldC5jbG9zZXN0KCdteS1pY29uJyk7XHJcbiAgICBpY29uLnRvZ2dsZUF0dHJpYnV0ZSgnY2hlY2tlZCcpO1xyXG4gICAgdGhpcy5xdWVyeVNlbGVjdG9yQWxsKCdteS1pY29uJykuZm9yRWFjaCgobm9kZSkgPT4ge1xyXG4gICAgICBpZiAobm9kZSAhPT0gaWNvbikge1xyXG4gICAgICAgIG5vZGUucmVtb3ZlQXR0cmlidXRlKCdjaGVja2VkJyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgaGFuZGxlRG91YmxlQ2xpY2soZSkge1xyXG4gICAgaWYgKCFlLnRhcmdldC5jbG9zZXN0KCdteS1pY29uJykpIHJldHVybjtcclxuXHJcbiAgICBjb25zdCBpY29uID0gZS50YXJnZXQuY2xvc2VzdCgnbXktaWNvbicpO1xyXG4gICAgcm91dGVyLm5hdmlnYXRlVG8oaWNvbi5kYXRhc2V0LnBhdGgpO1xyXG4gIH1cclxuXHJcbiAgaGFuZGxlS2V5RG93bihlKSB7XHJcbiAgICBjb25zdCBjaGVja2VkRWwgPSB0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoJ215LWljb25bY2hlY2tlZF0nKTtcclxuICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJykge1xyXG4gICAgICBpZiAoY2hlY2tlZEVsLmxlbmd0aCA+IDEpIHJldHVybjtcclxuICAgICAgaWYgKCFjaGVja2VkRWwpIHJldHVybjtcclxuICAgICAgcm91dGVyLm5hdmlnYXRlVG8oY2hlY2tlZEVsWzBdLmRhdGFzZXQucGF0aCk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IGh0bWwgfSBmcm9tICcuLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCBXZWJDb21wb25lbnQgZnJvbSAnLi4vLi4vY29yZS9XZWJDb21wb25lbnQnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSWNvbiBleHRlbmRzIFdlYkNvbXBvbmVudCB7XHJcbiAgaW5qZWN0SFRNTCgpIHtcclxuICAgIGNvbnN0IHsgbGFiZWwsIGljb25zcmMgfSA9IHRoaXMuZGF0YXNldDtcclxuICAgIHJldHVybiBodG1sYFxyXG4gICAgICA8aW1nIGFsdD1cIiR7bGFiZWx9X2ljb25cIiBzcmM9JHtpY29uc3JjfSAvPlxyXG4gICAgICAke2xhYmVsID8gYDxzcGFuIGNsYXNzPVwiaWNvbl9uYW1lXCI+JHtsYWJlbH08L3NwYW4+YCA6ICcnfVxyXG4gICAgYDtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFdlYkNvbXBvbmVudCBmcm9tICcuLi8uLi9jb3JlL1dlYkNvbXBvbmVudCc7XHJcbmltcG9ydCB7IGh0bWwgfSBmcm9tICcuLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCAnLi9zdHlsZXMuc2Nzcyc7XHJcbmltcG9ydCBzYW5kYm94REIgZnJvbSAnLi4vLi4vY29yZS9JbmRleGVkREInO1xyXG5pbXBvcnQgTm90ZVBhZEljb24gZnJvbSAnLi4vLi4vLi4vcHVibGljL25vdGVwYWQucG5nJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5vdGVQYWQgZXh0ZW5kcyBXZWJDb21wb25lbnQge1xyXG4gIGNvbm5lY3RlZENhbGxiYWNrKCkge1xyXG4gICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcclxuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcignc2F2ZScsIHRoaXMuaGFuZGxlU2F2ZSk7XHJcbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ2xvY2FsU2F2ZScsIHRoaXMuaGFuZGxlTG9jYWxTYXZlKTtcclxuICB9XHJcblxyXG4gIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xyXG4gICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCdzYXZlJywgdGhpcy5oYW5kbGVTYXZlKTtcclxuICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcignbG9jYWxTYXZlJywgdGhpcy5oYW5kbGVMb2NhbFNhdmUpO1xyXG4gIH1cclxuXHJcbiAgaW5qZWN0SFRNTCgpIHtcclxuICAgIHJldHVybiBodG1sYFxyXG4gICAgICA8bXktbm90ZXBhZC1oZWFkZXI+PC9teS1ub3RlcGFkLWhlYWRlcj5cclxuICAgICAgPHRleHRhcmVhPjwvdGV4dGFyZWE+XHJcbiAgICBgO1xyXG4gIH1cclxuXHJcbiAgaGFuZGxlTG9jYWxTYXZlKCkge1xyXG4gICAgY29uc3Qgbm90ZVBhZERhdGEgPSB0aGlzLmdldE5vdGVQYWREYXRhKCk7XHJcbiAgICBpZiAobm90ZVBhZERhdGEgPT09ICdmYWlsJykgcmV0dXJuO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbbm90ZVBhZERhdGEuY29udGVudF0sIHsgdHlwZTogJ3RleHQvcGxhaW4nIH0pO1xyXG4gICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xyXG4gICAgICBsaW5rLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xyXG4gICAgICBsaW5rLmRvd25sb2FkID0gYCR7bm90ZVBhZERhdGEudGl0bGV9LnR4dGA7XHJcbiAgICAgIGxpbmsuY2xpY2soKTtcclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICBhbGVydCgn7KCA7J6l7JeQIOyLpO2MqO2WiOyKteuLiOuLpC4nKTtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgfSBmaW5hbGx5IHtcclxuICAgICAgdGhpcy5xdWVyeVNlbGVjdG9yKCd0ZXh0YXJlYScpLnZhbHVlID0gJyc7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBoYW5kbGVTYXZlKGUpIHtcclxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICBjb25zdCBub3RlUGFkRGF0YSA9IHRoaXMuZ2V0Tm90ZVBhZERhdGEoKTtcclxuICAgIGlmIChub3RlUGFkRGF0YSA9PT0gJ2ZhaWwnKSByZXR1cm47XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2FuZGJveERCLnVwc2VydERhdGEoJ25vdGVwYWQnLCB7XHJcbiAgICAgICAgdGl0bGU6IG5vdGVQYWREYXRhLnRpdGxlLFxyXG4gICAgICAgIGNvbnRlbnQ6IG5vdGVQYWREYXRhLmNvbnRlbnQsXHJcbiAgICAgIH0pO1xyXG4gICAgICBpZiAocmVzdWx0KSB7XHJcbiAgICAgICAgYWxlcnQoJ+yggOyepeuQmOyXiOyKteuLiOuLpC4nKTtcclxuICAgICAgfVxyXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdteS1pY29ucycpLmRpc3BhdGNoRXZlbnQoXHJcbiAgICAgICAgbmV3IEN1c3RvbUV2ZW50KCdpY29uQ2hhbmdlJywge1xyXG4gICAgICAgICAgZGV0YWlsOiB7XHJcbiAgICAgICAgICAgIHBhdGg6IGAvbm90ZXBhZC8ke3Jlc3VsdH1gLFxyXG4gICAgICAgICAgICBsYWJlbDogbm90ZVBhZERhdGEudGl0bGUsXHJcbiAgICAgICAgICAgIGljb25TcmM6IE5vdGVQYWRJY29uLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9KVxyXG4gICAgICApO1xyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgIGFsZXJ0KCfsoIDsnqXsl5Ag7Iuk7Yyo7ZaI7Iq164uI64ukLicpO1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICB9IGZpbmFsbHkge1xyXG4gICAgICB0aGlzLnF1ZXJ5U2VsZWN0b3IoJ3RleHRhcmVhJykudmFsdWUgPSAnJztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldE5vdGVQYWREYXRhKCkge1xyXG4gICAgY29uc3QgY29udGVudCA9IHRoaXMucXVlcnlTZWxlY3RvcigndGV4dGFyZWEnKS52YWx1ZTtcclxuICAgIGlmICghY29udGVudCkge1xyXG4gICAgICBhbGVydCgn64K07Jqp7J20IOyXhuyKteuLiOuLpC4nKTtcclxuICAgICAgcmV0dXJuICdmYWlsJztcclxuICAgIH1cclxuICAgIGxldCB0aXRsZSA9IHByb21wdCgn7KCA7J6l7ZWgIO2MjOydvOuqheydhCDsnoXroKXtlZjshLjsmpQnLCAn7KCc66qp7JeG7J2MJyk7XHJcbiAgICB3aGlsZSAodGl0bGUgPT09IG51bGwgfHwgdGl0bGUgPT09IHVuZGVmaW5lZCB8fCB0aXRsZSA9PT0gJycpIHtcclxuICAgICAgaWYgKHRpdGxlID09PSBudWxsKSByZXR1cm4gJ2ZhaWwnO1xyXG4gICAgICB0aXRsZSA9IHByb21wdCgn7YyM7J2866qF7J2AIO2VhOyImOyeheuLiOuLpC4nLCAn7KCc66qp7JeG7J2MJyk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHsgdGl0bGUsIGNvbnRlbnQgfTtcclxuICB9XHJcbn1cclxuIiwiY29uc3QgYnV0dG9ucyA9IFtcclxuICB7XHJcbiAgICBpZDogJ2ZpbGUnLFxyXG4gICAgdGl0bGU6ICftjIzsnbwnLFxyXG4gICAga2V5OiAnRicsXHJcbiAgICBzbG90czogW1xyXG4gICAgICB7IGlkOiAxLCB0ZXh0OiAn7IOI66GcIOunjOuTpOq4sChOKScsIGtleTogWydDdHJsJywgJ04nXSwgZGlzYWJsZTogdHJ1ZSB9LFxyXG4gICAgICB7IGlkOiAyLCB0ZXh0OiAn64K0IOy7tO2TqO2EsOyXkCDsoIDsnqUoVyknLCBrZXk6IFsnQ3RybCcsICdTaGlmdCcsICdOJ10sIG9uQ2xpY2s6IGhhbmRsZUxvY2FsU2F2ZUNsaWNrIH0sXHJcbiAgICAgIHsgaWQ6IDMsIHRleHQ6ICfsoIDsnqUoUyknLCBrZXk6IFsnQ3RybCcsICdTJ10sIG9uQ2xpY2s6IGhhbmRsZVNhdmVDbGljayB9LFxyXG4gICAgICB7IGlkOiA0LCB0ZXh0OiAn7IKt7KCcKEQpJywga2V5OiBbJ0N0cmwnLCAnU2hpZnQnLCAnUyddLCBkaXNhYmxlOiB0cnVlIH0sXHJcbiAgICAgIHsgaWQ6IDUsIHRleHQ6ICftjpjsnbTsp4Ag7ISk7KCVKFUpLi4uJywga2V5OiBbXSwgZGlzYWJsZTogdHJ1ZSB9LFxyXG4gICAgICB7IGlkOiA2LCB0ZXh0OiAn7J247IeEKFApLi4uJywga2V5OiBbJ0N0cmwnLCAnUCddLCBkaXNhYmxlOiB0cnVlIH0sXHJcbiAgICAgIHsgaWQ6IDcsIHRleHQ6ICfrgZ3rgrTquLAoWCknLCBrZXk6IFtdLCBkaXNhYmxlOiB0cnVlIH0sXHJcbiAgICBdLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgaWQ6ICdlZGl0JyxcclxuICAgIHRpdGxlOiAn7Y647KeRJyxcclxuICAgIGtleTogJ0UnLFxyXG4gICAgc2xvdHM6IFtcclxuICAgICAgeyBpZDogOCwgdGV4dDogJ+yLpO2WiSDst6jshowoVSknLCBrZXk6IFsnQ3RybCcsICdaJ10sIGRpc2FibGU6IHRydWUgfSxcclxuICAgICAgeyBpZDogOSwgdGV4dDogJ+yemOudvOuCtOq4sChUKScsIGtleTogWydDdHJsJywgJ1gnXSwgZGlzYWJsZTogdHJ1ZSB9LFxyXG4gICAgICB7IGlkOiAxMCwgdGV4dDogJ+uzteyCrChDKScsIGtleTogWydDdHJsJywgJ0MnXSwgZGlzYWJsZTogdHJ1ZSB9LFxyXG4gICAgICB7IGlkOiAxMSwgdGV4dDogJ+u2meyXrOuEo+q4sChQKScsIGtleTogWydDdHJsJywgJ1YnXSwgZGlzYWJsZTogdHJ1ZSB9LFxyXG4gICAgICB7IGlkOiAxMiwgdGV4dDogJ+yCreygnChEKScsIGtleTogWydEZWwnXSwgZGlzYWJsZTogdHJ1ZSB9LFxyXG4gICAgICB7IGlkOiAxMywgdGV4dDogJ0JpbmfsnLzroZwg6rKA7IOJKFMpLi4uJywga2V5OiBbJ0N0cmwnLCAnRSddLCBkaXNhYmxlOiB0cnVlIH0sXHJcbiAgICAgIHsgaWQ6IDE0LCB0ZXh0OiAn7LC+6riwKEYpLi4uJywga2V5OiBbJ0N0cmwnLCAnRiddLCBkaXNhYmxlOiB0cnVlIH0sXHJcbiAgICAgIHsgaWQ6IDE1LCB0ZXh0OiAn64uk7J2MIOywvuq4sChOKScsIGtleTogWydGMyddLCBkaXNhYmxlOiB0cnVlIH0sXHJcbiAgICAgIHsgaWQ6IDE2LCB0ZXh0OiAn7J207KCEIOywvuq4sChWKScsIGtleTogWydTaGlmdCcsICdGMyddLCBkaXNhYmxlOiB0cnVlIH0sXHJcbiAgICAgIHsgaWQ6IDE3LCB0ZXh0OiAn67CU6r646riwKFIpLi4uJywga2V5OiBbJ0N0cmwnLCAnSCddLCBkaXNhYmxlOiB0cnVlIH0sXHJcbiAgICAgIHsgaWQ6IDE4LCB0ZXh0OiAn7J2064+ZKEcpLi4uJywga2V5OiBbJ0N0cmwnLCAnRyddLCBkaXNhYmxlOiB0cnVlIH0sXHJcbiAgICAgIHsgaWQ6IDE5LCB0ZXh0OiAn66qo65GQIOyEoO2DnShBKScsIGtleTogWydDdHJsJywgJ0EnXSwgZGlzYWJsZTogdHJ1ZSB9LFxyXG4gICAgICB7IGlkOiAyMCwgdGV4dDogJ+yLnOqwhC/rgqDsp5woRCknLCBrZXk6IFsnRjUnXSwgZGlzYWJsZTogdHJ1ZSB9LFxyXG4gICAgXSxcclxuICB9LFxyXG4gIHtcclxuICAgIGlkOiAnZm9ybWF0JyxcclxuICAgIHRpdGxlOiAn7ISc7IudJyxcclxuICAgIGtleTogJ08nLFxyXG4gICAgc2xvdHM6IFtcclxuICAgICAgeyBpZDogMjEsIHRleHQ6ICfsnpDrj5kg7KSEIOuwlOq/iChXKScsIGtleTogW10sIGRpc2FibGU6IHRydWUgfSxcclxuICAgICAgeyBpZDogMjIsIHRleHQ6ICfquIDqvLQoRikuLi4nLCBrZXk6IFtdLCBkaXNhYmxlOiB0cnVlIH0sXHJcbiAgICBdLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgaWQ6ICd2aWV3JyxcclxuICAgIHRpdGxlOiAn67O06riwJyxcclxuICAgIGtleTogJ1YnLFxyXG4gICAgc2xvdHM6IFtcclxuICAgICAgeyBpZDogMjMsIHRleHQ6ICftmZXrjIDtlZjquLAoWiknLCBrZXk6IFsnQ3RybCcsICcrJ10sIGRpc2FibGU6IHRydWUgfSxcclxuICAgICAgeyBpZDogMjQsIHRleHQ6ICfstpXshoztlZjquLAoWCknLCBrZXk6IFsnQ3RybCcsICctJ10sIGRpc2FibGU6IHRydWUgfSxcclxuICAgICAgeyBpZDogMjUsIHRleHQ6ICfsg4Htg5wg7ZGc7Iuc7KSEKFMpJywga2V5OiBbXSwgZGlzYWJsZTogdHJ1ZSB9LFxyXG4gICAgXSxcclxuICB9LFxyXG4gIHtcclxuICAgIGlkOiAnaGVscCcsXHJcbiAgICB0aXRsZTogJ+uPhOybgOunkCcsXHJcbiAgICBrZXk6ICdIJyxcclxuICAgIHNsb3RzOiBbXHJcbiAgICAgIHsgaWQ6IDI2LCB0ZXh0OiAn64+E7JuA66eQIOuztOq4sChIKScsIGtleTogW10sIGRpc2FibGU6IHRydWUgfSxcclxuICAgICAgeyBpZDogMjcsIHRleHQ6ICftlLzrk5zrsLEg67O064K06riwKEYpJywga2V5OiBbXSwgZGlzYWJsZTogdHJ1ZSB9LFxyXG4gICAgICB7IGlkOiAyOCwgdGV4dDogJ+uplOuqqOyepSDsoJXrs7QoQSknLCBrZXk6IFtdLCBkaXNhYmxlOiB0cnVlIH0sXHJcbiAgICBdLFxyXG4gIH0sXHJcbl07XHJcblxyXG5jb25zdCBzbG90cyA9IGJ1dHRvbnMucmVkdWNlKChhY2MsIGN1cikgPT4ge1xyXG4gIHJldHVybiBbLi4uYWNjLCAuLi5jdXIuc2xvdHNdO1xyXG59LCBbXSk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBidXR0b25zO1xyXG5leHBvcnQgeyBzbG90cyB9O1xyXG5cclxuZnVuY3Rpb24gaGFuZGxlU2F2ZUNsaWNrKCkge1xyXG4gIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ3NhdmUnLCB7IGJ1YmJsZXM6IHRydWUgfSkpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVMb2NhbFNhdmVDbGljaygpIHtcclxuICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdsb2NhbFNhdmUnLCB7IGJ1YmJsZXM6IHRydWUgfSkpO1xyXG59XHJcbiIsImltcG9ydCB7IGh0bWwgfSBmcm9tICcuLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCBXZWJDb21wb25lbnQgZnJvbSAnLi4vLi4vLi4vY29yZS9XZWJDb21wb25lbnQnO1xyXG5pbXBvcnQgYnV0dG9ucywgeyBzbG90cyB9IGZyb20gJy4uL2NvbnN0L2J1dHRvbnMnO1xyXG5pbXBvcnQgTm90ZVBhZEljb24gZnJvbSAnLi4vLi4vLi4vLi4vcHVibGljL25vdGVwYWQucG5nJztcclxuaW1wb3J0IHJvdXRlciBmcm9tICcuLi8uLi8uLi9jb3JlL1JvdXRlcic7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBOb3RlUGFkSGVhZGVyIGV4dGVuZHMgV2ViQ29tcG9uZW50IHtcclxuICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcclxuICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XHJcbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5oYW5kbGVDbGljayk7XHJcbiAgfVxyXG5cclxuICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcclxuICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmhhbmRsZUNsaWNrKTtcclxuICB9XHJcblxyXG4gIGluamVjdEhUTUwoKSB7XHJcbiAgICByZXR1cm4gaHRtbGBcclxuICAgICAgPGhlYWRlcj5cclxuICAgICAgICA8c3Bhbj48aW1nIGFsdD1cIm5vdGVwYWRfaWNvblwiIHNyYz0ke05vdGVQYWRJY29ufSAvPuygnOuqqeyXhuydjCAtIFdpbmRvd3Mg66mU66qo7J6lPC9zcGFuPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJ2aWV3X2J1dHRvbnNcIj5cclxuICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJ2aWV3X2J1dHRvblwiIGlkPVwibWluaVwiPvCfl5U8L2J1dHRvbj5cclxuICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJ2aWV3X2J1dHRvblwiIGlkPVwiZnVsbFwiPvCfl5Y8L2J1dHRvbj5cclxuICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJ2aWV3X2J1dHRvblwiIGlkPVwiY2xvc2VcIj7ihak8L2J1dHRvbj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9oZWFkZXI+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJlZGl0X2J1dHRvbnNcIj5cclxuICAgICAgICAke2J1dHRvbnNcclxuICAgICAgICAgIC5tYXAoXHJcbiAgICAgICAgICAgIChidXR0b24pID0+IGh0bWxgXHJcbiAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImVkaXRfYnV0dG9uXCI+XHJcbiAgICAgICAgICAgICAgICAke2J1dHRvbi50aXRsZX0oPHU+JHtidXR0b24ua2V5fTwvdT4pXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicG9wdXBcIj5cclxuICAgICAgICAgICAgICAgICAgJHtidXR0b24uc2xvdHNcclxuICAgICAgICAgICAgICAgICAgICAubWFwKFxyXG4gICAgICAgICAgICAgICAgICAgICAgKHNsb3QpID0+IGh0bWxgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzdWJcIiBkYXRhLWlkPVwiJHtzbG90LmlkfVwiIGRhdGEtZGlzYWJsZT1cIiR7ISFzbG90LmRpc2FibGV9XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4ke3Nsb3QudGV4dH08L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAke3Nsb3Qua2V5Lmxlbmd0aCA+IDAgPyBgPGRpdj4ke3Nsb3Qua2V5LmpvaW4oJyArICcpfTwvZGl2PmAgOiAnJ31cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICBgXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgIC5qb2luKCcnKX1cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICBgXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgICAuam9pbignJyl9XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgYDtcclxuICB9XHJcblxyXG4gIGhhbmRsZUNsaWNrKGUpIHtcclxuICAgIGNvbnN0IHN1YiA9IGUudGFyZ2V0LmNsb3Nlc3QoJy5zdWInKTtcclxuICAgIGlmIChzdWIpIHtcclxuICAgICAgY29uc3Qgc2xvdElkID0gTnVtYmVyKHN1Yi5kYXRhc2V0LmlkKTtcclxuICAgICAgY29uc3QgeyBvbkNsaWNrIH0gPSBzbG90cy5maW5kKChzbG90KSA9PiBzbG90LmlkID09PSBzbG90SWQpIHx8IHt9O1xyXG4gICAgICBpZiAob25DbGljaykgb25DbGljay5jYWxsKHRoaXMpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgc3dpdGNoIChlLnRhcmdldC5jbGFzc05hbWUpIHtcclxuICAgICAgY2FzZSAndmlld19idXR0b24nOlxyXG4gICAgICAgIGNsaWNrVmlld0J1dHRvbi5jYWxsKHRoaXMsIGUudGFyZ2V0KTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnZWRpdF9idXR0b24nOlxyXG4gICAgICAgIHNob3dQb3B1cC5jYWxsKHRoaXMsIGUudGFyZ2V0KTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjbGlja1ZpZXdCdXR0b24odlRhcmdldCkge1xyXG4gICAgICBzd2l0Y2ggKHZUYXJnZXQuaWQpIHtcclxuICAgICAgICBjYXNlICdmdWxsJzpcclxuICAgICAgICAgIHRoaXMucGFyZW50RWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKCdmdWxsc2NyZWVuJyk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdtaW5pJzpcclxuICAgICAgICBjYXNlICdjbG9zZSc6XHJcbiAgICAgICAgICByb3V0ZXIuYmFjaygpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2hvd1BvcHVwKGVUYXJnZXQpIHtcclxuICAgICAgZVRhcmdldC5xdWVyeVNlbGVjdG9yKCcucG9wdXAnKS5jbGFzc0xpc3QudG9nZ2xlKCdzaG93Jyk7XHJcbiAgICAgIHRoaXMucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwJykuZm9yRWFjaCgobm9kZSkgPT4ge1xyXG4gICAgICAgIGlmIChub2RlICE9PSBlVGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cCcpKSB7XHJcbiAgICAgICAgICBub2RlLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgJy4vc3R5bGUuc2Nzcyc7XHJcbmltcG9ydCBzYW5kYm94REIgZnJvbSAnLi9jb3JlL0luZGV4ZWREQic7XHJcbmltcG9ydCBBcHAgZnJvbSAnLi9BcHAnO1xyXG5pbXBvcnQgRm9vdGVyIGZyb20gJy4vdmlldy9Db21tb24vRm9vdGVyJztcclxuaW1wb3J0IEhvbWUgZnJvbSAnLi92aWV3L0hvbWUnO1xyXG5pbXBvcnQgVGV0cmlzIGZyb20gJy4vdmlldy9UZXRyaXMnO1xyXG5pbXBvcnQgRmxhcHB5QmlyZCBmcm9tICcuL3ZpZXcvRmxhcHB5QmlyZCc7XHJcbmltcG9ydCBJY29ucyBmcm9tICcuL3ZpZXcvQ29tbW9uL0ljb25zJztcclxuaW1wb3J0IEljb24gZnJvbSAnLi92aWV3L0NvbW1vbi9JY29uJztcclxuaW1wb3J0IE5vdGVQYWQgZnJvbSAnLi92aWV3L05vdGVQYWQnO1xyXG5pbXBvcnQgTm90ZVBhZEhlYWRlciBmcm9tICcuL3ZpZXcvTm90ZVBhZC9jb21wb25lbnRzL05vdGVQYWRIZWFkZXInO1xyXG5pbXBvcnQgcm91dGVyIGZyb20gJy4vY29yZS9Sb3V0ZXInO1xyXG5cclxuKGFzeW5jICgpID0+IHtcclxuICBhd2FpdCBzYW5kYm94REIub3BlbkRCKCk7XHJcblxyXG4gIGN1c3RvbUVsZW1lbnRzLmRlZmluZSgnbXktYXBwJywgQXBwKTtcclxuICBjdXN0b21FbGVtZW50cy5kZWZpbmUoJ215LWZvb3RlcicsIEZvb3Rlcik7XHJcbiAgY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdteS1ob21lJywgSG9tZSk7XHJcbiAgY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdteS10ZXRyaXMnLCBUZXRyaXMpO1xyXG4gIGN1c3RvbUVsZW1lbnRzLmRlZmluZSgnbXktZmxhcHB5YmlyZCcsIEZsYXBweUJpcmQpO1xyXG4gIGN1c3RvbUVsZW1lbnRzLmRlZmluZSgnbXktaWNvbnMnLCBJY29ucyk7XHJcbiAgY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdteS1pY29uJywgSWNvbik7XHJcbiAgY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdteS1ub3RlcGFkJywgTm90ZVBhZCk7XHJcbiAgY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdteS1ub3RlcGFkLWhlYWRlcicsIE5vdGVQYWRIZWFkZXIpO1xyXG59KSgpO1xyXG5cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgKCkgPT4gcm91dGVyLnJlbmRlcigpKTtcclxuIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJkYiIsImNvbnN0cnVjdG9yIiwiZGJOYW1lIiwiZGJWZXJzaW9uIiwic3RvcmVzIiwidGhpcyIsImFzeW5jIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJyZXF1ZXN0Iiwid2luZG93IiwiaW5kZXhlZERCIiwib3BlbiIsIm9uc3VjY2VzcyIsInJlc3VsdCIsIm9uZXJyb3IiLCJlIiwib251cGdyYWRlbmVlZGVkIiwiZm9yRWFjaCIsInN0b3JlIiwib2JqZWN0U3RvcmVOYW1lcyIsImNvbnRhaW5zIiwiZGVsZXRlT2JqZWN0U3RvcmUiLCJjcmVhdGVPYmplY3RTdG9yZSIsImtleVBhdGgiLCJhdXRvSW5jcmVtZW50Iiwic3RvcmVOYW1lIiwiaWQiLCJ0cmFuc2FjdGlvbiIsIm9iamVjdFN0b3JlIiwiZ2V0IiwiZ2V0QWxsIiwiZGF0YSIsInB1dCIsImRlbGV0ZSIsInJlbmRlclJhdyIsInN0cmluZyIsInZhbHVlcyIsIlN0cmluZyIsInJhdyIsIldlYkNvbXBvbmVudCIsIkhUTUxFbGVtZW50IiwiY29ubmVjdGVkQ2FsbGJhY2siLCJyZW5kZXIiLCJpbm5lckhUTUwiLCJpbmplY3RIVE1MIiwiQXBwIiwicm91dGVzIiwicGF0aCIsImh0bWwiLCJsYWJlbCIsImljb25TcmMiLCJtYWluSWNvbnMiLCJyZWR1Y2UiLCJwcmV2Iiwicm91dGVyIiwiZ2V0TG9jYWxJY29ucyIsImljb24iLCJ0aXRsZSIsInJvdXRlIiwiZmluZCIsInZhbHVlIiwibG9jYXRpb24iLCJwYXRobmFtZSIsInJlcGxhY2UiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJyZXBsYWNlVG8iLCJuYXZpZ2F0ZVRvIiwidXJsIiwiaGlzdG9yeSIsInB1c2hTdGF0ZSIsInJlcGxhY2VTdGF0ZSIsImJhY2siLCJGb290ZXIiLCJzdXBlciIsImFkZEV2ZW50TGlzdGVuZXIiLCJoYW5kbGVDbGljayIsImJpbmQiLCJqb2luIiwidGFyZ2V0IiwiY2xvc2VzdCIsImRhdGFzZXQiLCJIb21lIiwiVGV0cmlzIiwiRmxhcHB5QmlyZCIsIkljb25zIiwiaWNvbnMiLCJoYW5kbGVEb3VibGVDbGljayIsImhhbmRsZUtleURvd24iLCJkZXRhaWwiLCJvYnNlcnZlZEF0dHJpYnV0ZXMiLCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2siLCJuYW1lIiwib2xkVmFsdWUiLCJuZXdWYWx1ZSIsIm1hcCIsIkpTT04iLCJwYXJzZSIsImdldEF0dHJpYnV0ZSIsInNldEF0dHJpYnV0ZSIsInN0cmluZ2lmeSIsInRvZ2dsZUF0dHJpYnV0ZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJub2RlIiwicmVtb3ZlQXR0cmlidXRlIiwiY2hlY2tlZEVsIiwia2V5IiwibGVuZ3RoIiwiSWNvbiIsImljb25zcmMiLCJOb3RlUGFkIiwiaGFuZGxlU2F2ZSIsImhhbmRsZUxvY2FsU2F2ZSIsImRpc2Nvbm5lY3RlZENhbGxiYWNrIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIm5vdGVQYWREYXRhIiwiZ2V0Tm90ZVBhZERhdGEiLCJibG9iIiwiQmxvYiIsImNvbnRlbnQiLCJ0eXBlIiwibGluayIsImNyZWF0ZUVsZW1lbnQiLCJocmVmIiwiVVJMIiwiY3JlYXRlT2JqZWN0VVJMIiwiZG93bmxvYWQiLCJjbGljayIsImVyciIsImFsZXJ0IiwiY29uc29sZSIsImVycm9yIiwic3RvcFByb3BhZ2F0aW9uIiwiZGlzcGF0Y2hFdmVudCIsIkN1c3RvbUV2ZW50IiwicHJvbXB0IiwiYnV0dG9ucyIsInNsb3RzIiwidGV4dCIsImRpc2FibGUiLCJvbkNsaWNrIiwiYnViYmxlcyIsImFjYyIsImN1ciIsIk5vdGVQYWRIZWFkZXIiLCJidXR0b24iLCJzbG90Iiwic3ViIiwic2xvdElkIiwiTnVtYmVyIiwiY2FsbCIsImNsYXNzTmFtZSIsInZUYXJnZXQiLCJwYXJlbnRFbGVtZW50IiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiZVRhcmdldCIsInJlbW92ZSIsImN1c3RvbUVsZW1lbnRzIiwiZGVmaW5lIl0sInNvdXJjZVJvb3QiOiIifQ==